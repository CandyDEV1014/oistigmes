(this["webpackJsonpoistigmes-web"]=this["webpackJsonpoistigmes-web"]||[]).push([[2],{154:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var n=a(1),r=a(3),o=a(2),l=a(10),i=a.n(l),c=a(29),s=function(){function e(){Object(r.a)(this,e),this.settings={};var t=Object(n.a)({},c.b);if(window.localStorage.getItem("loginData")){var a=JSON.parse(window.localStorage.getItem("loginData"));t.headers.Authorization=a.Token,this.settings=t}}return Object(o.a)(e,[{key:"List",value:function(e){Object(n.a)({},this.settings);return i.a.get("".concat(c.a,"/api2/category/getcategory?key=").concat(e),this.settings)}},{key:"Add",value:function(e,t){return i.a.post("".concat(c.a,"/api2/category/CreateNewCategory"),e,this.settings)}},{key:"Delete",value:function(e){return i.a.delete("".concat(c.a,"/api2/category/DeleteCategory?id=").concat(e),this.settings)}},{key:"Update",value:function(e,t){return i.a.put("".concat(c.a,"/api2/category/UpdateCategory"),e,this.settings)}},{key:"Positions",value:function(e){var t=Object(n.a)({},this.settings);return t.headers["Content-Type"]="application/json",i.a.put("".concat(c.a,"/api2/category/UpdateCategoryPosition"),e,t)}},{key:"CloneProductToCategory",value:function(e,t,a){var r=Object(n.a)({},this.settings);return r.headers["Content-Type"]="application/json",i.a.post("".concat(c.a,"/api2/category/CloneProductToCategory"),{CategoryId:t,BaseProductId:e,Position:a},r)}},{key:"UpdateCategoryProductsPositions",value:function(e,t){var a=Object(n.a)({},this.settings);return a.headers["Content-Type"]="application/json",i.a.put("".concat(c.a,"/api2/category/UpdateCategoryProductsPositions"),{CategoryId:e,ProductsIdAsc:t},a)}}]),e}()},155:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var n=a(1),r=a(3),o=a(2),l=a(10),i=a.n(l),c=a(29),s=function(){function e(){Object(r.a)(this,e),this.settings={};var t=Object(n.a)({},c.b);if(t.withCredentials=!1,window.localStorage.getItem("loginData")){var a=JSON.parse(window.localStorage.getItem("loginData"));t.headers.Authorization=a.Token,this.settings=t}}return Object(o.a)(e,[{key:"List",value:function(e){Object(n.a)({},this.settings);return i.a.get("".concat(c.a,"/api2/Attributes/GetAttributesGroup?key=").concat(e),this.settings)}},{key:"Add",value:function(e,t){return i.a.post("".concat(c.a,"/api2/Attributes/CreateNewAttributesGroup"),e,this.settings)}},{key:"Delete",value:function(e){return i.a.delete("".concat(c.a,"/api2/attributes/DeleteAttributeGroup?id=").concat(e),this.settings)}},{key:"Update",value:function(e,t){return i.a.put("".concat(c.a,"/api2/attributes/UpdateAttributeGroup"),e,this.settings)}},{key:"Positions",value:function(e){return i.a.put("".concat(c.a,"/api2/attributes/UpdateAttributesGroupPosition"),e,this.settings)}}]),e}()},169:function(e,t,a){"use strict";var n=a(121),r=a(3),o=a(2),l=a(7),i=a(8),c=a(0),s=a.n(c),u=a(243),m=a(184),d=a(286),p=a(158),f=a(110),E=function(e){Object(l.a)(a,e);var t=Object(i.a)(a);function a(e){var o;return Object(r.a)(this,a),(o=t.call(this,e)).convertAttributeGroupToItem=function(e){return e.map((function(e){return{id:e.Id,attributes:e.attributes.map((function(e){return e.Id}))}}))},o.attributeGroupsToSelect=function(e){return e.map((function(e){return{label:e.Name,value:e.Id,attributeGroup:e}}))},o.attributesToSelect=function(e){return e.map((function(e){return{label:e.Name,value:e.Id,attribute:e}}))},o.addGroup=function(){var e=Object(n.a)(o.state.selectedAttributeGroups);e.push({id:0,attributes:[]}),o.setState({selectedAttributeGroups:e},(function(){o.triggerOnChange()}))},o.onSelectAttributeGroup=function(e,t){var a=Object(n.a)(o.state.selectedAttributeGroups);a.findIndex((function(t){return t.id==e.value}))<0&&(a[t].id=e.value,a[t].attributes=[],o.setState({selectedAttributeGroups:a},(function(){o.triggerOnChange()})))},o.onSelectAttribute=function(e,t){var a=Object(n.a)(o.state.selectedAttributeGroups);a[t].attributes=e?e.map((function(e){return e.value})):[],o.setState({selectedAttributeGroups:a},(function(){o.triggerOnChange()}))},o.removeAttributeGroup=function(e){var t=Object(n.a)(o.state.selectedAttributeGroups);t.splice(e,1),o.setState({selectedAttributeGroups:t},(function(){o.triggerOnChange()}))},o.getAttributeGroup=function(e){var t=o.props.attributeGroups.find((function(t){return t.Id==e}));return t||{attributes:[],id:0}},o.getAttribute=function(e){return o.props.attributeGroups.map((function(e){return e.attributes})).reduce((function(e,t){return e.concat(t)}),[]).find((function(t){return t.Id==e}))},o.attributeGroupItemToSelect=function(e){var t=o.getAttributeGroup(e);return t?{value:t.Id,label:t.Name}:{}},o.attributeListToSelect=function(e){return e.map((function(e){var t=o.getAttribute(e);return{value:t.Id,label:t.Name,attribute:t}}))},o.state={selectedAttributeGroups:[]},o}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.setState({selectedAttributeGroups:this.props.selectedAttributeGroups})}},{key:"componentDidUpdate",value:function(e,t){d.a(e.selectedAttributeGroups,this.props.selectedAttributeGroups)||this.setState({selectedAttributeGroups:this.props.selectedAttributeGroups})}},{key:"triggerOnChange",value:function(){this.props.onChange(this.state.selectedAttributeGroups)}},{key:"render",value:function(){var e=this;return s.a.createElement(s.a.Fragment,null,s.a.createElement("div",null,this.state.selectedAttributeGroups.map((function(t,a){return s.a.createElement("div",{key:"attr-group"+a,className:"mb-2"},s.a.createElement(u.a,null,s.a.createElement(f.a,{xxs:"10"},s.a.createElement(p.a,{defaultValue:e.attributeGroupItemToSelect(t.id),value:e.attributeGroupItemToSelect(t.id),name:"attributeGroup",options:e.attributeGroupsToSelect(e.props.attributeGroups),onChange:function(t){return e.onSelectAttributeGroup(t,a)}}),e.getAttributeGroup(t.id).attributes.length>0?s.a.createElement(p.a,{defaultValue:e.attributeListToSelect(t.attributes),value:e.attributeListToSelect(t.attributes),isMulti:!0,name:"attributes",options:e.attributesToSelect(e.getAttributeGroup(t.id).attributes),onChange:function(t){return e.onSelectAttribute(t,a)}}):null),s.a.createElement(f.a,{xxs:"2",className:"p-0"},s.a.createElement(m.a,{color:"danger",outline:!0,onClick:function(){return e.removeAttributeGroup(a)}},s.a.createElement("i",{className:"simple-icon-trash"})))))}))),s.a.createElement(m.a,{color:"secondary",outline:!0,onClick:function(){return e.addGroup()}},s.a.createElement("i",{className:"simple-icon-plus"})," Add attributes"))}}]),a}(s.a.Component);t.a=E},170:function(e,t,a){"use strict";var n=a(121),r=a(1),o=a(3),l=a(2),i=a(7),c=a(8),s=a(0),u=a.n(s),m=a(243),d=a(508),p=a(509),f=a(350),E=a(184),h=a(110),g=a(286),b=function(e){Object(i.a)(a,e);var t=Object(c.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).onChange=function(e){var t=Object(r.a)({},n.state);e.target.value?t[e.target.name]=e.target.valueAsNumber:t[e.target.name]=null,n.setState(t)},n.isButtonDisabled=function(){return!n.state.price||null!=n.state.to&&void 0!=n.props.from&&n.state.to<n.props.from},n.onAddPriceRange=function(){n.props.onChange({from:n.props.from,to:0==n.state.to?null:n.state.to,value:n.state.price}),n.clear()},n.clear=function(){n.setState({})},n.state={price:void 0,to:void 0},n}return Object(l.a)(a,[{key:"render",value:function(){var e=this;return u.a.createElement(u.a.Fragment,null,!this.isInfinity&&u.a.createElement(m.a,null,u.a.createElement(h.a,{xxs:12},u.a.createElement(d.a,null,u.a.createElement("input",{value:this.state.price,name:"price",type:"number",placeholder:"Price",className:"form-control",onChange:function(t){return e.onChange(t)}}),u.a.createElement(p.a,{addonType:"append"},u.a.createElement(f.a,null,"\u20ac"))))),u.a.createElement(m.a,null,!this.isInfinity&&u.a.createElement(u.a.Fragment,null," ",u.a.createElement(h.a,{xxs:5,className:"pr-0"},u.a.createElement(d.a,null,u.a.createElement("input",{value:this.props.from,disabled:!0,type:"number",placeholder:"From",className:"form-control"}),u.a.createElement(p.a,{addonType:"prepend"},u.a.createElement(f.a,null,"Piece")))),u.a.createElement(h.a,{xxs:1,className:"d-flex justify-content-center align-items-center p-0"},"-"),u.a.createElement(h.a,{xxs:6,className:"pl-0"},u.a.createElement(d.a,null,u.a.createElement("input",{value:this.state.to,name:"to",type:"number",placeholder:"To",className:"form-control",onChange:function(t){return e.onChange(t)}}),u.a.createElement(p.a,{addonType:"prepend"},u.a.createElement(f.a,null,"Piece"))))),u.a.createElement(h.a,{xxs:6,className:"mt-1"},!this.isInfinity&&u.a.createElement(E.a,{disabled:this.isButtonDisabled(),color:"primary",outline:!0,onClick:function(){return e.onAddPriceRange()}},u.a.createElement("i",{className:"simple-icon-plus"})," Add range")),u.a.createElement(h.a,{xxs:6,className:"mt-1 text-right"},u.a.createElement(E.a,{color:"danger",outline:!0,onClick:function(){return e.props.onRemoveLast()}},u.a.createElement("i",{className:"simple-icon-trash"})," Remove"))))}},{key:"isInfinity",get:function(){return!this.props.from}}]),a}(u.a.Component),v=function(e){Object(i.a)(a,e);var t=Object(c.a)(a);function a(e){var r;return Object(o.a)(this,a),(r=t.call(this,e)).addPriceRange=function(e){var t=Object(n.a)(r.state.priceRange);t.push(e),r.setState({priceRange:t},(function(){r.props.onChange(r.state.priceRange)}))},r.lastFrom=function(){return r.state.priceRange.length?r.state.priceRange[r.state.priceRange.length-1].to?r.state.priceRange[r.state.priceRange.length-1].to+1:void 0:1},r.removeLast=function(){var e=Object(n.a)(r.state.priceRange);e.pop(),r.setState({priceRange:e},(function(){r.props.onChange(r.state.priceRange)}))},r.state={priceRange:[]},r}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.setState({priceRange:this.props.initialValues})}},{key:"componentDidUpdate",value:function(e,t){g.a(e.initialValues,this.props.initialValues)||this.setState({priceRange:this.props.initialValues})}},{key:"render",value:function(){var e=this;return u.a.createElement(u.a.Fragment,null,u.a.createElement(m.a,null,this.state.priceRange.map((function(e,t){return u.a.createElement(h.a,{key:"rang-"+t,xxs:12},u.a.createElement(m.a,null,u.a.createElement(h.a,{xxs:8},"From ",u.a.createElement("strong",null,e.from)," to ",u.a.createElement("strong",null,e.to?e.to:"infinity")," Pieces"),u.a.createElement(h.a,{xxs:4,className:"pl-0 text-right"},u.a.createElement("strong",null,e.value," \u20ac"))))}))),u.a.createElement(b,{from:this.lastFrom(),onChange:function(t){return e.addPriceRange(t)},onRemoveLast:function(){return e.removeLast()}}))}}]),a}(u.a.Component);t.a=v},198:function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"a",(function(){return r}));var n=function(e){return{Name:e.name,Id:e.id,Description:e.description,FilePath:e.imageUrl,Position:e.position,IsHidden:e.isHidden,ProductsPositions:e.ProductsPositions}},r=function(e){var t={Id:e.id,Name:e.name,Key:e.key,attributes:[],Position:e.position};return e.attributes.forEach((function(e){t.attributes.push(function(e,t){return{Id:e.id,Name:e.name,Description:e.description,PriceCorrectionPercent:e.priceCorrectionPercent,PriceCorrectionCurrent:e.priceCorrectionCurrent,Position:e.position,AttributeGroupId:t}}(e,t.Id))})),t}},200:function(e,t,a){},266:function(e,t,a){},268:function(e,t,a){"use strict";var n=a(130),r=a(0),o=a.n(r),l=a(112),i=a(244);t.a=function(e){var t=e.thumb,a=e.className,c=e.large,s=Object(r.useState)(!1),u=Object(n.a)(s,2),m=u[0],d=u[1];return o.a.createElement(o.a.Fragment,null,o.a.createElement(l.c,{to:"#",location:{},onClick:function(){return d(!0)}},o.a.createElement("img",{src:t,alt:"thumbnail",className:a})),m&&o.a.createElement(i.a,{mainSrc:c,onCloseRequest:function(){return d(!1)}}))}},269:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var n=function(e){return new Promise((function(t,a){var n=new FileReader;n.readAsDataURL(e),n.onload=function(){return t(n.result)},n.onerror=function(e){return a(e)}}))}},270:function(e,t,a){"use strict";a.d(t,"a",(function(){return f}));var n=a(3),r=a(2),o=a(7),l=a(8),i=a(0),c=a.n(i),s=a(535),u=a(500),m=a(501),d=a(502),p=a(184),f=function(e){Object(o.a)(a,e);var t=Object(l.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(r.a)(a,[{key:"render",value:function(){var e=this;return c.a.createElement(s.a,{isOpen:this.props.isOpen,toggle:function(){return e.props.toggle(!e.props.isOpen)}},c.a.createElement(u.a,null,this.props.header),c.a.createElement(m.a,null,this.props.body),c.a.createElement(d.a,{style:{display:"flex",justifyContent:"space-between"}},c.a.createElement(p.a,{color:"secondary",onClick:function(){return e.props.toggle(!1)}},"Cancel"),c.a.createElement(p.a,{color:"danger",onClick:function(){e.props.onDelete(),e.props.toggle(!1)}},"YES")," "))}}]),a}(c.a.Component)},272:function(e,t,a){},353:function(e,t,a){"use strict";a.r(t),a.d(t,"DefaultPhotoOrder",(function(){return p}));var n=a(3),r=a(2),o=a(7),l=a(8),i=a(0),c=a.n(i),s=a(163),u=a(243),m=a(110),d=a(124),p=function(e){Object(o.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(n.a)(this,a);for(var r=arguments.length,o=new Array(r),l=0;l<r;l++)o[l]=arguments[l];return(e=t.call.apply(t,[this].concat(o))).state={},e}return Object(r.a)(a,[{key:"render",value:function(){return c.a.createElement(c.a.Fragment,null,c.a.createElement(u.a,null,c.a.createElement(m.a,{xxs:"12"},c.a.createElement(d.a,{heading:"Settings",match:this.props.match}),c.a.createElement(m.b,{className:"mb-5"}))),c.a.createElement(u.a,null,c.a.createElement(m.a,{lg:"12",xl:"12"},"settings")))}}]),a}(c.a.Component);t.default=Object(s.c)(p)},354:function(e,t,a){},368:function(e,t,a){"use strict";a.r(t),a.d(t,"OverviewView",(function(){return g}));var n=a(1),r=a(3),o=a(2),l=a(7),i=a(8),c=a(0),s=a.n(c),u=a(243),m=a(260),d=a(507),p=a(124),f=a(110),E=(a(369),a(128)),h=a(113),g=function(e){Object(l.a)(a,e);var t=Object(i.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).homeClient=new E.a,n.state={data:{title:"You can use photo order for",icon:"iconsminds-clock",value:0}},n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.homeClient.PhotographerDetails().then((function(t){t.data.Error?h.b.error(t.data.Error,"Error",3e3,null,null,""):e.setState(Object(n.a)(Object(n.a)({},e.state.data),{},{data:{value:t.data.Data.AddEditPhotographerPopUpViewModel.EventSubscription}}))}))}},{key:"render",value:function(){return s.a.createElement(s.a.Fragment,null,s.a.createElement(u.a,null,s.a.createElement(f.a,{xxs:"12"},s.a.createElement(p.a,{heading:"Overview",match:this.props.match}),s.a.createElement(f.b,{className:"mb-5"}))),s.a.createElement(u.a,null,s.a.createElement(f.a,{xxs:"12",className:"mb-3"},s.a.createElement(m.a,{className:"mb-4"},s.a.createElement(d.a,null,s.a.createElement(u.a,null,s.a.createElement(f.a,{sm:"6"},s.a.createElement("img",{className:"img-fluid border-radius",src:"/assets/img/photoorder.jpg"})),s.a.createElement(f.a,{sm:"6",className:"d-flex",style:{flexDirection:"column"}},s.a.createElement("h3",{style:{fontWeight:"bold"}},"Photo Order - Best mobile photo kiosk"),s.a.createElement("p",null,"If you have a printer and want to increase the number of printed photos, the Photo Order system is the perfect solution for you.",s.a.createElement("br",null),"It allows your customers to send photos directly from their phone, informs about the price of the order and at the same time informs about special offers.",s.a.createElement("br",null),"It has never been so easy and fast to transfer photos from your phone.",s.a.createElement("br",null),"In addition, we will provide you with a special link that will expand your current website with a fully functional e-shop.",s.a.createElement("br",null),"Now your customers can send, pay, receive photos and more right from home.",s.a.createElement("br",null),s.a.createElement("br",null),s.a.createElement("strong",null,"Be online 24/7 !!!"),s.a.createElement("br",null),s.a.createElement("br",null),"Interested? Contact us !!!"),s.a.createElement(u.a,{style:{flex:"1 1 auto",display:"flex",justifyContent:"center",alignItems:"center"}},s.a.createElement(f.a,{xss:"12"},s.a.createElement("div",{className:"icon-cards-row text-center"},s.a.createElement("div",{key:"icon_card_0"},s.a.createElement("i",{className:"iconsminds-clock"}),s.a.createElement("p",{className:"card-text font-weight-semibold mb-0"},"You can use photo order for"),s.a.createElement("p",{className:"lead text-center"},this.state.data.value," days"))))))))))))}}]),a}(s.a.Component);t.default=g},369:function(e,t,a){},370:function(e,t,a){"use strict";a.r(t),a.d(t,"UpdatesView",(function(){return v}));var n=a(1),r=a(3),o=a(2),l=a(7),i=a(8),c=a(0),s=a.n(c),u=a(243),m=a(260),d=a(507),p=a(184),f=a(124),E=a(110),h=(a(371),a(128)),g=a(113),b=a(268),v=function(e){Object(l.a)(a,e);var t=Object(i.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).homeClient=new h.a,n.state={data:{title:"You can use photo order for",icon:"iconsminds-clock",value:0}},n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.homeClient.PhotographerDetails().then((function(t){t.data.Error?g.b.error(t.data.Error,"Error",3e3,null,null,""):e.setState(Object(n.a)(Object(n.a)({},e.state.data),{},{data:{value:t.data.Data.AddEditPhotographerPopUpViewModel.EventSubscription}}))}))}},{key:"render",value:function(){return s.a.createElement(s.a.Fragment,null,s.a.createElement(u.a,null,s.a.createElement(E.a,{xxs:"12"},s.a.createElement(f.a,{heading:"Plug-ins",match:this.props.match}),s.a.createElement(E.b,{className:"mb-5"}))),s.a.createElement(u.a,null,s.a.createElement(E.a,{sm:"4",className:"mb-3 pr-4 pl-4"},s.a.createElement(m.a,{className:"mb-4"},s.a.createElement(b.a,{thumb:"/assets/img/smsgate.jpg",large:"/assets/img/smsgate.jpg",className:"card-img-top"}),s.a.createElement(d.a,null,s.a.createElement("p",{className:"font-weight-bold"},"Promotion Cloud  beta version"),s.a.createElement("p",{className:"mb-3"},"A good application is not enough? You're right, add this plugin and you will be able to send promotions to your customers via SMS, e-mail or push notifications.",s.a.createElement("br",null),s.a.createElement("br",null),"Be active, don't wait, increase your sales today !!",s.a.createElement("br",null),s.a.createElement("br",null)),s.a.createElement("p",null,s.a.createElement("p",{className:"text-muted text-small mb-2"},"Price"),s.a.createElement("p",{className:"mb-3"},"Free beta version")),s.a.createElement("p",{className:"text-center"},s.a.createElement(p.a,{color:"primary"},"Buy"))))),s.a.createElement(E.a,{sm:"4",className:"mb-3 pr-4 pl-4"},s.a.createElement(m.a,{className:"mb-4"},s.a.createElement(b.a,{thumb:"/assets/img/payment.jpg",large:"/assets/img/payment.jpg",className:"card-img-top"}),s.a.createElement(d.a,null,s.a.createElement("p",{className:"font-weight-bold"},"Payment gate  beta version                                                 "),s.a.createElement("p",{className:"mb-3"},"Do you want to attract new customers? Do you want to increase the reach of your store but you are worried about how to withdraw money?",s.a.createElement("br",null),s.a.createElement("br",null),"Just install this plugin and customers will be able to deposit money into your bank account, using a payment card, or connecting to a payment gate. Don't worry, we won't charge any additional or hidden fees."),s.a.createElement("p",null,s.a.createElement("p",{className:"text-muted text-small mb-2"},"Price"),s.a.createElement("p",{className:"mb-3"},"Free beta version")),s.a.createElement("p",{className:"text-center"},s.a.createElement(p.a,{color:"primary"},"Buy"))))),s.a.createElement(E.a,{sm:"4",className:"mb-3 pr-4 pl-4"},s.a.createElement(m.a,{className:"mb-4"},s.a.createElement(b.a,{thumb:"/assets/img/screen.jpg",large:"/assets/img/screen.jpg",className:"card-img-top"}),s.a.createElement(d.a,null,s.a.createElement("p",{className:"font-weight-bold"},"My e-shop  beta version                                                 "),s.a.createElement("p",{className:"mb-3"},"If you have a website then you absolutely need to add this plugin. You just copy the link, add it to your website, and then get orders from your customers.",s.a.createElement("br",null),"Your website is a fully functional e-shop",s.a.createElement("br",null),"Your customers do not need to install anything, they just need to visit your website and send orders !!!"),s.a.createElement("p",null,s.a.createElement("p",{className:"text-muted text-small mb-2"},"Price"),s.a.createElement("p",{className:"mb-3"},"Free beta version")),s.a.createElement("p",{className:"text-center"},s.a.createElement(p.a,{color:"primary"},"Buy")))))))}}]),a}(s.a.Component);t.default=v},371:function(e,t,a){},382:function(e,t,a){},383:function(e,t,a){},384:function(e,t,a){"use strict";a.r(t),a.d(t,"DefaultSettings",(function(){return S}));var n=a(3),r=a(2),o=a(7),l=a(8),i=a(0),c=a.n(i),s=a(163),u=a(243),m=a(260),d=a(507),p=a(261),f=a(490),E=a(491),h=a(184),g=a(110),b=a(124),v=a(128),y=a(116),N=a(49),C=a(137),x=a(113),P=a(385),I=a.n(P),S=(a(386),function(e){Object(o.a)(a,e);var t=Object(l.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).state={form:null},r.homeClient=new v.a,r.photoClient=new C.a,r.currencies=["EUR","AUD","BRL","CAD","CZK","DKK","HKD","HUF","INR","ILS","JPY","MYR","MXN","TWD","NZD","NOK","PHP","PLN","GBP","RUB","SGD","SEK","CHF","THB","USD"],r.initialValues={Nickname:"",Login:"",Street:"",PostalCode:"",Phone:"",CompanyName:"",IsPrivate:!1,Discrict:"",City:"",WebSiteUrl:"",IsPremiumChecked:!1,VideoGallery:"",PhotoGalleryUrlOpenLogin:"",SelectedPremiumType:N.number,MAC3:"",MAC2:"",MAC:"",PayPalAccountID:"",VivwaWalletId:"",IBAN:"",ShippingPrice:0,Currency:null,MinimalOrderValue:null},r.formData=function(){return null!=r.state.form?r.state.form:r.initialValues},r.onSubmit=function(e,t){var a=t.setSubmitting;x.b.info("Saving data...","Saving data",3e3,null,null,""),r.photoClient.EditPhotographer(e).then((function(e){e.data.Data?x.b.success("All data saved to database","Data saved",3e3,null,null,""):x.b.error(e.data.Error,"Saving error",3e3,null,null,""),a(!1)}))},r.homeClient.PhotographerDetails().then((function(e){e.data.Error?x.b.error(e.data.Error,"Error",3e3,null,null,""):r.setState({form:e.data.Data.AddEditPhotographerPopUpViewModel})})),r}return Object(r.a)(a,[{key:"render",value:function(){var e=this;return c.a.createElement(c.a.Fragment,null,c.a.createElement(u.a,null,c.a.createElement(g.a,{xxs:"12"},c.a.createElement(b.a,{heading:"Settings",match:this.props.match}),c.a.createElement(g.b,{className:"mb-5"}))),c.a.createElement(y.c,{enableReinitialize:!0,initialValues:this.formData(),onSubmit:this.onSubmit},(function(t){t.handleSubmit;var a=t.setFieldValue,n=(t.setFieldTouched,t.handleChange),r=t.handleBlur,o=t.values;t.errors,t.touched,t.isSubmitting;return c.a.createElement(c.a.Fragment,null,c.a.createElement(y.b,null,c.a.createElement(u.a,null,c.a.createElement(g.a,{lg:"12",xl:"12"},c.a.createElement(m.a,{className:"mb-3"},c.a.createElement(d.a,null,c.a.createElement(p.a,null,"Main informations"),c.a.createElement(f.a,null,c.a.createElement(E.a,{for:"Nickname"},"Display name"),c.a.createElement(y.a,{className:"form-control",name:"Nickname",type:"text",id:"Nickname",placeholder:""})),c.a.createElement(f.a,null,c.a.createElement(E.a,{for:"Login"},"E-mail"),c.a.createElement(y.a,{className:"form-control",name:"Login",type:"email",id:"Login",placeholder:""})),c.a.createElement(f.a,null,c.a.createElement(E.a,{for:"Phone"},"Phone number"),c.a.createElement(y.a,{name:"Phone"},(function(e){var t=e.field,n=e.form;n.touched,n.errors,e.meta;return c.a.createElement(I.a,{enableSearch:!0,inputClass:"w-100",placeholder:"Phone",country:"gr",value:t.value,onChange:function(e){console.log(e,t),a("Phone","+".concat(e))}})}))),c.a.createElement(f.a,null,c.a.createElement(E.a,{for:"WebSiteUrl"},"Website"),c.a.createElement(y.a,{className:"form-control",name:"WebSiteUrl",type:"text",id:"WebSiteUrl",placeholder:""})))),c.a.createElement(m.a,{className:"mb-3"},c.a.createElement(d.a,null,c.a.createElement(p.a,null,"Company informations"),c.a.createElement(f.a,null,c.a.createElement(E.a,{for:"CompanyName"},"Company name"),c.a.createElement(y.a,{className:"form-control",name:"CompanyName",type:"text",id:"CompanyName",placeholder:""})),c.a.createElement(f.a,null,c.a.createElement(E.a,{for:"Street"},"Address"),c.a.createElement(y.a,{className:"form-control",name:"Street",type:"text",id:"Street",placeholder:""})),c.a.createElement(u.a,null,c.a.createElement(g.a,{sm:6},c.a.createElement(f.a,null,c.a.createElement(E.a,{for:"PostalCode"},"VAT Number"),c.a.createElement(y.a,{className:"form-control",name:"PostalCode",type:"text",id:"PostalCode",placeholder:""}))),c.a.createElement(g.a,{sm:6},c.a.createElement(f.a,null,c.a.createElement(E.a,{for:"Discrict"},"Tax Office"),c.a.createElement(y.a,{className:"form-control",name:"Discrict",type:"text",id:"Discrict",placeholder:""})))),c.a.createElement(f.a,null,c.a.createElement(E.a,{for:"City"},"Profession"),c.a.createElement(y.a,{className:"form-control",name:"City",type:"text",id:"City",placeholder:""})))),c.a.createElement(m.a,{className:"mb-3"},c.a.createElement(d.a,null,c.a.createElement(p.a,null,"Accounting"),c.a.createElement(f.a,null,c.a.createElement(E.a,{for:"iban"},"IBAN"),c.a.createElement(y.a,{className:"form-control",name:"IBAN",type:"text",id:"IBAN",placeholder:""})),c.a.createElement(u.a,null,c.a.createElement(g.a,{sm:6},c.a.createElement(f.a,null,c.a.createElement(E.a,{for:"PayPalAccountID"},"PayPal Account ID"),c.a.createElement(y.a,{className:"form-control",name:"PayPalAccountID",type:"text",id:"PayPalAccountID",placeholder:""}))),c.a.createElement(g.a,{sm:6},c.a.createElement(f.a,null,c.a.createElement(E.a,{for:"VivaWalletId"},"VivaWallet ID"),c.a.createElement(y.a,{className:"form-control",name:"VivaWalletId",type:"text",id:"VivaWalletId",placeholder:""})))),c.a.createElement(u.a,null,c.a.createElement(g.a,{sm:6},c.a.createElement(f.a,null,c.a.createElement(E.a,{for:"ShippingPrice"},"Shipping price"),c.a.createElement(y.a,{className:"form-control",name:"ShippingPrice",type:"number",id:"ShippingPrice",placeholder:""}))),c.a.createElement(g.a,{sm:6},c.a.createElement(f.a,null,c.a.createElement(E.a,{for:"Currency"},"Currency"),c.a.createElement("select",{id:"Currency",name:"Currency",className:"form-control",value:o.Currency,onChange:n,onBlur:r},c.a.createElement("option",{disabled:!0,hidden:!0,selected:!0}),e.currencies.map((function(e,t){return c.a.createElement("option",{value:t},e)}))))),c.a.createElement(g.a,{sm:6},c.a.createElement(f.a,null,c.a.createElement(E.a,{for:"MinimalOrderValue"},"Minimal Order Value"),c.a.createElement(y.a,{className:"form-control",name:"MinimalOrderValue",type:"number",id:"MinimalOrderValue",placeholder:""})))))),c.a.createElement(m.a,{className:"mb-3"},c.a.createElement(d.a,null,c.a.createElement(p.a,null,"Devices"),c.a.createElement(f.a,null,c.a.createElement(E.a,{for:"MAC3"},"ID number for photo order app"),c.a.createElement(y.a,{className:"form-control",name:"MAC3",type:"text",id:"MAC3",placeholder:""})),c.a.createElement(u.a,null,c.a.createElement(g.a,{sm:6},c.a.createElement(f.a,null,c.a.createElement(E.a,{for:"MAC"},"ID number for photo hosting service"),c.a.createElement(y.a,{className:"form-control",name:"MAC",type:"text",id:"MAC",placeholder:""}))),c.a.createElement(g.a,{sm:6},c.a.createElement(f.a,null,c.a.createElement(E.a,{for:"MAC2"},"ID number for photo hosting service"),c.a.createElement(y.a,{className:"form-control",name:"MAC2",type:"text",id:"MAC2",placeholder:""})))))),c.a.createElement(m.a,null,c.a.createElement(d.a,null,c.a.createElement(h.a,{color:"primary",type:"submit"},"Save")))))))})))}}]),a}(c.a.Component));t.default=Object(s.c)(S)},481:function(e,t,a){"use strict";a.r(t),a.d(t,"Products",(function(){return ie}));var n=a(130),r=a(121),o=a(22),l=a.n(o),i=a(31),c=a(3),s=a(2),u=a(7),m=a(8),d=a(0),p=a.n(d),f=a(243),E=a(184),h=a(124),g=a(110),b=(a(354),a(128)),v=a(137),y=a(154),N=a(155),C=a(479),x=a(535),P=a(500),I=a(501),S=a(490),w=a(491),O=a(510),k=a(508),D=a(541),j=a(509),F=a(350),A=a(502),T=a(116),M=a(113),G=a(158),L=a(198),z=a(169),V=a(170),R=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).photoClient=new v.a,n.categoriesClient=new y.a,n.attributesClient=new N.a,n.initialValues={Name:"",Size:0,Description:"",Price:null,SizeSelect:0,File:null,attributeGroups:[],categories:[],QuantityRangeMin:"",QuantityRangeMax:"",PriceRange:[]},n.onSubmit=function(){var e=Object(i.a)(l.a.mark((function e(t,a){var r,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(r=new FormData).append("Description",t.Description),r.append("Name",t.Name),r.append("Price","0"),r.append("Size",t.Size),r.append("FileAsBase64",t.File),r.append("QuantityRangeMin",t.QuantityRangeMin),r.append("QuantityRangeMax",t.QuantityRangeMax),t.PriceRange.forEach((function(e,t){r.append("ProductPrices[".concat(t,"].PriceLevelFrom"),e.from),e.to&&r.append("ProductPrices[".concat(t,"].PriceLevelTo"),e.to),r.append("ProductPrices[".concat(t,"].Price"),e.value),r.append("ProductPrices[".concat(t,"].IsDeleted"),"false")})),t.categories.forEach((function(e){r.append("CategoriesIds",e.toString())})),o=t.attributeGroups,Array.prototype.concat.apply([],o.map((function(e){return e.attributes}))).forEach((function(e){isNaN(e)||r.append("AttributesIds",e.toString())})),M.b.info("Saving data...","Saving data",3e3,null,null,""),n.photoClient.AddProduct(r).then((function(e){e.data.Error?M.b.error("Saving error",e.data.Error,3e3,null,null,""):(M.b.success("Data saved to database.","Saving data success",3e3,null,null,""),n.props.onCreate(),n.props.toggleModal()),a.setSubmitting(!1)}));case 14:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),n.state={customSize:!1,categories:[],attributeGroups:[]},n.categoriesClient.List("ProductCategories").then((function(e){var t=e.data.Data.map((function(e){return Object(L.b)(e)}));n.setState({categories:t})})),n.attributesClient.List("ProductAttributes").then((function(e){var t=e.data.Data.map((function(e){return Object(L.a)(e)}));n.setState({attributeGroups:t})})),n}return Object(s.a)(a,[{key:"render",value:function(){var e=this;return p.a.createElement(T.c,{initialValues:this.initialValues,onSubmit:this.onSubmit,enableReinitialize:!0},(function(t){t.handleSubmit;var a=t.setFieldValue,n=(t.setFieldTouched,t.handleChange),r=t.handleBlur,o=t.values,l=(t.errors,t.touched,t.isSubmitting,t.submitForm);return p.a.createElement(T.b,null,p.a.createElement(x.a,{isOpen:e.props.modalOpen,toggle:e.props.toggleModal,wrapClassName:"modal-right",backdrop:"static"},p.a.createElement(P.a,{toggle:e.props.toggleModal},"Add product"),p.a.createElement(I.a,null,p.a.createElement(S.a,null,p.a.createElement(w.a,{for:"Name"},"Name"),p.a.createElement(T.a,{className:"form-control",name:"Name",type:"text",id:"Name",placeholder:"Name",maxLength:20}),p.a.createElement(O.a,{color:"muted"},"Maximum 20 letters")),p.a.createElement(S.a,null,p.a.createElement(w.a,{for:"Description"},"Description"),p.a.createElement(T.a,{className:"form-control",name:"Description",type:"text",id:"Description",placeholder:"Description",maxLength:100}),p.a.createElement(O.a,{color:"muted"},"Maximum 100 letters")),p.a.createElement(S.a,null,p.a.createElement(w.a,{for:"File"},"Image"),p.a.createElement(k.a,null,p.a.createElement(D.a,{type:"file",id:"File",name:"File",onChange:function(e){null!=e&&null!=e.currentTarget&&e.currentTarget.files&&a("File",e.currentTarget.files[0])}})),p.a.createElement(O.a,{color:"muted"},"Maximum 800x800 pixels")),p.a.createElement(S.a,null,p.a.createElement(w.a,{for:"Price"},"Price"),p.a.createElement("div",null,p.a.createElement(V.a,{initialValues:[],onChange:function(e){a("PriceRange",e)}}))),p.a.createElement(S.a,null,p.a.createElement(w.a,{for:"Size"},"Size"),p.a.createElement("select",{id:"SizeSelect",name:"SizeSelect",className:"form-control",value:o.SizeSelect,onChange:n,onBlur:r},p.a.createElement("option",{disabled:!0,hidden:!0,defaultChecked:!0}),p.a.createElement("option",{value:0},"Original size"),p.a.createElement("option",{value:1},"Custom size")),e.state.customSize&&p.a.createElement(O.a,{color:"muted"},"For the longer size of photo"),1==o.SizeSelect&&p.a.createElement(k.a,{className:"mt-2"},p.a.createElement(T.a,{className:"form-control",name:"Size",type:"number",id:"Size",placeholder:"Size"}),p.a.createElement(j.a,{addonType:"append"},p.a.createElement(F.a,null,"px")))),p.a.createElement(f.a,null,p.a.createElement(S.a,{className:"col-6 mb-0"},p.a.createElement(w.a,null,"Min. quantity"),p.a.createElement(T.a,{className:"form-control",name:"QuantityRangeMin",type:"number",id:"QuantityRangeMin",placeholder:""})),p.a.createElement(S.a,{className:"col-6 mb-0"},p.a.createElement(w.a,null,"Max quantity"),p.a.createElement(T.a,{className:"form-control",name:"QuantityRangeMax",type:"number",id:"QuantityRangeMax",placeholder:""})),p.a.createElement(S.a,{className:"col-12"},p.a.createElement(O.a,{color:"muted"},"Leave empty if not set"))),p.a.createElement(S.a,null,p.a.createElement(w.a,{for:"Categories"},"Categories"),p.a.createElement(G.a,{isMulti:!0,name:"colors",options:e.categories,classNamePrefix:"select",onChange:function(e){a("categories",e?e.map((function(e){return e.value})):[])}})),p.a.createElement(S.a,null,p.a.createElement(w.a,{for:"Attributes"},"Attributes"),p.a.createElement("div",null,p.a.createElement(z.a,{onChange:function(e){return a("attributeGroups",e)},attributeGroups:e.state.attributeGroups,selectedAttributeGroups:[]})))),p.a.createElement(A.a,null,p.a.createElement(E.a,{color:"secondary",outline:!0,onClick:e.props.toggleModal},"Cancel"),p.a.createElement(E.a,{color:"primary",type:"submit",onClick:l},"Save"))))}))}},{key:"categories",get:function(){return this.state.categories.map((function(e){return{value:e.Id,label:e.Name}}))}},{key:"attributeGroups",get:function(){var e=[];return this.state.attributeGroups.forEach((function(t){e.push({label:t.Name,options:t.attributes.map((function(e){return{label:e.Name,value:e.Id}}))})})),e}}]),a}(p.a.Component),U=a(134),B=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){var e=this;return p.a.createElement(x.a,{isOpen:this.props.isOpen,toggle:function(){return e.props.toggle(!e.props.isOpen)}},p.a.createElement(P.a,null,this.props.title),p.a.createElement(I.a,null,this.props.description),p.a.createElement(A.a,{style:{display:"flex",justifyContent:"space-between"}},p.a.createElement(E.a,{color:"secondary",onClick:function(){return e.props.toggle(!1)}},"Cancel"),p.a.createElement(E.a,{color:"danger",onClick:function(){e.props.onDelete(),e.props.toggle(!1)}},"YES")," "))}}]),a}(p.a.Component),H=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).photoClient=new v.a,n.categoriesClient=new y.a,n.attributesClient=new N.a,n.onSubmit=function(){var e=Object(i.a)(l.a.mark((function e(t,a){var r,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(r=new FormData).append("Id",n.props.product.Id.toString()),r.append("Description",t.Description),r.append("Name",t.Name),r.append("Price","0"),r.append("Size",t.Size),r.append("FileAsBase64",t.File),null!=t.QuantityRangeMin&&r.append("QuantityRangeMin",t.QuantityRangeMin),null!=t.QuantityRangeMax&&r.append("QuantityRangeMax",t.QuantityRangeMax),n.IsMainProduct?(t.PriceRange.forEach((function(e,t){r.append("ProductPrices[".concat(t,"].PriceLevelFrom"),e.from),e.to&&r.append("ProductPrices[".concat(t,"].PriceLevelTo"),e.to),r.append("ProductPrices[".concat(t,"].Price"),e.value),r.append("ProductPrices[".concat(t,"].IsDeleted"),"false")})),t.categories.forEach((function(e){r.append("CategoriesIds",e.toString())})),o=t.attributeGroups,Array.prototype.concat.apply([],o.map((function(e){return e.attributes}))).forEach((function(e){isNaN(e)||r.append("AttributesIds",e.toString())})),M.b.info("Saving data...","Saving data",3e3,null,null,""),n.photoClient.EditProduct(r).then((function(e){e.data.Error?M.b.error("Saving error",e.data.Error,3e3,null,null,""):(M.b.success("Data saved to database.","Saving data success",3e3,null,null,""),n.props.onEdit(),n.props.toggleModal()),a.setSubmitting(!1)}))):(M.b.info("Saving data...","Saving data",3e3,null,null,""),n.photoClient.EditAutogeneratedProduct(r).then((function(e){e.data.Error?M.b.error("Saving error",e.data.Error,3e3,null,null,""):(M.b.success("Data saved to database.","Saving data success",3e3,null,null,""),n.props.onEdit(),n.props.toggleModal()),a.setSubmitting(!1)})));case 10:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),n.selectedCategories=function(e){return n.state.categories.filter((function(t){return e.indexOf(t.Id)>-1})).map((function(e){return{value:e.Id,label:e.Name}}))},n.getAttributeGroupsFromAttributeList=function(e){var t={};return e.forEach((function(e){var a=n.getAttributeGroup(e);a&&(t[a]||(t[a]=[]),t[a].push(e))})),Object.keys(t).map((function(e){return{id:Number(e),attributes:t[e]}}))},n.initialPriceRanges=function(){return n.props.product.ProductPrices.map((function(e){return{from:e.PriceLevelFrom,to:e.PriceLevelTo,value:e.Price}}))},n.state={customSize:!1,categories:[],attributeGroups:[]},n.categoriesClient.List("ProductCategories").then((function(e){var t=e.data.Data.map((function(e){return Object(L.b)(e)}));n.setState({categories:t})})),n.attributesClient.List("ProductAttributes").then((function(e){var t=e.data.Data.map((function(e){return Object(L.a)(e)}));n.setState({attributeGroups:t})})),n}return Object(s.a)(a,[{key:"initialValues",get:function(){return{Name:this.props.product.Name,Size:this.props.product.Size,Description:this.props.product.Description,Price:this.props.product.Price,SizeSelect:this.props.product.Size>0?1:0,File:null,attributeGroups:this.getAttributeGroupsFromAttributeList(this.props.product.AttributesIds),categories:this.props.product.CategoriesIds,QuantityRangeMin:this.props.product.QuantityRangeMin,QuantityRangeMax:this.props.product.QuantityRangeMax,PriceRange:[]}}},{key:"IsMainProduct",get:function(){return!this.props.product.MainProductId}}]),Object(s.a)(a,[{key:"getAttributeGroup",value:function(e){var t=this.state.attributeGroups.find((function(t){return t.attributes.findIndex((function(t){return t.Id==e}))>-1}));return t?t.Id:0}},{key:"render",value:function(){var e=this;return p.a.createElement(T.c,{initialValues:this.initialValues,onSubmit:this.onSubmit,enableReinitialize:!0},(function(t){t.handleSubmit;var a=t.setFieldValue,n=(t.setFieldTouched,t.handleChange),r=t.handleBlur,o=t.values,l=(t.errors,t.touched,t.isSubmitting,t.submitForm);return p.a.createElement(T.b,null,p.a.createElement(x.a,{isOpen:e.props.modalOpen,toggle:e.props.toggleModal,wrapClassName:"modal-right",backdrop:"static"},p.a.createElement(P.a,{toggle:e.props.toggleModal},"Edit product"),p.a.createElement(I.a,null,p.a.createElement(S.a,null,p.a.createElement(w.a,{for:"Name"},"Name"),p.a.createElement(T.a,{className:"form-control",name:"Name",type:"text",id:"Name",placeholder:"Name",maxLength:20}),p.a.createElement(O.a,{color:"muted"},"Maximum 20 letters")),p.a.createElement(S.a,null,p.a.createElement(w.a,{for:"Description"},"Description"),p.a.createElement(T.a,{className:"form-control",name:"Description",type:"text",id:"Description",placeholder:"Description",maxLength:100}),p.a.createElement(O.a,{color:"muted"},"Maximum 100 letters")),p.a.createElement(S.a,null,p.a.createElement(w.a,{for:"File"},"Image"),p.a.createElement(k.a,null,p.a.createElement(D.a,{type:"file",id:"File",name:"File",onChange:function(e){null!=e&&null!=e.currentTarget&&e.currentTarget.files&&a("File",e.currentTarget.files[0])}})),p.a.createElement(O.a,{color:"muted"},"Maximum 800x800 pixels")),e.IsMainProduct&&p.a.createElement(S.a,null,p.a.createElement(w.a,{for:"Price"},"Price"),p.a.createElement("div",null,p.a.createElement(V.a,{initialValues:e.initialPriceRanges(),onChange:function(e){a("PriceRange",e)}}))),p.a.createElement(S.a,null,p.a.createElement(w.a,{for:"Size"},"Size"),p.a.createElement("select",{id:"SizeSelect",name:"SizeSelect",className:"form-control",value:o.SizeSelect,onChange:n,onBlur:r},p.a.createElement("option",{disabled:!0,hidden:!0,defaultChecked:!0}),p.a.createElement("option",{value:0},"Original size"),p.a.createElement("option",{value:1},"Custom size")),e.state.customSize&&p.a.createElement(O.a,{color:"muted"},"For the longer size of photo"),1==o.SizeSelect&&p.a.createElement(k.a,{className:"mt-2"},p.a.createElement(T.a,{className:"form-control",name:"Size",type:"number",id:"Size",placeholder:"Size"}),p.a.createElement(j.a,{addonType:"append"},p.a.createElement(F.a,null,"px")))),p.a.createElement(f.a,null,p.a.createElement(S.a,{className:"col-6 mb-0"},p.a.createElement(w.a,null,"Min. quantity"),p.a.createElement(T.a,{className:"form-control",name:"QuantityRangeMin",type:"number",id:"QuantityRangeMin",placeholder:""})),p.a.createElement(S.a,{className:"col-6 mb-0"},p.a.createElement(w.a,null,"Max quantity"),p.a.createElement(T.a,{className:"form-control",name:"QuantityRangeMax",type:"number",id:"QuantityRangeMax",placeholder:""})),p.a.createElement(S.a,{className:"col-12"},p.a.createElement(O.a,{color:"muted"},"Leave empty if not set"))),e.IsMainProduct&&p.a.createElement(S.a,null,p.a.createElement(w.a,{for:"Categories"},"Categories"),p.a.createElement(G.a,{value:e.selectedCategories(o.categories),isMulti:!0,name:"colors",options:e.categories,classNamePrefix:"select",onChange:function(e){a("categories",e?e.map((function(e){return e.value})):[])}})),e.IsMainProduct&&p.a.createElement(S.a,null,p.a.createElement(w.a,{for:"Attributes"},"Attributes"),p.a.createElement("div",null,p.a.createElement(z.a,{onChange:function(e){return a("attributeGroups",e)},attributeGroups:e.state.attributeGroups,selectedAttributeGroups:e.getAttributeGroupsFromAttributeList(e.props.product.AttributesIds)})))),p.a.createElement(A.a,null,p.a.createElement(E.a,{color:"secondary",outline:!0,onClick:e.props.toggleModal},"Cancel"),p.a.createElement(E.a,{color:"primary",type:"submit",onClick:l},"Save"))))}))}},{key:"categories",get:function(){return this.state.categories.map((function(e){return{value:e.Id,label:e.Name}}))}},{key:"attributeGroups",get:function(){var e=[];return this.state.attributeGroups.forEach((function(t){e.push({label:t.Name,options:t.attributes.map((function(e){return{label:e.Name,value:e.Id}}))})})),e}}]),a}(p.a.Component),_=a(260),K=a(504),Y=a(516),Q=a(109),W=a.n(Q),q=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={isImage:!0,isCollapsed:!1},e.onImageError=function(){e.setState({isImage:!1})},e}return Object(s.a)(a,[{key:"render",value:function(){var e=this;return p.a.createElement(g.a,{xxs:"12",className:"productList"},p.a.createElement(_.a,{className:"d-flex flex-row productList__card"},p.a.createElement(K.a,{className:"d-flex"},p.a.createElement("img",{alt:this.props.category.Name,src:this.state.isImage?this.props.category.FilePath||"":"https://via.placeholder.com/400?text=No%20image",className:"list-thumbnail responsive border-0 card-img-left",onError:function(){return e.onImageError()}})),p.a.createElement("div",{className:"pl-2 d-flex flex-grow-1 min-width-zero"},p.a.createElement("div",{className:"card-body align-self-center d-flex flex-column flex-lg-row justify-content-between min-width-zero align-items-lg-center"},p.a.createElement(K.a,{to:"?p=1",className:"w-30",onClick:function(){return e.props.onCollapse(e.props.category.Id)}},p.a.createElement("div",{style:{cursor:"pointer"},className:"list-item-heading mb-1 truncate d-flex align-items-center"},this.props.category.Name,p.a.createElement("div",{className:"d-inline-block ml-3",style:{width:"20px"}},p.a.createElement("div",{className:W()("glyph-icon",{"simple-icon-arrow-left":this.props.isCollapsed,"simple-icon-arrow-down":!this.props.isCollapsed})})))),p.a.createElement(K.a,{to:"?p=1",className:"w-15"},p.a.createElement("p",{className:"list-item-heading mb-1 truncate"},this.props.category.Name)),p.a.createElement("p",{className:"mb-1 text-muted text-small w-50"},this.props.category.Description),p.a.createElement("p",{className:"mb-1  w-10 text-right"},p.a.createElement(Y.a,{color:this.props.category.IsHidden?"danger":"light",pill:!0},this.props.category.IsHidden?"Hidden":"Visible"))))))}}]),a}(p.a.Component),X=a(495),J=a(542),Z=a(543),$=a(496),ee=(a(266),a(29)),te=a(136),ae=a(267),ne=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).authService=new te.a,e.state={isImage:!0},e.onImageError=function(){e.setState({isImage:!1})},e.getCategory=function(t){if(e.props.categories)return e.props.categories.find((function(e){return e.Id==t}))},e.getAttribute=function(t){if(e.props.attributesGroups)return Array.prototype.concat.apply([],e.props.attributesGroups.map((function(e){return e.attributes}))).find((function(e){return e.Id==t}))},e.categoryListName=function(t){var a=[];return t.forEach((function(t){var n=e.getCategory(t);n&&(null===a||void 0===a||a.push(n))})),a.map((function(e){return e.Name})).join(", ")},e.attributeListName=function(t){var a=[];return t.forEach((function(t){var n=e.getAttribute(t);n&&(null===a||void 0===a||a.push(n))})),a.map((function(e){return e.Name})).join(", ")},e.onDownloadQrCode=function(t){var a=document.getElementById("qrcodedownload-".concat(e.props.product.Id)).toDataURL("image/png").replace("image/png","image/octet-stream"),n=document.createElement("a");n.href=a,n.download="qrcode-".concat(t.Id,".png"),document.body.appendChild(n),n.click(),document.body.removeChild(n)},e.qrCodeValue=function(){return e.props.product.CategoriesIds.length?"".concat(ee.c,"/photographer/").concat(e.authService.getId(),"/categories/").concat(e.props.product.CategoriesIds[0],"/").concat(e.props.product.Id):""},e}return Object(s.a)(a,[{key:"render",value:function(){var e,t=this;return p.a.createElement(g.a,{xxs:"12",key:this.props.product.Id,className:"productList"},p.a.createElement(_.a,{className:"d-flex flex-row productList__card"},p.a.createElement(K.a,{to:"?p=".concat(this.props.product.Id),className:"d-flex"},p.a.createElement("img",{alt:this.props.product.Name,src:this.state.isImage?this.props.product.FileUrl:"https://via.placeholder.com/400?text=No%20image",className:"list-thumbnail responsive border-0 card-img-left",onError:function(){return t.onImageError()}})),p.a.createElement("div",{className:"pl-2 d-flex flex-grow-1 min-width-zero"},p.a.createElement("div",{className:"card-body align-self-center d-flex flex-column flex-lg-row min-width-zero align-items-lg-center"},p.a.createElement(K.a,{to:"?p=1",className:"w-30",onClick:function(){return t.props.onCollapse(t.props.product.Id)}},p.a.createElement("div",{style:{cursor:"pointer"},className:"list-item-heading mb-1 truncate d-flex align-items-center"},this.props.product.Name," ",p.a.createElement("span",{className:"text-muted text-small ml-2"},"(",this.props.product.Id,")"),p.a.createElement("div",{className:"d-inline-block ml-3",style:{width:"20px"}},(null===(e=this.props.product.products)||void 0===e?void 0:e.length)>0&&p.a.createElement("div",{className:W()("glyph-icon",{"simple-icon-arrow-left":this.props.isCollapsed,"simple-icon-arrow-down":!this.props.isCollapsed})})))),p.a.createElement("p",{className:"mb-1 text-muted text-small w-40"},this.props.product.Description),p.a.createElement("div",{className:"d-flex w-20 text-small text-muted"},p.a.createElement(f.a,null,p.a.createElement(g.a,null,this.props.product.ProductPrices.map((function(e){return p.a.createElement(p.a.Fragment,null,p.a.createElement("div",null,"From ",p.a.createElement("strong",null,e.PriceLevelFrom)," to ",p.a.createElement("strong",null,0==e.PriceLevelTo?"infinity":e.PriceLevelTo)," Pieces - ",e.Price.toFixed(2)," \u20ac"))}))))),p.a.createElement("div",{className:"d-flex justify-content-end align-items-center w-10"},p.a.createElement("div",{className:"qrCode-main",style:{display:"none"}},"\\",p.a.createElement(ae.a,{id:"qrcodedownload-".concat(this.props.product.Id),value:this.qrCodeValue(),size:400,level:"H",includeMargin:!0})),p.a.createElement("div",{className:"mr-4"},p.a.createElement(X.a,{className:"productList__dropdown"},p.a.createElement(J.a,{caret:!0,color:"secondary",outline:!0},"Actions"),p.a.createElement(Z.a,null,""!=this.qrCodeValue()&&p.a.createElement($.a,{onClick:function(){return t.onDownloadQrCode(t.props.product)}},p.a.createElement("i",{className:"glyph-icon iconsminds-qr-code"})," ",p.a.createElement("span",null,"Download QR Code")),p.a.createElement($.a,{onClick:function(){return t.props.onEdit(t.props.product)}},p.a.createElement("i",{className:"simple-icon-docs"})," ",p.a.createElement("span",null,"Edit")),p.a.createElement($.a,{onClick:function(){return t.props.onDelete(t.props.product)}},p.a.createElement("i",{className:"simple-icon-trash"})," ",p.a.createElement("span",null,"Delete"))))))))))}}]),a}(p.a.Component),re=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).authService=new te.a,e.state={isImage:!0},e.onImageError=function(){e.setState({isImage:!1})},e.getCategory=function(t){if(e.props.categories)return e.props.categories.find((function(e){return e.Id==t}))},e.getAttribute=function(t){if(e.props.attributesGroups)return Array.prototype.concat.apply([],e.props.attributesGroups.map((function(e){return e.attributes}))).find((function(e){return e.Id==t}))},e.categoryListName=function(t){var a=[];return t.forEach((function(t){var n=e.getCategory(t);n&&(null===a||void 0===a||a.push(n))})),a.map((function(e){return e.Name})).join(", ")},e.attributeListName=function(t){var a=[];return t.forEach((function(t){var n=e.getAttribute(t);n&&(null===a||void 0===a||a.push(n))})),a.map((function(e){return e.Name})).join(", ")},e.onDownloadQrCode=function(t){var a=document.getElementById("qrcodedownload-".concat(e.props.product.Id)).toDataURL("image/png").replace("image/png","image/octet-stream"),n=document.createElement("a");n.href=a,n.download="qrcode-".concat(t.Id,".png"),document.body.appendChild(n),n.click(),document.body.removeChild(n)},e.qrCodeValue=function(){return e.props.product.CategoriesIds.length?"".concat(ee.c,"/photographer/").concat(e.authService.getId(),"/categories/").concat(e.props.product.CategoriesIds[0],"/").concat(e.props.product.MainProductId):""},e}return Object(s.a)(a,[{key:"render",value:function(){var e=this;return p.a.createElement(g.a,{xxs:"12",key:this.props.product.Id,className:"productList"},p.a.createElement(_.a,{style:{marginLeft:"3rem"},key:"subprod-"+this.props.product.Id,className:"d-flex flex-row productList__card"},p.a.createElement(K.a,{to:"?p=".concat(this.props.product.Id),className:"d-flex align-items-center"},p.a.createElement("img",{alt:this.props.product.Name,src:this.state.isImage?this.props.product.FileUrl:"https://via.placeholder.com/400?text=No%20image",className:"list-thumbnail responsive border-0 card-img-left",onError:function(){return e.onImageError()}})),p.a.createElement("div",{className:"pl-2 d-flex flex-grow-1 min-width-zero"},p.a.createElement("div",{className:"card-body align-self-center d-flex flex-column flex-lg-row min-width-zero align-items-lg-center"},p.a.createElement(K.a,{to:"?p=1",className:"w-30 w-sm-100",style:{marginRight:25}},p.a.createElement("p",{className:"list-item-heading mb-1 truncate"},this.props.product.Name," ",p.a.createElement("span",{className:"text-muted text-small ml-2"},"(",this.props.product.Id,"-",this.props.product.Id,")"))),p.a.createElement("p",{className:"mb-1 text-muted text-small w-40"},this.props.product.Description),p.a.createElement("div",{className:"mb-1 text-muted text-small w-30 w-sm-100"},p.a.createElement(f.a,null,p.a.createElement(g.a,null,p.a.createElement("div",null,"Category: ",p.a.createElement("strong",null,this.categoryListName(this.props.product.CategoriesIds))),p.a.createElement("div",null,"Attributes: ",p.a.createElement("strong",null,this.attributeListName(this.props.product.AttributesIds))),p.a.createElement("div",{className:"d-flex align-items-center"},"Is hidden:",p.a.createElement(Y.a,{color:this.props.product.IsHidden?"danger":"light",pill:!0},this.props.product.IsHidden?"Yes":"No"))))),p.a.createElement("div",{className:"d-flex justify-content-end align-items-center w-15"},p.a.createElement("div",{className:"qrCode",style:{display:"none"}},"\\",p.a.createElement(ae.a,{id:"qrcodedownload-".concat(this.props.product.Id),value:this.qrCodeValue(),size:400,level:"H",includeMargin:!0})),p.a.createElement("div",null,p.a.createElement(X.a,{className:"productList__dropdown"},p.a.createElement(J.a,{caret:!0,color:"secondary",outline:!0},"Actions"),p.a.createElement(Z.a,null,""!=this.qrCodeValue()&&p.a.createElement($.a,{onClick:function(){return e.onDownloadQrCode(e.props.product)}},p.a.createElement("i",{className:"glyph-icon iconsminds-qr-code"})," ",p.a.createElement("span",null,"Download QR Code")),p.a.createElement($.a,{onClick:function(){return e.props.onEdit(e.props.product)}},p.a.createElement("i",{className:"simple-icon-docs"})," ",p.a.createElement("span",null,"Edit")),p.a.createElement($.a,{onClick:function(){return e.props.onChangeVisible(e.props.product,!!e.props.product.IsHidden)}},p.a.createElement("i",{className:"simple-icon-trash"})," ",p.a.createElement("span",null,"Set ",this.props.product.IsHidden?"Visible":"Hidden")),p.a.createElement($.a,{onClick:function(){return e.props.onDelete(e.props.product)}},p.a.createElement("i",{className:"simple-icon-trash"})," ",p.a.createElement("span",null,"Delete"))))),p.a.createElement("a",{style:{width:"20px"},href:"#"}," "))))))}}]),a}(p.a.Component),oe=function(e){var t=[];return e.forEach((function(e){t.push(function(e){var t={Id:e.id,Name:e.name,Key:e.key,attributes:[],Position:e.position};return e.attributes.forEach((function(e){t.attributes.push(function(e,t){return{Id:e.id,Name:e.name,Description:e.description,PriceCorrectionPercent:e.priceCorrectionPercent,PriceCorrectionCurrent:e.priceCorrectionCurrent,Position:e.position,AttributeGroupId:t}}(e,t.Id))})),t}(e))})),t},le=function(e){var t=[];return e.forEach((function(e){var a={Name:e.name,Id:e.id,Description:e.description,FilePath:e.imageUrl,Position:e.position,IsHidden:e.isHidden,ProductsPositions:e.ProductsPositions};t.push(a)})),t},ie=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var o;return Object(c.a)(this,a),(o=t.call(this,e)).homeClient=new b.a,o.photoClient=new v.a,o.categoryClient=new y.a,o.attributeClient=new N.a,o.setModalOpen=function(e,t){"Create"==t?o.setState({modalOpen:e}):"Edit"==t&&o.setState({modalEditOpen:e})},o.refreshCategories=Object(i.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=le,e.next=3,o.categoryClient.List("ProductCategories");case 3:e.t1=e.sent.data.Data,t=(0,e.t0)(e.t1),o.setState({categories:t,tree:o.createTree(t,o.state.products)});case 6:case"end":return e.stop()}}),e)}))),o.refreshAll=Object(i.a)(l.a.mark((function e(){var t,a,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.setState({loading:!0}),M.b.info("Please wait.","Refreshing product list",3e3,null,null,""),e.t0=le,e.next=5,o.categoryClient.List("ProductCategories");case 5:return e.t1=e.sent.data.Data,t=(0,e.t0)(e.t1),e.next=9,o.getProducts();case 9:return a=e.sent,e.t2=oe,e.next=13,o.attributeClient.List("ProductAttributes");case 13:e.t3=e.sent.data.Data,n=(0,e.t2)(e.t3),o.setState({categories:t,attributeGroup:n,products:a,tree:o.createTree(t,a)}),M.b.info("Your product list is up to date.","Refreshing ended",3e3,null,null,""),o.setState({loading:!1});case 18:case"end":return e.stop()}}),e)}))),o.isCollapsed=function(e){return-1==o.state.expandedKeys.indexOf(e)},o.changeCollapse=function(e){var t=Object(r.a)(o.state.expandedKeys);o.state.expandedKeys.indexOf(e)>-1?t=t.filter((function(t){return!t.startsWith(e)})):t.push(e),o.setState({expandedKeys:t})},o.createTree=function(e,t){var a=[];if(e.forEach((function(e){var n={key:e.Id.toString(),title:function(e){return p.a.createElement(q,{key:"cat-".concat(e.key),isCollapsed:o.isCollapsed(e.key.toString()),category:e.category,onChangeVisible:function(e,t){},onCollapse:function(t){return o.changeCollapse(e.key.toString())},onDelete:function(){},onEdit:function(){}})},children:[],category:e,className:"node-category"},r=t.filter((function(t){return t.CategoriesIds.indexOf(e.Id)>-1&&null==t.MainProductId})),l=r;e.ProductsPositions&&e.ProductsPositions.length&&(l=[],e.ProductsPositions.forEach((function(e){var t=r.findIndex((function(t){return t.Id==e}));t>-1&&(l.push(r[t]),r.splice(t,1))})),l=l.concat(r)),l.forEach((function(t){var a={key:"".concat(e.Id,"-").concat(t.Id),title:function(e){return p.a.createElement("div",{style:{paddingLeft:"3rem"}},p.a.createElement(ne,{key:"mainprod-".concat(e.key),product:e.product,onChangeVisible:function(e,t){return o.onChangeProductVisible(e,t)},attributesGroups:o.state.attributeGroup,categories:o.state.categories,isCollapsed:o.isCollapsed(e.key.toString()),onCollapse:function(t){return o.changeCollapse(e.key.toString())},onDelete:function(e){return o.onDeleteRequest(e)},onEdit:function(e){return o.onEdit(e)}}))},children:[],product:t,className:"node-product"};t.products&&t.products.forEach((function(n){var r={key:"".concat(e.Id,"-").concat(t.Id,"-").concat(n.Id),title:function(e){return p.a.createElement("div",{style:{paddingLeft:"6rem"}},p.a.createElement(re,{key:"mainprod-".concat(e.key),product:e.product,onChangeVisible:function(e,t){return o.onChangeProductVisible(e,t)},attributesGroups:o.state.attributeGroup,categories:o.state.categories,isCollapsed:o.isCollapsed(e.key.toString()),onCollapse:function(t){return o.changeCollapse(e.key.toString())},onDelete:function(e){return o.onDeleteRequest(e)},onEdit:function(e){return o.onEdit(e)}}))},children:[],product:n,className:"node-subproduct"};a.children.push(r)})),n.children.push(a)})),a.push(n)})),t.filter((function(e){return 0==e.CategoriesIds.length})).length>0){var n={Id:9999,Name:"Others",IsHidden:!1,Description:"",FilePath:"",Position:999999},r={key:n.Id.toString(),title:function(e){return p.a.createElement(q,{key:"cat-".concat(e.key),isCollapsed:o.isCollapsed(e.key.toString()),category:e.category,onChangeVisible:function(e,t){},onCollapse:function(t){return o.changeCollapse(e.key.toString())},onDelete:function(){},onEdit:function(){}})},children:[],category:n,className:"node-category"};t.filter((function(e){return 0==e.CategoriesIds.length})).forEach((function(e){var t={key:"".concat(n.Id,"-").concat(e.Id),title:function(e){return p.a.createElement("div",{style:{paddingLeft:"3rem"}},p.a.createElement(ne,{key:"mainprod-".concat(e.key),product:e.product,onChangeVisible:function(e,t){return o.onChangeProductVisible(e,t)},attributesGroups:o.state.attributeGroup,categories:o.state.categories,isCollapsed:o.isCollapsed(e.key.toString()),onCollapse:function(t){return o.changeCollapse(e.key.toString())},onDelete:function(e){return o.onDeleteRequest(e)},onEdit:function(e){return o.onEdit(e)}}))},children:[],product:e,className:"node-product"};e.products&&e.products.forEach((function(a){var r={key:"".concat(n.Id,"-").concat(e.Id,"-").concat(a.Id),title:function(e){return p.a.createElement("div",{style:{paddingLeft:"6rem"}},p.a.createElement(re,{key:"mainprod-".concat(e.key),product:e.product,onChangeVisible:function(e,t){return o.onChangeProductVisible(e,t)},attributesGroups:o.state.attributeGroup,categories:o.state.categories,isCollapsed:o.isCollapsed(e.key.toString()),onCollapse:function(t){return o.changeCollapse(e.key.toString())},onDelete:function(e){return o.onDeleteRequest(e)},onEdit:function(e){return o.onEdit(e)}}))},children:[],product:a,className:"node-subproduct"};t.children.push(r)})),r.children.push(t)})),a.push(r)}return a},o.getProducts=Object(i.a)(l.a.mark((function e(){var t,a,n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.photoClient.ListProducts();case 2:return t=e.sent,a=t.data.Data,n={},a.filter((function(e){return null==e.MainProductId})).forEach((function(e){n[e.Id]=e})),a.filter((function(e){return null!=e.MainProductId})).forEach((function(e){n[e.MainProductId]&&(null==n[e.MainProductId].products&&(n[e.MainProductId].products=[]),n[e.MainProductId].products.push(e))})),r=Object.values(n).map((function(e){return e})),e.abrupt("return",r);case 9:case"end":return e.stop()}}),e)}))),o.onDeleteRequest=function(e){o.setState({modalDelete:!0,deleteProductGroup:e})},o.onEdit=function(e){o.setState({editedProductGroup:e,modalEditOpen:!0})},o.onDelete=Object(i.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=(t=o.state.deleteProductGroup)){e.next=3;break}return e.abrupt("return");case 3:return M.b.info("Product is deleting...","Deleting product",3e3,null,null,""),e.next=6,o.photoClient.DeleteProduct(t.Id);case 6:return e.sent,e.next=9,o.refreshAll();case 9:M.b.success("Product is deleted.","Product deleted sucessfully",3e3,null,null,"");case 10:case"end":return e.stop()}}),e)}))),o.refresh=function(){o.refreshAll()},o.onChangeProductVisible=function(){var e=Object(i.a)(l.a.mark((function e(t,a){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return M.b.info("Changing product visible...","Changing state",3e3,null,null,""),e.next=3,o.photoClient.SetProductVisible(t.Id,a);case 3:e.sent,o.refresh(),M.b.success("Product visible changed sucessfully.","Product state changed",3e3,null,null,"");case 6:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),o.allowDrop=function(e){return!(null==o.draggingNode||e.dropPosition<0)&&("node-product"==o.draggingNode.className&&("node-category"==e.dropNode.className||"node-product"==e.dropNode.className))},o.isDraggable=function(e){return"node-subproduct"!=e.className},o.getItemKeys=function(e){var t=e.key.split("-"),a=Object(n.a)(t,2);return{categoryId:a[0],productId:a[1]}},o.isReorder=function(e,t){var a=o.getItemKeys(e),n=o.getItemKeys(t);return a.categoryId==n.categoryId},o.isClone=function(e,t){var a=o.getItemKeys(e),n=o.getItemKeys(t);return a.categoryId!=n.categoryId},o.arraymove=function(e,t,a){var n=e[t];e.splice(t,1),e.splice(a,0,n)},o.onDrop=function(){var e=Object(i.a)(l.a.mark((function e(t){var a,n,r,i,c,s,u,m,d,p,f,E,h;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o.isReorder(t.dragNode,t.node)){e.next=19;break}if(a=0,"node-product"==t.node.className?0==(a=t.dropPosition)&&(a=1):"node-category"==t.node.className&&((n=o.state.categories.findIndex((function(e){return e.Id==t.node.category.Id})))==t.dropPosition?a=0:n<t.dropPosition&&(a=-1)),r=o.getItemKeys(t.dragNode),!(i=o.state.tree.find((function(e){return e.key==r.categoryId})))){e.next=17;break}if(c=i.children.map((function(e){return e.product.Id})),-1==a&&(a=c.length-1),!((s=c.indexOf(Number(r.productId)))>-1)){e.next=17;break}return o.arraymove(c,s,a),M.b.info("Please wait.","Updating positions...",3e3,null,null,""),e.next=14,o.categoryClient.UpdateCategoryProductsPositions(Number(r.categoryId),c);case 14:return e.next=16,o.refreshCategories();case 16:M.b.success("Position updated.","Positions updated sucessfully.",3e3,null,null,"");case 17:e.next=34;break;case 19:if(!o.isClone(t.dragNode,t.node)){e.next=34;break}return u=-1,m=-1,d=-1,p=o.getItemKeys(t.node),f=o.getItemKeys(t.dragNode),"node-product"==t.node.className?(0==(u=t.dropPosition)&&(u=1),m=p.categoryId,d=f.productId):"node-category"==t.node.className&&(E=o.state.categories.findIndex((function(e){return e.Id==t.node.category.Id})),h=o.state.categories[E],E==t.dropPosition?u=1:E<t.dropPosition&&(u=-1),m=h.Id,d=f.productId),console.log(d,m,u),u<1&&(u=null),M.b.info("Please wait","Cloning product...",3e3,null,null,""),e.next=31,o.categoryClient.CloneProductToCategory(d,m,u);case 31:return e.next=33,o.refreshAll();case 33:M.b.success("Cloning ended.","Product cloned sucessfully",3e3,null,null,"");case 34:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),o.draggingNode=null,o.onDragStart=function(e){o.draggingNode=e.node},o.state={loading:!0,products:[],modalOpen:!1,modalEditOpen:!1,modalDelete:!1,categories:[],attributeGroup:[],expandedKeys:[],tree:[]},o}return Object(s.a)(a,[{key:"populateData",value:function(){}},{key:"componentDidMount",value:function(){var e=Object(i.a)(l.a.mark((function e(){var t,a,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({loading:!0}),e.t0=le,e.next=4,this.categoryClient.List("ProductCategories");case 4:return e.t1=e.sent.data.Data,t=(0,e.t0)(e.t1),e.t2=oe,e.next=9,this.attributeClient.List("ProductAttributes");case 9:return e.t3=e.sent.data.Data,a=(0,e.t2)(e.t3),e.next=13,this.getProducts();case 13:n=e.sent,this.setState({categories:t,attributeGroup:a,products:n,tree:this.createTree(t,n),loading:!1});case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return p.a.createElement(p.a.Fragment,null,this.state.loading&&p.a.createElement("div",{className:"loading"}),p.a.createElement(f.a,null,p.a.createElement(g.a,{xxs:"12"},p.a.createElement("div",{className:"mb-2"},p.a.createElement("div",{className:"text-zero top-right-button-container"},p.a.createElement(E.a,{color:"primary",size:"lg",className:"top-right-button",onClick:function(){return e.setModalOpen(!0,"Create")}},p.a.createElement("i",{className:"simple-icon-plus"})," ADD NEW PRODUCT"),"  "),p.a.createElement(h.a,{heading:"Products",match:this.props.match})),p.a.createElement(g.b,{className:"mb-5"}))),p.a.createElement("div",{className:"draggable-container"},p.a.createElement(C.a,{onDragStart:function(t){return e.onDragStart(t)},onDrop:this.onDrop,draggable:function(t){return e.isDraggable(t)},treeData:this.state.tree,expandedKeys:this.state.expandedKeys,autoExpandParent:!0,allowDrop:this.allowDrop,dropIndicatorRender:function(e){return p.a.createElement("div",null,"Place here")}})),p.a.createElement(U.a,{id:"product_menu",onShow:function(e){}},p.a.createElement(U.c,{onClick:function(t,a){e.onEdit(a.product)},data:{action:"settings"}},p.a.createElement("i",{className:"simple-icon-docs"})," ",p.a.createElement("span",null,"Edit")),p.a.createElement(U.c,{onClick:function(t,a){e.onDeleteRequest(a.product)},data:{action:"delete"}},p.a.createElement("i",{className:"simple-icon-trash"})," ",p.a.createElement("span",null,"Delete"))),p.a.createElement(R,{modalOpen:this.state.modalOpen,toggleModal:function(){return e.setModalOpen(!e.state.modalOpen,"Create")},onCreate:this.refresh}),this.state.editedProductGroup&&p.a.createElement(H,{modalOpen:this.state.modalEditOpen,toggleModal:function(){return e.setModalOpen(!e.state.modalEditOpen,"Edit")},onEdit:this.refresh,product:this.state.editedProductGroup}),p.a.createElement(B,{title:"Product delete",description:"Do you really want delete product?",toggle:function(t){return e.setState({modalDelete:t})},onDelete:function(){return e.onDelete()},isOpen:this.state.modalDelete}))}}]),a}(p.a.Component);t.default=ie},482:function(e,t,a){"use strict";a.r(t),a.d(t,"ProductWizard",(function(){return Y}));var n,r=a(22),o=a.n(r),l=a(31),i=a(3),c=a(2),s=a(7),u=a(8),m=a(0),d=a.n(m),p=a(260),f=a(507),E=a(243),h=a(110),g=a(137),b=a(154),v=a(155),y=a(198),N=a(116),C=(a(200),a(490)),x=a(491),P=a(510),I=a(508),S=a(541),w=a(509),O=a(350),k=a(171),D=a(112),j=function(e){var t=e.className,a=e.disableNav,n=e.topNavClick,r=function(e,t,a,n){return e.indexOf(t)===a?"step-doing":e.indexOf(t)>a||n.isDone?(n.isDone=!0,"step-done"):"step"};return d.a.createElement(k.WithWizard,{render:function(e){e.next,e.previous;var o=e.step,l=e.steps,i=(e.go,e.push);return d.a.createElement("ul",{className:"nav nav-tabs ".concat(t).concat(a?" disabled":"")},l.map((function(e,t){return e.hideTopNav?d.a.createElement("span",{key:"topNavStep_".concat(t)}):d.a.createElement("li",{key:"topNavStep_".concat(t),className:"nav-item ".concat(r(l,o,t,e))},d.a.createElement(D.c,{to:"#",location:{},className:"nav-link",onClick:function(){return function(e,t){a||n(e,t)}(e,i)}},d.a.createElement("span",null,e.name),d.a.createElement("small",null,e.desc)))})))}})},F=a(184),A=function(e){var t=e.className,a=e.onClickPrev,n=e.prevLabel,r=e.onClickNext,o=e.nextLabel;return d.a.createElement(k.WithWizard,{render:function(e){var l=e.next,i=e.previous,c=e.step,s=e.steps;return d.a.createElement("div",{className:"wizard-buttons ".concat(t)},d.a.createElement(F.a,{color:"primary",className:"mr-1 ".concat(s.indexOf(c)<=0?"disabled":""),onClick:function(){a(i,s,c)}},n),d.a.createElement(F.a,{color:"primary",className:s.indexOf(c)>=s.length-1?"disabled":"",onClick:function(){r(l,s,c)}},o))}})},T=a(169),M=a(170),G=a(158);!function(e){e[e.Standard=0]="Standard",e[e.ThreeD=1]="ThreeD"}(n||(n={}));var L,z=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).topNavClick=function(e,t){t(e.id)},e.onClickNext=function(e,t,a){a.isDone=!0,t.length-1<=t.indexOf(a)||e()},e.onClickPrev=function(e,t,a){t.indexOf(a)<=0||e()},e}return Object(c.a)(a,[{key:"render",value:function(){var e=this;return d.a.createElement(k.Wizard,null,d.a.createElement(j,{className:"justify-content-center",disableNav:!1,topNavClick:this.topNavClick}),d.a.createElement(k.Steps,null,d.a.createElement(k.Step,{id:"step1",name:"Basic information",desc:"Set new product basic informations"},d.a.createElement("div",{className:"wizard-basic-step col-6 offset-3"},d.a.createElement("h1",{className:"text-center w-100"},"Basic informations"),d.a.createElement(C.a,null,d.a.createElement(x.a,{for:"Name"},"Name"),d.a.createElement(N.a,{className:"form-control",name:"Name",type:"text",id:"Name",placeholder:"Name",maxLength:20}),d.a.createElement(P.a,{color:"muted"},"Maximum 20 letters")),d.a.createElement(C.a,null,d.a.createElement(x.a,{for:"Description"},"Description"),d.a.createElement(N.a,{className:"form-control",name:"Description",type:"text",id:"Description",placeholder:"Description",maxLength:100}),d.a.createElement(P.a,{color:"muted"},"Maximum 100 letters")),d.a.createElement(C.a,null,d.a.createElement(x.a,{for:"File"},"Image"),d.a.createElement(I.a,null,d.a.createElement(S.a,{type:"file",id:"File",name:"File",onChange:function(t){null!=t&&null!=t.currentTarget&&t.currentTarget.files&&e.props.setFieldValue("File",t.currentTarget.files[0])}})),d.a.createElement(P.a,{color:"muted"},"Maximum 800x800 pixels")))),d.a.createElement(k.Step,{id:"step3",name:"Price ranges",desc:"Set product price ranges"},d.a.createElement("div",{className:"wizard-basic-step col-6 offset-3"},d.a.createElement("h1",{className:"text-center w-100"},"Price ranges"),d.a.createElement(C.a,null,d.a.createElement(x.a,{for:"Price"},"Price"),d.a.createElement("div",null,d.a.createElement(M.a,{initialValues:[],onChange:function(t){e.props.setFieldValue("PriceRange",t)}}))))),d.a.createElement(k.Step,{id:"step4",name:"Sizes & quantities",desc:"Configure custom picture and amount of photos"},d.a.createElement("div",{className:"wizard-basic-step col-6 offset-3"},d.a.createElement("h1",{className:"text-center w-100"},"Sizes & quantities"),d.a.createElement(C.a,null,d.a.createElement(x.a,{for:"Size"},"Size"),d.a.createElement("div",{className:"alert alert-info"},"Our software will automatically resize customer pictures during upload. You can set in pixels, the longer side of the image. Please note, value 0 means original size and longer time of uploading of photo."),d.a.createElement("select",{id:"SizeSelect",name:"SizeSelect",className:"form-control",value:this.props.values.SizeSelect,onChange:this.props.handleChange,onBlur:this.props.handleBlur},d.a.createElement("option",{disabled:!0,hidden:!0,defaultChecked:!0}),d.a.createElement("option",{value:0},"Original size"),d.a.createElement("option",{value:1},"Custom size")),this.props.customSize&&d.a.createElement(P.a,{color:"muted"},"For the longer size of photo"),1==this.props.values.SizeSelect&&d.a.createElement(I.a,{className:"mt-2"},d.a.createElement(N.a,{className:"form-control",name:"Size",type:"number",id:"Size",placeholder:"Size"}),d.a.createElement(w.a,{addonType:"append"},d.a.createElement(O.a,null,"px")))),d.a.createElement(E.a,{style:{marginTop:"3.5rem"}},d.a.createElement(h.a,null,d.a.createElement("div",{className:"alert alert-info"},"You can set the minimum and maximum amount of photos in the product. Please note, the final price is constant and independent from amount of photos (in range of minimum and maximum)."),d.a.createElement(E.a,null,d.a.createElement(C.a,{className:"col-6 mb-0"},d.a.createElement(x.a,null,"Min. quantity"),d.a.createElement(N.a,{className:"form-control",name:"QuantityRangeMin",type:"number",id:"QuantityRangeMin",placeholder:""})),d.a.createElement(C.a,{className:"col-6 mb-0"},d.a.createElement(x.a,null,"Max quantity"),d.a.createElement(N.a,{className:"form-control",name:"QuantityRangeMax",type:"number",id:"QuantityRangeMax",placeholder:""}))),d.a.createElement(C.a,{className:"col-12"},d.a.createElement(P.a,{color:"muted"},"Leave empty if not set")))))),d.a.createElement(k.Step,{id:"step5",name:"Categories & attributes",desc:"Set categories and product attributes"},d.a.createElement("div",{className:"wizard-basic-step  col-6 offset-3"},d.a.createElement("h1",{className:"text-center w-100"},"Categories & attributes"),d.a.createElement(C.a,null,d.a.createElement(x.a,{for:"Categories"},"Categories"),d.a.createElement(G.a,{isMulti:!0,name:"colors",options:this.props.categories,classNamePrefix:"select",onChange:function(t){e.props.setFieldValue("categories",t?t.map((function(e){return e.value})):[])}})),d.a.createElement(C.a,null,d.a.createElement(x.a,{for:"Attributes"},"Attributes"),d.a.createElement("div",null,d.a.createElement(T.a,{onChange:function(t){return e.props.setFieldValue("attributeGroups",t)},attributeGroups:this.props.attributeGroups,selectedAttributeGroups:[]}))))),d.a.createElement(k.Step,{id:"step6",hideTopNav:!0},d.a.createElement("div",{className:"wizard-basic-step text-center d-flex justify-content-center align-items-center success-view"},!this.props.saving&&!this.props.saved&&d.a.createElement("div",null,d.a.createElement("h1",null,"Your product is ready to launch!"),d.a.createElement("p",null,"Configuration for new product is ready. Please click button below to create Your brand new product!"),d.a.createElement("div",null,d.a.createElement("button",{className:"btn btn-success btn-xl",onClick:this.props.submitForm},"CREATE PRODUCT NOW"))),this.props.saving&&d.a.createElement("div",null,d.a.createElement("h1",null,"Creating new product..."),d.a.createElement("div",{className:"loading",style:{width:80,height:80,margin:"auto",display:"block",position:"unset"}})),!this.props.saving&&this.props.saved&&d.a.createElement("div",null,d.a.createElement("h1",{className:"text-success"},"Product created!"),d.a.createElement("div",{className:"glyph-icon simple-icon-check"}),d.a.createElement("p",null,"Now You can check product in product list!"),d.a.createElement(D.b,{to:"/photo-order/products",className:"btn btn-success"},"Go to product list"))))),!this.props.blockInterface&&d.a.createElement(A,{onClickNext:this.onClickNext,onClickPrev:this.onClickPrev,className:"justify-content-center",prevLabel:"Previouse",nextLabel:"Next"}))}}]),a}(d.a.Component),V=a(121),R=a(1),U=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).onChange=function(e){var t=Object(R.a)({},n.state);e.target.value?t.form[e.target.name]=e.target.valueAsNumber:t.form[e.target.name]=null,n.setState(t)},n.isButtonDisabled=function(){return!1},n.onAddWindow=function(){var e=Object(R.a)({},n.state.form),t=Object(V.a)(n.state.templates);t.push(e),n.setState({templates:t},(function(){n.props.onChange(t),n.clear()}))},n.clear=function(){console.log("clear");var e=Object(R.a)(Object(R.a)({},n.state),{},{form:{positionX:0,positionY:0,sizeX:0,sizeY:0}});n.setState(e)},n.onRemoveLast=function(){var e=Object(V.a)(n.state.templates);e.pop(),n.setState({templates:e},(function(){n.props.onChange(e)}))},n.state={templates:[],form:{positionX:0,positionY:0,sizeX:0,sizeY:0}},n}return Object(c.a)(a,[{key:"render",value:function(){var e=this;return d.a.createElement(d.a.Fragment,null,d.a.createElement(E.a,{className:"mt-2 mb-2"},d.a.createElement(h.a,{xxs:12},this.state.templates.map((function(e,t){return d.a.createElement(E.a,{key:"template-".concat(t)},d.a.createElement(h.a,{xxs:2,className:"pr-0"},d.a.createElement("div",{style:{width:"100%",height:"100%",display:"flex",alignItems:"center"}},"Window ",t+1)),d.a.createElement(h.a,{xxs:5,className:"pr-0"},d.a.createElement("div",{style:{width:"100%",height:"100%",display:"flex",alignItems:"center"}},"Position\xa0",d.a.createElement("strong",null,e.positionX,"px ",e.positionY,"px"))),d.a.createElement(h.a,{xxs:5,className:"pr-0"},d.a.createElement("div",{style:{width:"100%",height:"100%",display:"flex",alignItems:"center"}},"Size\xa0",d.a.createElement("strong",null,e.sizeX,"px x ",e.sizeY,"px"))))})))),d.a.createElement(E.a,{style:{marginTop:"3rem"}},d.a.createElement(h.a,{xxs:2,className:"pr-0"},d.a.createElement("div",{style:{width:"100%",height:"100%",display:"flex",alignItems:"center"}},"Position in px")),d.a.createElement(h.a,{xxs:5,className:"pr-0"},d.a.createElement(I.a,null,d.a.createElement("input",{onChange:function(t){return e.onChange(t)},name:"positionX",value:this.state.form.positionX,type:"number",placeholder:"X",className:"form-control"}),d.a.createElement(w.a,{addonType:"prepend"},d.a.createElement(O.a,null,"x")))),d.a.createElement(h.a,{xxs:5,className:"pl-0"},d.a.createElement(I.a,null,d.a.createElement("input",{onChange:function(t){return e.onChange(t)},name:"positionY",value:this.state.form.positionY,type:"number",placeholder:"Y",className:"form-control"}),d.a.createElement(w.a,{addonType:"prepend"},d.a.createElement(O.a,null,"y")))),d.a.createElement(h.a,{xxs:2,className:"pr-0"},d.a.createElement("div",{style:{width:"100%",height:"100%",display:"flex",alignItems:"center"}},"Size in px")),d.a.createElement(h.a,{xxs:5,className:"pr-0"},d.a.createElement(I.a,null,d.a.createElement("input",{onChange:function(t){return e.onChange(t)},name:"sizeX",value:this.state.form.sizeX,type:"number",placeholder:"X",className:"form-control"}),d.a.createElement(w.a,{addonType:"prepend"},d.a.createElement(O.a,null,"x")))),d.a.createElement(h.a,{xxs:5,className:"pl-0"},d.a.createElement(I.a,null,d.a.createElement("input",{onChange:function(t){return e.onChange(t)},name:"sizeY",value:this.state.form.sizeY,type:"number",placeholder:"Y",className:"form-control"}),d.a.createElement(w.a,{addonType:"prepend"},d.a.createElement(O.a,null,"y")))),d.a.createElement(h.a,{xxs:6,className:"mt-1"},d.a.createElement(F.a,{disabled:this.isButtonDisabled(),color:"primary",outline:!0,onClick:function(){return e.onAddWindow()}},d.a.createElement("i",{className:"simple-icon-plus"})," Add new window")),d.a.createElement(h.a,{xxs:6,className:"mt-1 text-right"},d.a.createElement(F.a,{color:"danger",outline:!0,onClick:function(){return e.onRemoveLast()}},d.a.createElement("i",{className:"simple-icon-trash"})," Remove"))))}}]),a}(d.a.Component),B=a(23),H=a(32);!function(e){e[e.Standard=0]="Standard",e[e.ThreeD=1]="ThreeD"}(L||(L={}));var _,K=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).productClient=new B.i(H.a),e.state={modelList:[]},e.topNavClick=function(e,t){t(e.id)},e.onClickNext=function(e,t,a){a.isDone=!0,t.length-1<=t.indexOf(a)||e()},e.onClickPrev=function(e,t,a){t.indexOf(a)<=0||e()},e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.productClient.get3DModels();case 2:t=e.sent,this.setState({modelList:t}),t&&this.props.setFieldValue("Model3D",t[0]);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return d.a.createElement(k.Wizard,null,d.a.createElement(j,{className:"justify-content-center",disableNav:!1,topNavClick:this.topNavClick}),d.a.createElement(k.Steps,null,d.a.createElement(k.Step,{id:"step1",name:"Basic information",desc:"Set new product basic informations"},d.a.createElement("div",{className:"wizard-basic-step col-6 offset-3"},d.a.createElement("h1",{className:"text-center w-100"},"Basic informations"),d.a.createElement(C.a,null,d.a.createElement(x.a,{for:"3dModel"},"3D Model"),d.a.createElement(N.a,{className:"form-control",name:"Model3D",as:"select",id:"Model3D",placeholder:"Model 3D",onChange:function(t){var a=e.state.modelList[t.currentTarget.selectedIndex];e.props.setFieldValue("Model3D",a)}},this.state.modelList.map((function(e){return d.a.createElement("option",{key:e.id,value:e.id},e.name)}))),d.a.createElement(P.a,{color:"muted"},"Select 3d model for product")),d.a.createElement(C.a,null,d.a.createElement(x.a,{for:"Name"},"Name"),d.a.createElement(N.a,{className:"form-control",name:"Name",type:"text",id:"Name",placeholder:"Name",maxLength:20}),d.a.createElement(P.a,{color:"muted"},"Maximum 20 letters")),d.a.createElement(C.a,null,d.a.createElement(x.a,{for:"Description"},"Description"),d.a.createElement(N.a,{className:"form-control",name:"Description",type:"text",id:"Description",placeholder:"Description",maxLength:100}),d.a.createElement(P.a,{color:"muted"},"Maximum 100 letters")),d.a.createElement(C.a,null,d.a.createElement(x.a,{for:"File"},"Image"),d.a.createElement(I.a,null,d.a.createElement(S.a,{type:"file",id:"File",name:"File",onChange:function(t){null!=t&&null!=t.currentTarget&&t.currentTarget.files&&e.props.setFieldValue("File",t.currentTarget.files[0])}})),d.a.createElement(P.a,{color:"muted"},"Maximum 800x800 pixels")))),d.a.createElement(k.Step,{id:"step2",name:"Template",desc:"Set template details"},d.a.createElement("div",{className:"wizard-basic-step col-6 offset-3"},d.a.createElement("h1",{className:"text-center w-100"},"Template"),d.a.createElement(E.a,{className:"mb-2"},d.a.createElement(h.a,{xxs:2,className:"pr-0"},d.a.createElement("div",{style:{width:"100%",height:"100%",display:"flex",alignItems:"center"}},"Layer image file")),d.a.createElement(h.a,{xss:10},d.a.createElement(I.a,null,d.a.createElement(S.a,{type:"file",id:"layerImageFile",name:"layerImageFile",onChange:function(t){null!=t&&null!=t.currentTarget&&t.currentTarget.files&&e.props.setFieldValue("layerImageFile",t.currentTarget.files[0])}})))),d.a.createElement(U,{onChange:function(t){e.props.setFieldValue("ProductTemplates",t)}}))),d.a.createElement(k.Step,{id:"step3",name:"Price ranges",desc:"Set product price ranges"},d.a.createElement("div",{className:"wizard-basic-step col-6 offset-3"},d.a.createElement("h1",{className:"text-center w-100"},"Price ranges"),d.a.createElement(C.a,null,d.a.createElement(x.a,{for:"Price"},"Price"),d.a.createElement("div",null,d.a.createElement(M.a,{initialValues:[],onChange:function(t){e.props.setFieldValue("PriceRange",t)}}))))),d.a.createElement(k.Step,{id:"step5",name:"Categories & attributes",desc:"Set categories and product attributes"},d.a.createElement("div",{className:"wizard-basic-step  col-6 offset-3"},d.a.createElement("h1",{className:"text-center w-100"},"Categories & attributes"),d.a.createElement(C.a,null,d.a.createElement(x.a,{for:"Categories"},"Categories"),d.a.createElement(G.a,{isMulti:!0,name:"colors",options:this.props.categories,classNamePrefix:"select",onChange:function(t){e.props.setFieldValue("categories",t?t.map((function(e){return e.value})):[])}})),d.a.createElement(C.a,null,d.a.createElement(x.a,{for:"Attributes"},"Attributes"),d.a.createElement("div",null,d.a.createElement(T.a,{onChange:function(t){return e.props.setFieldValue("attributeGroups",t)},attributeGroups:this.props.attributeGroups,selectedAttributeGroups:[]}))))),d.a.createElement(k.Step,{id:"step6",hideTopNav:!0},d.a.createElement("div",{className:"wizard-basic-step text-center d-flex justify-content-center align-items-center success-view"},!this.props.saving&&!this.props.saved&&d.a.createElement("div",null,d.a.createElement("h1",null,"Your product is ready to launch!"),d.a.createElement("p",null,"Configuration for new product is ready. Please click button below to create Your brand new product!"),d.a.createElement("div",null,d.a.createElement("button",{className:"btn btn-success btn-xl",onClick:this.props.submitForm},"CREATE PRODUCT NOW"))),this.props.saving&&d.a.createElement("div",null,d.a.createElement("h1",null,"Creating new product..."),d.a.createElement("div",{className:"loading",style:{width:80,height:80,margin:"auto",display:"block",position:"unset"}})),!this.props.saving&&this.props.saved&&d.a.createElement("div",null,d.a.createElement("h1",{className:"text-success"},"Product created!"),d.a.createElement("div",{className:"glyph-icon simple-icon-check"}),d.a.createElement("p",null,"Now You can check product in product list!"),d.a.createElement(D.b,{to:"/photo-order/products",className:"btn btn-success"},"Go to product list"))))),!this.props.blockInterface&&d.a.createElement(A,{onClickNext:this.onClickNext,onClickPrev:this.onClickPrev,className:"justify-content-center",prevLabel:"Previouse",nextLabel:"Next"}))}}]),a}(d.a.Component);!function(e){e[e.Standard=0]="Standard",e[e.ThreeD=1]="ThreeD"}(_||(_={}));var Y=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).photoClient=new g.a,n.productClient=new B.i(H.a),n.categoriesClient=new b.a,n.attributesClient=new v.a,n.initialValues={Name:"",Size:0,Description:"",Price:null,SizeSelect:0,File:null,attributeGroups:[],categories:[],QuantityRangeMin:"",QuantityRangeMax:"",PriceRange:[],ProductType:0,ProductTemplates:[],Model3D:null},n.topNavClick=function(e,t){n.blockInterface||t(e.id)},n.onClickNext=function(e,t,a){a.isDone=!0,t.length-1<=t.indexOf(a)||e()},n.onClickPrev=function(e,t,a){t.indexOf(a)<=0||e()},n.onSubmit=function(){var e=Object(l.a)(o.a.mark((function e(t,a){var r,l,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.state.wizardType!=_.Standard){e.next=18;break}(r=new FormData).append("Description",t.Description),r.append("Name",t.Name),r.append("Price","0"),r.append("Size",t.Size),r.append("FileAsBase64",t.File),r.append("QuantityRangeMin",t.QuantityRangeMin),r.append("QuantityRangeMax",t.QuantityRangeMax),r.append("ProductType",t.ProductType),t.PriceRange.forEach((function(e,t){r.append("ProductPrices[".concat(t,"].PriceLevelFrom"),e.from),e.to&&r.append("ProductPrices[".concat(t,"].PriceLevelTo"),e.to),r.append("ProductPrices[".concat(t,"].Price"),e.value),r.append("ProductPrices[".concat(t,"].IsDeleted"),"false")})),t.categories.forEach((function(e){r.append("CategoriesIds",e.toString())})),l=t.attributeGroups,Array.prototype.concat.apply([],l.map((function(e){return e.attributes}))).forEach((function(e){isNaN(e)||r.append("AttributesIds",e.toString())})),n.setState({saving:!0}),n.photoClient.AddProduct(r).then((function(e){e.data.Error?n.setState({saving:!1}):n.setState({saved:!0,saving:!1}),a.setSubmitting(!1)})),e.next=33;break;case 18:return(i={}).attributesIds=t.attributeGroups.map((function(e){return e.id})),i.categoriesIds=t.categories,i.description=t.Description,i.imageFile={data:t.File,fileName:t.File.name},i.layerImageFile={data:t.layerImageFile,fileName:t.layerImageFile.name},i.name=t.Name,i.productPrices=t.PriceRange.map((function(e){return new B.h({price:e.value,priceLevelFrom:e.from,priceLevelTo:e.to,id:0}).toString()})),i.sizes=t.ProductTemplates.map((function(e){return new B.j({id:0,productId:0,positionX:e.positionX,positionY:e.positionY,sizeX:e.sizeX,sizeY:e.sizeY}).toString()})),i.model3D=t.Model3D.id,n.setState({saving:!0}),e.next=31,n.productClient.add3DProduct(i.name,i.description,i.imageFile,i.layerImageFile,i.sizes,[],i.productPrices,[],i.categoriesIds,i.attributesIds,i.model3D);case 31:n.setState({saved:!0,saving:!1}),a.setSubmitting(!1);case 33:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),n.state={customSize:!1,categories:[],attributeGroups:[],saving:!1,saved:!1,wizardType:null},n.categoriesClient.List("ProductCategories").then((function(e){var t=e.data.Data.map((function(e){return Object(y.b)(e)}));n.setState({categories:t})})),n.attributesClient.List("ProductAttributes").then((function(e){var t=e.data.Data.map((function(e){return Object(y.a)(e)}));n.setState({attributeGroups:t})})),n}return Object(c.a)(a,[{key:"render",value:function(){var e=this;return d.a.createElement(N.c,{initialValues:this.initialValues,onSubmit:this.onSubmit,enableReinitialize:!0},(function(t){t.handleSubmit;var a=t.setFieldValue,n=(t.setFieldTouched,t.handleChange),r=t.handleBlur,o=t.values,l=(t.errors,t.touched,t.isSubmitting,t.submitForm);return d.a.createElement(N.b,null,d.a.createElement(p.a,null,d.a.createElement(f.a,{className:"wizard wizard-default"},d.a.createElement("h1",{style:{marginTop:18}},"Product wizard"),null==e.state.wizardType&&d.a.createElement(d.a.Fragment,null,d.a.createElement(E.a,null,d.a.createElement(h.a,{className:"text-center"},d.a.createElement("h1",null,"Select product that you will create"))),d.a.createElement(E.a,null,d.a.createElement(h.a,{className:"text-right"},d.a.createElement("button",{onClick:function(){return e.setState({wizardType:_.Standard})},className:"btn btn-primary btn-lg"},"Standard product")),d.a.createElement(h.a,{className:"text-left"},d.a.createElement("button",{onClick:function(){return e.setState({wizardType:_.ThreeD})},className:"btn btn-primary btn-lg"},"3D product")))),e.state.wizardType==_.Standard&&d.a.createElement(d.a.Fragment,null,d.a.createElement(z,Object.assign({},e.state,{setFieldValue:a,values:o,handleChange:n,handleBlur:r,submitForm:l,categories:e.categories,blockInterface:e.blockInterface}))),e.state.wizardType==_.ThreeD&&d.a.createElement(d.a.Fragment,null,d.a.createElement(K,Object.assign({},e.state,{setFieldValue:a,values:o,handleChange:n,handleBlur:r,submitForm:l,categories:e.categories,blockInterface:e.blockInterface}))))))}))}},{key:"categories",get:function(){return this.state.categories.map((function(e){return{value:e.Id,label:e.Name}}))}},{key:"attributeGroups",get:function(){var e=[];return this.state.attributeGroups.forEach((function(t){e.push({label:t.Name,options:t.attributes.map((function(e){return{label:e.Name,value:e.Id}}))})})),e}},{key:"blockInterface",get:function(){return this.state.saved||this.state.saving}}]),a}(d.a.Component);t.default=Y},483:function(e,t,a){"use strict";a.r(t),a.d(t,"Settings",(function(){return J}));var n=a(22),r=a.n(n),o=a(31),l=a(3),i=a(2),c=a(7),s=a(8),u=a(0),m=a.n(u),d=a(243),p=a(260),f=a(507),E=a(261),h=a(490),g=a(491),b=a(508),v=a(541),y=a(509),N=a(510),C=a(184),x=a(124),P=a(110),I=a(128),S=a(116),w=a(137),O=a(113),k=a(23),D=a(32),j=a(136),F=a(130),A=a(145),T=a(535),M=a(500),G=a(501),L=a(502);function z(e){var t=new k.a(D.a),a=new k.e(D.a),n=Object(S.d)({initialValues:new k.b({id:0,photographerId:0}),onSubmit:function(){var e=Object(o.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()});function l(e){return i.apply(this,arguments)}function i(){return(i=Object(o.a)(r.a.mark((function n(o){var l,i,c,s;return r.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(O.b.info("Saving...","Saving banner.",3e3,null,null,""),l=o.file,i=o.mobileFile,c=null,s=null,!l){n.next=9;break}return n.next=8,a.upload({data:l,fileName:l.name},k.f.AdvertisementSlider);case 8:c=n.sent;case 9:if(!i){n.next=13;break}return n.next=12,a.upload({data:i,fileName:i.name},k.f.AdvertisementSlider);case 12:s=n.sent;case 13:if(c&&(o.fileGuid=c.guid,o.fileName=c.name,o.imageUrl=c.url),s&&(o.mobileFileGuid=s.guid,o.mobileFileName=s.name,o.mobileImageUrl=s.url),!o.id){n.next=20;break}return n.next=18,t.update(o);case 18:n.next=24;break;case 20:return o.id=0,o.photographerId=0,n.next=24,t.create(o);case 24:O.b.success("Banner saved.","Success",3e3,null,null,""),e.onClose();case 26:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function c(e){e&&window.open(e,"_blank")}return Object(u.useEffect)((function(){n.setValues(e.advertisement,!1)}),[]),m.a.createElement("form",{onSubmit:n.handleSubmit},m.a.createElement(T.a,{isOpen:!0,wrapClassName:"modal-right",backdrop:"static"},m.a.createElement(M.a,{toggle:function(){return e.onClose()}},n.values.id?"Edit banner":"Add banner"),m.a.createElement(G.a,null,m.a.createElement(h.a,null,m.a.createElement(g.a,{for:"buttonText"},"Description"),m.a.createElement("input",{onChange:n.handleChange,className:"form-control",type:"text",placeholder:"",id:"buttonText",name:"buttonText",value:n.values.buttonText||""}),m.a.createElement(N.a,{color:"muted"},"Maximum 100 letters")),m.a.createElement(h.a,null,m.a.createElement(g.a,{for:"File"},"Image"),m.a.createElement(b.a,null,m.a.createElement(v.a,{type:"file",id:"file",name:"file",onChange:function(e){null!=e&&null!=e.currentTarget&&e.currentTarget.files&&n.setFieldValue("file",e.currentTarget.files[0],!1)}}),n.values.imageUrl?m.a.createElement(y.a,{addonType:"append",onClick:function(){return c(n.values.imageUrl)}},"Show"):null),m.a.createElement(N.a,{color:"muted"},"Maximum 1920x800 pixels")),m.a.createElement(h.a,null,m.a.createElement(g.a,{for:"mobileFIle"},"Mobile Image"),m.a.createElement(b.a,null,m.a.createElement(v.a,{type:"file",id:"mobileFile",name:"mobileFile",onChange:function(e){null!=e&&null!=e.currentTarget&&e.currentTarget.files&&n.setFieldValue("mobileFile",e.currentTarget.files[0],!1)}}),n.values.mobileImageUrl?m.a.createElement(y.a,{addonType:"append",onClick:function(){return c(n.values.mobileImageUrl)}},"Show"):null),m.a.createElement(N.a,{color:"muted"},"Maximum 1280x1920 pixels")),m.a.createElement(h.a,null,m.a.createElement(g.a,{for:"buttonText"},"Url"),m.a.createElement("input",{onChange:n.handleChange,className:"form-control",type:"text",placeholder:"",id:"externalUrl",name:"externalUrl",value:n.values.externalUrl||""}))),m.a.createElement(L.a,null,m.a.createElement(C.a,{color:"secondary",outline:!0,onClick:function(){return e.onClose()}},"Cancel"),m.a.createElement(C.a,{color:"primary",type:"submit",onClick:n.handleSubmit},"Save"))))}var V=a(134),R=a(504),U=a(516),B=a(495),H=a(542),_=a(543),K=a(496),Y=a(120),Q=a(122),W=function(e){Object(c.a)(a,e);var t=Object(s.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={isImage:!0},e.onImageError=function(){console.log("err"),e.setState({isImage:!1})},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this;return m.a.createElement(A.b,{key:this.props.entity.id,draggableId:"category-"+this.props.entity.id,index:this.props.index},(function(t,a){return m.a.createElement("div",Object.assign({ref:t.innerRef},t.draggableProps,{key:e.props.entity.id}),m.a.createElement(P.a,{xxs:"12",className:"mb-3 productList"},m.a.createElement(V.b,{id:"product_menu",collect:function(t){return{data:t.data,product:e.props.entity}}},m.a.createElement(p.a,Object.assign({},t.dragHandleProps,{onClick:function(t){return e.props.onCheckItem(t,e.props.entity.id)},className:"d-flex flex-row productList__card"}),m.a.createElement(R.a,{to:"?p=".concat(e.props.entity.id),className:"d-flex"},m.a.createElement("img",{src:e.state.isImage?e.props.entity.imageUrl||"":"https://via.placeholder.com/400?text=No%20image",className:"list-thumbnail responsive border-0 card-img-left",onError:function(){return e.onImageError()}})),m.a.createElement("div",{className:"pl-2 d-flex flex-grow-1 min-width-zero"},m.a.createElement("div",{className:"card-body align-self-center d-flex flex-column flex-lg-row justify-content-between min-width-zero align-items-lg-center"},m.a.createElement(R.a,{to:"?p=1",className:"w-15"},m.a.createElement("p",{className:"list-item-heading mb-1 truncate"},e.props.entity.buttonText)),m.a.createElement("p",{className:"mb-1 text-muted text-small w-50"},e.props.entity.externalUrl),m.a.createElement("p",{className:"mb-1  w-10 text-right"},m.a.createElement(U.a,{color:e.props.entity.isHidden?"danger":"light",pill:!0},e.props.entity.isHidden?"Hidden":"Visible")),m.a.createElement("div",{className:"mb-1 w-25 text-right pr-3"},m.a.createElement(B.a,{className:"productList__dropdown"},m.a.createElement(H.a,{caret:!0,color:"secondary",outline:!0},"Actions"),m.a.createElement(_.a,null,m.a.createElement(K.a,{onClick:function(){return e.props.onEdit(e.props.entity)}},m.a.createElement("i",{className:"simple-icon-docs"})," ",m.a.createElement("span",null,"Edit")),m.a.createElement(K.a,{onClick:function(){return e.props.onChangeVisible(e.props.entity,!!e.props.entity.isHidden)}},m.a.createElement("i",{className:"simple-icon-docs"})," ",m.a.createElement("span",null,"Set ",e.props.entity.isHidden?"Visible":"Hidden")),m.a.createElement(K.a,{onClick:function(){return e.props.onDelete(e.props.entity)}},m.a.createElement("i",{className:"simple-icon-trash"})," ",m.a.createElement("span",null,"Delete"))))),m.a.createElement("div",null,m.a.createElement(Y.a,{icon:Q.c}))))))))}))}}]),a}(m.a.Component);function q(){var e=new k.a(D.a),t=Object(u.useState)([]),a=Object(F.a)(t,2),n=a[0],l=a[1],i=Object(u.useState)(null),c=Object(F.a)(i,2),s=c[0],h=c[1],g=function(){var t=Object(o.a)(r.a.mark((function t(){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=l,t.next=3,e.list();case 3:t.t1=t.sent,(0,t.t0)(t.t1);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),b=function(e,t,a){var n=Array.from(e),r=n.splice(t,1),o=Object(F.a)(r,1)[0];return n.splice(a,0,o),n};function v(){return(v=Object(o.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g();case 2:h(null);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(){return(y=Object(o.a)(r.a.mark((function t(a){var o,i;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a.source||!a.destination){t.next=8;break}return o=b(n,a.source.index,a.destination.index),l(o),i=o.map((function(e){return e.id})),t.next=6,e.reorder(i);case 6:return t.next=8,g();case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function N(e,t){return x.apply(this,arguments)}function x(){return(x=Object(o.a)(r.a.mark((function t(a,n){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.isHidden=!n,O.b.info("Updating visible.","Updating...",3e3,null,null,""),t.next=4,e.update(a);case 4:return O.b.success("Updated.","Success",3e3,null,null,""),t.next=7,g();case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function I(e){return S.apply(this,arguments)}function S(){return(S=Object(o.a)(r.a.mark((function t(a){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return O.b.info("Deleting banner","Deleting...",3e3,null,null,""),t.next=3,e.delete(a.id);case 3:return O.b.success("Deleted.","Success",3e3,null,null,""),t.next=6,g();case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function w(e){return j.apply(this,arguments)}function j(){return(j=Object(o.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:h(t);case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(u.useEffect)((function(){g().catch(console.error)}),[]),m.a.createElement(m.a.Fragment,null,m.a.createElement(p.a,null,m.a.createElement(f.a,null,m.a.createElement(E.a,null,"Banner settings",m.a.createElement("div",{className:"text-zero top-right-button-container"},m.a.createElement(C.a,{color:"primary",size:"lg",className:"top-right-button",onClick:function(){console.log(),h(new k.b)}},m.a.createElement("i",{className:"simple-icon-plus"})," ADD BANNER"),"  ")),m.a.createElement(d.a,null,m.a.createElement(P.a,{xxs:"12"},m.a.createElement(A.a,{onDragEnd:function(e){return y.apply(this,arguments)}},m.a.createElement(A.c,{droppableId:"categories"},(function(e,t){return m.a.createElement("div",Object.assign({},e.droppableProps,{ref:e.innerRef}),n.map((function(e,t){return m.a.createElement(W,{onChangeVisible:N,key:"advitem"+t,entity:e,onDelete:I,onEdit:w,onCheckItem:function(){},index:t})})),e.placeholder)}))))))),null!=s?m.a.createElement(z,{advertisement:s,onClose:function(){return v.apply(this,arguments)}}):null)}var X=a(29),J=function(e){Object(c.a)(a,e);var t=Object(s.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).homeClient=new I.a,n.photoClient=new w.a,n.photographerClient=new k.g(D.a),n.authService=new j.a,n.state={MobileToken:""},n.onSubmit=function(){var e=Object(o.a)(r.a.mark((function e(t,a){var o;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.photoClient.SaveSoftwareSettings(t.Logo,t.Promotion,t.LabId);case 2:(o=e.sent).data.Error&&O.b.error("Saving error",o.data.Error,3e3,null,null,""),o.data.Error||O.b.success("Data saved","Data saved correctly",3e3,null,null,""),n.setState({MobileToken:t.LabId}),a.setSubmitting(!1);case 7:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),n.homeClient.PhotographerDetails().then((function(e){e.data.Data&&n.setState({MobileToken:e.data.Data.MobileToken})})),n}return Object(i.a)(a,[{key:"render",value:function(){var e=this;return m.a.createElement(m.a.Fragment,null,m.a.createElement(S.c,{initialValues:this.initialValues,onSubmit:this.onSubmit,enableReinitialize:!0},(function(t){t.handleSubmit;var a=t.setFieldValue;t.setFieldTouched,t.handleChange,t.handleBlur,t.values,t.errors,t.touched,t.isSubmitting,t.submitForm;return m.a.createElement(S.b,null,m.a.createElement(d.a,null,m.a.createElement(P.a,{xxs:"12"},m.a.createElement(x.a,{heading:"Settings",match:e.props.match}),m.a.createElement(P.b,{className:"mb-5"}))),m.a.createElement(d.a,null,m.a.createElement(P.a,{xxs:"12"},m.a.createElement(p.a,null,m.a.createElement(f.a,null,m.a.createElement(E.a,null,"Software settings"),m.a.createElement(S.b,null,m.a.createElement(h.a,null,m.a.createElement(g.a,{for:"LabId"},"Lab ID"),m.a.createElement(b.a,null,m.a.createElement(S.a,{className:"form-control",name:"LabId",type:"text",id:"LabId",placeholder:"LabId",disabled:e.state.MobileToken?"disabled":""}))),m.a.createElement(h.a,null,m.a.createElement(g.a,{for:"logo"},"Logo"),m.a.createElement(b.a,null,m.a.createElement(v.a,{type:"file",id:"logo",name:"logo",onChange:function(e){null!=e&&null!=e.currentTarget&&e.currentTarget.files&&a("Logo",e.currentTarget.files[0])}}),m.a.createElement(y.a,{addonType:"append"},"Show")),m.a.createElement(N.a,{color:"muted"},"(maximum size 1270x1270 72ppi .jpg or .png)")),m.a.createElement(h.a,null,m.a.createElement(g.a,{for:"promotion"},"Promotion"),m.a.createElement(b.a,null,m.a.createElement(v.a,{type:"file",id:"promotion",name:"promotion",onChange:function(e){null!=e&&null!=e.currentTarget&&e.currentTarget.files&&a("Promotion",e.currentTarget.files[0])}}),m.a.createElement(y.a,{addonType:"append"},"Show")),m.a.createElement(N.a,{color:"muted"},"(maximu size 1440x2560 72ppi .jpg or .png")),m.a.createElement(C.a,{type:"submit",color:"primary",className:"mt-4"},"Save")))))))})),m.a.createElement(d.a,{className:"mt-4"},m.a.createElement(P.a,{xxs:"12"},m.a.createElement(q,null))),m.a.createElement(d.a,{className:"mt-3"},m.a.createElement(P.a,{xxs:"12"},m.a.createElement(p.a,null,m.a.createElement(f.a,null,m.a.createElement(E.a,null,"Direct link to your web-ordering"),m.a.createElement("div",{className:"row"},m.a.createElement("div",{className:"col-xs-12"},m.a.createElement("a",{href:"".concat(X.c,"/photographer/").concat(this.authService.getId()),target:"_blank"},"".concat(X.c,"/photographer/").concat(this.authService.getId())))))))))}},{key:"initialValues",get:function(){return{LabId:this.state.MobileToken||"",Promotion:null,Logo:null}}}]),a}(m.a.Component);t.default=J},484:function(e,t,a){"use strict";a.r(t),a.d(t,"Attributes",(function(){return J}));var n=a(121),r=a(3),o=a(2),l=a(7),i=a(8),c=a(130),s=a(0),u=a.n(s),m=a(243),d=a(184),p=a(110),f=a(124),E=a(270),h=a(1),g=a(134),b=a(260),v=a(504),y=a(495),N=a(542),C=a(543),x=a(496),P=a(499),I=a(120),S=a(122),w=a(145),O=a(109),k=a.n(O),D=function(e){Object(l.a)(a,e);var t=Object(i.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).onImageError=function(e){console.log("on image-error");var t=Object(h.a)({},n.state.isAttrImage);t[e]=!1,n.setState({isAttrImage:t})},n.state={isCollapsed:!1,isAttrImage:{}},n}return Object(o.a)(a,[{key:"isImage",value:function(e){return null==this.state.isAttrImage[e]||1==this.state.isAttrImage[e]}},{key:"render",value:function(){var e,t=this;return u.a.createElement(p.a,{xxs:"12",key:"attrgroup-"+this.props.attributeGroup.Id,className:"mb-3 productList"},u.a.createElement(g.b,{id:"product_menu",collect:function(e){return{data:e.data,product:t.props.attributeGroup}}},u.a.createElement(b.a,Object.assign({},this.props.groupDragHandler,{onClick:function(e){return t.props.onCheckItem(e,t.props.attributeGroup.Id)},className:"d-flex flex-row productList__card"}),u.a.createElement("div",{className:"pl-2 d-flex flex-grow-1 min-width-zero"},u.a.createElement("div",{className:"card-body align-self-center d-flex flex-column flex-lg-row justify-content-between min-width-zero align-items-lg-center"},u.a.createElement(v.a,{to:"?p=1",className:"w-70"},u.a.createElement("p",{style:{cursor:"pointer"},className:"list-item-heading mb-1 truncate d-flex align-items-center"},this.props.attributeGroup.Name,u.a.createElement("a",{className:"ml-3",style:{width:"20px",cursor:"grab",display:"inline-block"}},(null===(e=this.props.attributeGroup.attributes)||void 0===e?void 0:e.length)>0&&u.a.createElement("div",{onClick:function(){return t.setState({isCollapsed:!t.state.isCollapsed})},style:{cursor:"pointer"},className:k()("glyph-icon",{"simple-icon-arrow-left":this.state.isCollapsed,"simple-icon-arrow-down":!this.state.isCollapsed})})))),u.a.createElement("div",{className:"mb-1 w-30 text-right pr-3"},u.a.createElement(y.a,{className:"productList__dropdown"},u.a.createElement(N.a,{caret:!0,color:"secondary",outline:!0},"Actions"),u.a.createElement(C.a,null,u.a.createElement(x.a,{onClick:function(){return t.props.onAddAttribute(t.props.attributeGroup)}},u.a.createElement("i",{className:"simple-icon-docs"})," ",u.a.createElement("span",null,"Add attribute")),u.a.createElement(x.a,{onClick:function(){return t.props.onEdit(t.props.attributeGroup)}},u.a.createElement("i",{className:"simple-icon-docs"})," ",u.a.createElement("span",null,"Edit")),u.a.createElement(x.a,{onClick:function(){return t.props.onDelete(t.props.attributeGroup)}},u.a.createElement("i",{className:"simple-icon-trash"})," ",u.a.createElement("span",null,"Delete"))))),u.a.createElement("div",null,u.a.createElement(I.a,{icon:S.c}))))),u.a.createElement(P.a,{isOpen:this.state.isCollapsed},u.a.createElement(m.a,null,u.a.createElement(p.a,{className:"pl-3"},u.a.createElement(w.c,{droppableId:this.props.attributeGroup.Id.toString(),type:"attributeGroup-"+this.props.attributeGroup.Id},(function(e,a){return u.a.createElement("div",{ref:e.innerRef},t.orderedAttributes.map((function(e,a){return u.a.createElement(w.b,{key:"attributeDragable-"+e.Id,draggableId:e.Id.toString(),index:a},(function(a,n){return u.a.createElement("div",Object.assign({ref:a.innerRef},a.draggableProps),u.a.createElement(b.a,Object.assign({},a.dragHandleProps,{key:"attribute-"+e.Id,onClick:function(e){return t.props.onCheckItem(e,t.props.attributeGroup.Id)},className:"d-flex flex-row productList__card mt-1",style:{marginLeft:"3rem"}}),u.a.createElement("div",{className:"pl-2 d-flex flex-grow-1 min-width-zero"},u.a.createElement("div",{className:"card-body align-self-center d-flex flex-column flex-lg-row justify-content-between min-width-zero align-items-lg-center"},u.a.createElement(v.a,{to:"?p=1",className:"w-20"},u.a.createElement("p",{className:"list-item-heading mb-1 truncate"},e.Name)),u.a.createElement("p",{className:k()("mb-1 text-muted text-small w-40")},e.Description),u.a.createElement("div",{className:"w-30"},"Price correction:",u.a.createElement("strong",{className:"ml-1"},e.PriceCorrectionCurrent>0?e.PriceCorrectionCurrent.toFixed(2)+"\u20ac":"",e.PriceCorrectionPercent>0?e.PriceCorrectionPercent.toFixed(2)+"%":"",0==e.PriceCorrectionPercent&&0==e.PriceCorrectionCurrent?"No price correction":"")),u.a.createElement("div",{className:"mb-1 w-10 text-right  pr-3"},u.a.createElement(y.a,{className:"productList__dropdown"},u.a.createElement(N.a,{caret:!0,color:"secondary",outline:!0},"Actions"),u.a.createElement(C.a,null,u.a.createElement(x.a,{onClick:function(){return t.props.onEditAttribute(e)}},u.a.createElement("i",{className:"simple-icon-docs"})," ",u.a.createElement("span",null,"Edit")),u.a.createElement(x.a,{onClick:function(){return t.props.onDeleteAttribute(e)}},u.a.createElement("i",{className:"simple-icon-trash"})," ",u.a.createElement("span",null,"Delete"))))),u.a.createElement("div",null,u.a.createElement(I.a,{icon:S.c}))))))}))})),e.placeholder)})))))))}},{key:"orderedAttributes",get:function(){return this.props.attributeGroup.attributes.sort((function(e,t){return e.Position-t.Position}))}}]),a}(u.a.Component),j=a(535),F=a(500),A=a(501),T=a(490),M=a(491),G=a(510),L=a(502),z=a(116),V=function(e){Object(l.a)(a,e);var t=Object(i.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e))._initialValues={Name:"",Id:0},n.onSubmit=function(e,t){n.props.onSave({Id:e.Id,Position:0,Name:e.Name,attributes:n.props.attributeGroup?n.props.attributeGroup.attributes:[],Key:e.Key}),n.props.toggleModal(),t.setSubmitting(!1)},n.state={customSize:!1},n}return Object(o.a)(a,[{key:"render",value:function(){var e=this;return u.a.createElement(z.c,{initialValues:this.initialValues,onSubmit:this.onSubmit,enableReinitialize:!0},(function(t){t.handleSubmit,t.setFieldValue,t.setFieldTouched,t.handleChange,t.handleBlur,t.values,t.errors,t.touched,t.isSubmitting;var a,n=t.submitForm;return u.a.createElement(z.b,null,u.a.createElement(j.a,{isOpen:e.props.modalOpen,toggle:e.props.toggleModal,wrapClassName:"modal-right",backdrop:"static"},u.a.createElement(F.a,{toggle:e.props.toggleModal},0==(null===(a=e.props.attributeGroup)||void 0===a?void 0:a.Id)?"Add attribute group":"Edit attribute group"),u.a.createElement(A.a,null,u.a.createElement(T.a,null,u.a.createElement(M.a,{for:"Name"},"Name"),u.a.createElement(z.a,{className:"form-control",name:"Name",type:"text",id:"Name",placeholder:"Name",maxLength:20}),u.a.createElement(G.a,{color:"muted"},"Maximum 20 letters"))),u.a.createElement(L.a,null,u.a.createElement(d.a,{color:"secondary",outline:!0,onClick:e.props.toggleModal},"Cancel"),u.a.createElement(d.a,{color:"primary",type:"submit",onClick:n},"Save"))))}))}},{key:"initialValues",get:function(){return this.props.attributeGroup?{Name:this.props.attributeGroup.Name,Id:this.props.attributeGroup.Id,File:null,Key:this.props.attributeGroup.Key}:this._initialValues}}]),a}(u.a.Component),R=a(22),U=a.n(R),B=a(31),H=a(508),_=a(509),K=a(350),Y=a(269),Q=function(e){Object(l.a)(a,e);var t=Object(i.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e))._initialValues={Name:"",Id:0,AttribiuteGroupId:0,Descriptipn:"",CorrectionPrice:0,CorrectionPercent:0,CorrectionType:0},n.onSubmit=function(){var e=Object(B.a)(U.a.mark((function e(t,a){return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("","",!t.File){e.next=7;break}return t.File.name,e.next=6,Object(Y.a)(t.File);case 6:e.sent;case 7:0==t.CorrectionType?t.CorrectionPercent=0:t.CorrectionPrice=0,n.props.onSave({Id:t.Id,Name:t.Name,Description:t.Description,PriceCorrectionPercent:t.CorrectionPercent,PriceCorrectionCurrent:t.CorrectionPrice,Position:t.Position,AttributeGroupId:t.AttributeGroupId}),n.props.toggleModal(),a.setSubmitting(!1);case 11:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),n.state={customSize:!1},n}return Object(o.a)(a,[{key:"render",value:function(){var e=this;return u.a.createElement(z.c,{initialValues:this.initialValues,onSubmit:this.onSubmit,enableReinitialize:!0},(function(t){t.handleSubmit,t.setFieldValue,t.setFieldTouched;var a,n=t.handleChange,r=t.handleBlur,o=t.values,l=(t.errors,t.touched,t.isSubmitting,t.submitForm);return u.a.createElement(z.b,null,u.a.createElement(j.a,{isOpen:e.props.modalOpen,toggle:e.props.toggleModal,wrapClassName:"modal-right",backdrop:"static"},u.a.createElement(F.a,{toggle:e.props.toggleModal},0==(null===(a=e.props.attribute)||void 0===a?void 0:a.Id)?"Add attribute":"Edit attribute"),u.a.createElement(A.a,null,u.a.createElement(T.a,null,u.a.createElement(M.a,{for:"Name"},"Name"),u.a.createElement(z.a,{className:"form-control",name:"Name",type:"text",id:"Name",placeholder:"Name",maxLength:20}),u.a.createElement(G.a,{color:"muted"},"Maximum 20 letters")),u.a.createElement(T.a,null,u.a.createElement(M.a,{for:"Description"},"Description"),u.a.createElement(z.a,{className:"form-control",name:"Description",type:"text",id:"Description",placeholder:"Description",maxLength:100}),u.a.createElement(G.a,{color:"muted"},"Maximum 100 letters")),u.a.createElement(T.a,null,u.a.createElement(M.a,{for:"CorrectionType"},"Price correction type"),u.a.createElement("select",{id:"CorrectionType",name:"CorrectionType",className:"form-control",value:o.CorrectionType,onChange:n,onBlur:r},u.a.createElement("option",{value:1},"Percentage (%)"),u.a.createElement("option",{value:0},"Currency (\u20ac)"))),0==o.CorrectionType&&u.a.createElement(T.a,null,u.a.createElement(M.a,{for:"Price"},"Price correction [\u20ac]"),u.a.createElement(H.a,{className:"mb-3"},u.a.createElement(z.a,{className:"form-control",name:"CorrectionPrice",type:"number",id:"CorrectionPrice",placeholder:"Correction Price"}),u.a.createElement(_.a,{addonType:"append"},u.a.createElement(K.a,null,"\u20ac")))),1==o.CorrectionType&&u.a.createElement(T.a,null,u.a.createElement(M.a,{for:"Price"},"Percentage correction [%]"),u.a.createElement(H.a,{className:"mb-3"},u.a.createElement(z.a,{className:"form-control",name:"CorrectionPercent",type:"number",id:"CorrectionPercent",placeholder:"Correction Percent"}),u.a.createElement(_.a,{addonType:"append"},u.a.createElement(K.a,null,"%"))))),u.a.createElement(L.a,null,u.a.createElement(d.a,{color:"secondary",outline:!0,onClick:e.props.toggleModal},"Cancel"),u.a.createElement(d.a,{color:"primary",type:"submit",onClick:l},"Save"))))}))}},{key:"initialValues",get:function(){return this.props.attribute?{Name:this.props.attribute.Name,Id:this.props.attribute.Id,Description:this.props.attribute.Description,CorrectionPrice:this.props.attribute.PriceCorrectionCurrent,CorrectionPercent:this.props.attribute.PriceCorrectionPercent,Position:this.props.attribute.Position,AttributeGroupId:this.props.attribute.AttributeGroupId,CorrectionType:this.props.attribute.PriceCorrectionPercent>0?1:0}:this._initialValues}}]),a}(u.a.Component),W=a(155),q=a(140),X=function(e,t,a){var n=Array.from(e),r=n.splice(t,1),o=Object(c.a)(r,1)[0];return n.splice(a,0,o),n},J=function(e){Object(l.a)(a,e);var t=Object(i.a)(a);function a(e){var o;return Object(r.a)(this,a),(o=t.call(this,e)).attributesClient=new W.a,o.responseAttributeItemToAttribute=function(e,t){return{Id:e.id,Name:e.name,Description:e.description,PriceCorrectionPercent:e.priceCorrectionPercent,PriceCorrectionCurrent:e.priceCorrectionCurrent,Position:e.position,AttributeGroupId:t}},o.responseItemToAttributeGroup=function(e){var t={Id:e.id,Name:e.name,Key:e.key,attributes:[],Position:e.position};return e.attributes.forEach((function(e){t.attributes.push(o.responseAttributeItemToAttribute(e,t.Id))})),t},o.edit=function(e){var t=Object(n.a)(o.state.attributesGroups),a=t.find((function(t){return t.Id==e.Id}));a=Object.assign(a,e),q.a.info("Saving attribute group","Saving...",3e3,null,null,""),o.attributesClient.Update(o.attributeGroupToCreateAttributeGroup(a),o.props.dataKey).then((function(e){q.a.success("Atribute group saved.","Saved",3e3,null,null,""),e.data.Error?q.a.error(e.data.Error,"Update category error",3e3,null,null,""):o.setState({attributesGroups:t})}))},o.create=function(e){var t=Object(n.a)(o.state.attributesGroups);q.a.info("Saving attribute group","Saving...",3e3,null,null,""),o.attributesClient.Add(o.attributeGroupToCreateAttributeGroup(e),o.props.dataKey).then((function(e){if(e.data.Error)q.a.error(e.data.Error,"Create category error",3e3,null,null,"");else{q.a.success("Atribute group saved.","Saved",3e3,null,null,"");var a=o.responseItemToAttributeGroup(e.data.Data);t.push(a),o.setState({attributesGroups:t})}}))},o.delete=function(e){var t=Object(n.a)(o.state.attributesGroups);q.a.info("Deleting attribute group","Deleting...",3e3,null,null,""),o.attributesClient.Delete(e.Id).then((function(a){var n=t.findIndex((function(t){return t.Id==e.Id}));n>-1&&(q.a.success("Atribute group deleted.","Deleted",3e3,null,null,""),t.splice(n,1),o.setState({attributesGroups:t}))}))},o.attributeToCreateAttrbute=function(e){return{AttributeGroupId:e.AttributeGroupId,Description:e.Description,Id:e.Id,Name:e.Name,Position:e.Position,PriceCorrectionCurrent:e.PriceCorrectionCurrent,PriceCorrectionPercent:e.PriceCorrectionPercent}},o.attributeGroupToCreateAttributeGroup=function(e){return{Id:e.Id,Name:e.Name,Key:e.Key,attributes:e.attributes.map((function(e){return o.attributeToCreateAttrbute(e)}))}},o.createAttribute=function(e){var t=Object(n.a)(o.state.attributesGroups),a=t.find((function(t){return t.Id==e.AttributeGroupId}));if(a){var r=o.attributeGroupToCreateAttributeGroup(a);r.attributes.push(e),q.a.info("Saving attribute","Saving...",3e3,null,null,""),o.attributesClient.Update(r,o.props.dataKey).then((function(e){if(e.data.Error)q.a.error(e.data.Error,"Update attribute error",3e3,null,null,"");else{q.a.success("Atribute saved.","Saved",3e3,null,null,"");var a=o.responseItemToAttributeGroup(e.data.Data),n=t.findIndex((function(e){return e.Id==a.Id}));n>-1&&(t[n]=a),o.setState({attributesGroups:t})}}))}},o.editAttribute=function(e){var t=Object(n.a)(o.state.attributesGroups),a=t.find((function(t){return t.Id==e.AttributeGroupId}));if(a&&a.attributes.find((function(t){return t.Id==e.Id}))){var r=o.attributeGroupToCreateAttributeGroup(a),l=r.attributes.findIndex((function(t){return t.Id==e.Id}));l>-1&&(r.attributes[l]=e),q.a.info("Saving attribute","Saving...",3e3,null,null,""),o.attributesClient.Update(r,o.props.dataKey).then((function(e){if(e.data.Error)q.a.error(e.data.Error,"Update category error",3e3,null,null,"");else{q.a.success("Attribute saved.","Saved",3e3,null,null,""),a=o.responseItemToAttributeGroup(e.data.Data);var n=t.findIndex((function(e){return e.Id==a.Id}));n>-1&&(t[n]=a),o.setState({attributesGroups:t})}}))}},o.deleteAttribute=function(e){var t=Object(n.a)(o.state.attributesGroups),a=t.find((function(t){return t.Id==e.AttributeGroupId}));if(a){var r=a.attributes.findIndex((function(t){return t.Id==e.Id}));r>-1&&(a.attributes.splice(r,1),q.a.info("Deleting attribute","Deleting",3e3,null,null,""),o.attributesClient.Update(o.attributeGroupToCreateAttributeGroup(a),o.props.dataKey).then((function(e){e.data.Error?q.a.error(e.data.Error,"Update category error",3e3,null,null,""):(q.a.success("Attribute deleted","Deleted",3e3,null,null,""),a=Object.assign(a,o.responseItemToAttributeGroup(e.data.Data)),o.setState({attributesGroups:t}))})))}},o.onSave=function(e){0==e.Id?o.create(e):o.edit(e)},o.onSaveAttribute=function(e){0==e.Id?o.createAttribute(e):o.editAttribute(e)},o.onDelete=function(e){"group"==e&&o.state.deleteAttributeGroup?(o.delete(o.state.deleteAttributeGroup),o.setState({deleteAttributeGroup:null})):"attribute"==e&&o.state.deleteAttribute&&(o.deleteAttribute(o.state.deleteAttribute),o.setState({deleteAttribute:null}))},o.onAddAttribute=function(e){o.setState({editAttribute:{AttributeGroupId:e.Id,Id:0,PriceCorrectionPercent:0,PriceCorrectionCurrent:0,Description:"",Name:"",Position:e.attributes.length+1}})},o.onReorderAttributes=function(e){if(e.source&&e.destination){var t=Number(e.source.droppableId),a=o.state.attributesGroups.find((function(e){return e.Id==t}));if(a){var n=X(a.attributes,e.source.index,e.destination.index);n.forEach((function(e,t){e.Position=t+1})),a.attributes=n,o.edit(a)}}},o.onReorderAttributesGroups=function(e){if(e.source&&e.destination){var t=X(o.state.attributesGroups,e.source.index,e.destination.index);t.forEach((function(e,t){e.Position=t+1})),o.attributesClient.Positions(t.map((function(e){return{id:e.Id,position:e.Position}}))).then((function(e){o.setState({attributesGroups:t})}))}},o.onDragEnd=function(e){e.type.indexOf("attributeGroup")>-1?o.onReorderAttributes(e):e.type.indexOf("group")>-1&&o.onReorderAttributesGroups(e),console.log(e)},o.state={attributesGroups:[],editedAttributeGroup:null,deleteAttributeGroup:null,deleteAttribute:null,editAttribute:null,loading:!0},o}return Object(o.a)(a,[{key:"componentDidUpdate",value:function(e){var t=this;this.props.dataKey!=e.dataKey&&this.setState({attributesGroups:[],editedAttributeGroup:null,deleteAttributeGroup:null,deleteAttribute:null,editAttribute:null},(function(){t.componentDidMount()}))}},{key:"componentDidMount",value:function(){var e=this;this.setState({loading:!0}),this.attributesClient.List(this.props.dataKey).then((function(t){if(t.data.Error)q.a.error(t.data.Error,"List attribute error",3e3,null,null,"");else{console.log(t);var a=[];t.data.Data.forEach((function(t){a.push(e.responseItemToAttributeGroup(t))})),e.setState({attributesGroups:a}),e.setState({loading:!1})}}))}},{key:"render",value:function(){var e,t,a=this;return u.a.createElement(u.a.Fragment,null,this.state.loading&&u.a.createElement("div",{className:"loading"}),u.a.createElement(m.a,null,u.a.createElement(p.a,{xxs:"12"},u.a.createElement("div",{className:"mb-2"},u.a.createElement("div",{className:"text-zero top-right-button-container"},u.a.createElement(d.a,{color:"primary",size:"lg",className:"top-right-button",onClick:function(){return a.setState({editedAttributeGroup:{Id:0,Position:0,Name:"",attributes:[],Key:a.props.dataKey}})}},u.a.createElement("i",{className:"simple-icon-plus"})," ADD NEW ATTRIBUTE GROUP"),"  "),u.a.createElement(f.a,{heading:"Attributes",match:this.props.match})),u.a.createElement(p.b,{className:"mb-5"}))),u.a.createElement(m.a,null,u.a.createElement(p.a,{xxs:"12"},u.a.createElement(w.a,{onDragEnd:this.onDragEnd},u.a.createElement(w.c,{droppableId:"attributeGroups",type:"group"},(function(e,t){return u.a.createElement("div",Object.assign({},e.droppableProps,{ref:e.innerRef}),a.orderedAttributeGroups.map((function(e,t){return u.a.createElement(w.b,{key:"attrGroup"+e.Id,draggableId:e.Id.toString(),index:t},(function(t,n){return u.a.createElement("div",Object.assign({ref:t.innerRef},t.draggableProps),u.a.createElement(D,{groupDragHandler:t.dragHandleProps,attributeGroup:e,onDelete:function(){return a.setState({deleteAttributeGroup:e,deleteAttribute:null})},onEdit:function(){return a.setState({editedAttributeGroup:e,editAttribute:null})},onCheckItem:function(){},onEditAttribute:function(e){return a.setState({editedAttributeGroup:null,editAttribute:e})},onDeleteAttribute:function(e){return a.setState({deleteAttributeGroup:null,deleteAttribute:e})},onAddAttribute:function(e){return a.onAddAttribute(e)}}))}))})),e.placeholder)}))))),u.a.createElement(V,{attributeGroup:this.state.editedAttributeGroup,modalOpen:null!=this.state.editedAttributeGroup,toggleModal:function(){a.setState({editedAttributeGroup:null})},onSave:function(e){return a.onSave(e)}}),u.a.createElement(Q,{attribute:this.state.editAttribute,modalOpen:null!=this.state.editAttribute,toggleModal:function(){a.setState({editAttribute:null})},onSave:function(e){return a.onSaveAttribute(e)}}),u.a.createElement(E.a,{isOpen:null!=this.state.deleteAttributeGroup,body:"Do you really want delete attribute group ".concat(null===(e=this.state.deleteAttributeGroup)||void 0===e?void 0:e.Name,"?"),header:"Deleting attribute group",onDelete:function(){return a.onDelete("group")},toggle:function(){return a.setState({deleteAttributeGroup:null})}}),u.a.createElement(E.a,{isOpen:null!=this.state.deleteAttribute,body:"Do you really want delete attribute ".concat(null===(t=this.state.deleteAttribute)||void 0===t?void 0:t.Name,"?"),header:"Deleting attribute group",onDelete:function(){return a.onDelete("attribute")},toggle:function(){return a.setState({deleteAttribute:null})}}))}},{key:"orderedAttributeGroups",get:function(){return this.state.attributesGroups.sort((function(e,t){return e.Position-t.Position}))}}]),a}(u.a.Component);t.default=J},485:function(e,t,a){"use strict";a.r(t),a.d(t,"Categories",(function(){return K}));var n=a(121),r=a(3),o=a(2),l=a(7),i=a(8),c=a(130),s=a(0),u=a.n(s),m=a(243),d=a(184),p=a(110),f=a(124),E=a(134),h=a(260),g=a(504),b=a(516),v=a(495),y=a(542),N=a(543),C=a(496),x=a(120),P=a(122),I=a(145),S=function(e){Object(l.a)(a,e);var t=Object(i.a)(a);function a(){var e;Object(r.a)(this,a);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(e=t.call.apply(t,[this].concat(o))).state={isImage:!0},e.onImageError=function(){e.setState({isImage:!1})},e}return Object(o.a)(a,[{key:"render",value:function(){var e=this;return u.a.createElement(I.b,{key:this.props.category.Id,draggableId:"category-"+this.props.category.Id,index:this.props.index},(function(t,a){return u.a.createElement("div",Object.assign({ref:t.innerRef},t.draggableProps,{key:e.props.category.Id}),u.a.createElement(p.a,{xxs:"12",className:"mb-3 productList"},u.a.createElement(E.b,{id:"product_menu",collect:function(t){return{data:t.data,product:e.props.category}}},u.a.createElement(h.a,Object.assign({},t.dragHandleProps,{onClick:function(t){return e.props.onCheckItem(t,e.props.category.Id)},className:"d-flex flex-row productList__card"}),u.a.createElement(g.a,{to:"?p=".concat(e.props.category.Id),className:"d-flex"},u.a.createElement("img",{alt:e.props.category.Name,src:e.state.isImage?e.props.category.FilePath||"":"https://via.placeholder.com/400?text=No%20image",className:"list-thumbnail responsive border-0 card-img-left",onError:function(){return e.onImageError()}})),u.a.createElement("div",{className:"pl-2 d-flex flex-grow-1 min-width-zero"},u.a.createElement("div",{className:"card-body align-self-center d-flex flex-column flex-lg-row justify-content-between min-width-zero align-items-lg-center"},u.a.createElement(g.a,{to:"?p=1",className:"w-15"},u.a.createElement("p",{className:"list-item-heading mb-1 truncate"},e.props.category.Name)),u.a.createElement("p",{className:"mb-1 text-muted text-small w-50"},e.props.category.Description),u.a.createElement("p",{className:"mb-1  w-10 text-right"},u.a.createElement(b.a,{color:e.props.category.IsHidden?"danger":"light",pill:!0},e.props.category.IsHidden?"Hidden":"Visible")),u.a.createElement("div",{className:"mb-1 w-25 text-right pr-3"},u.a.createElement(v.a,{className:"productList__dropdown"},u.a.createElement(y.a,{caret:!0,color:"secondary",outline:!0},"Actions"),u.a.createElement(N.a,null,u.a.createElement(C.a,{onClick:function(){return e.props.onEdit(e.props.category)}},u.a.createElement("i",{className:"simple-icon-docs"})," ",u.a.createElement("span",null,"Edit")),u.a.createElement(C.a,{onClick:function(){return e.props.onChangeVisible(e.props.category,!!e.props.category.IsHidden)}},u.a.createElement("i",{className:"simple-icon-docs"})," ",u.a.createElement("span",null,"Set ",e.props.category.IsHidden?"Visible":"Hidden")),u.a.createElement(C.a,{onClick:function(){return e.props.onDelete(e.props.category)}},u.a.createElement("i",{className:"simple-icon-trash"})," ",u.a.createElement("span",null,"Delete"))))),u.a.createElement("div",null,u.a.createElement(x.a,{icon:P.c}))))))))}))}}]),a}(u.a.Component),w=a(22),O=a.n(w),k=a(31),D=a(535),j=a(500),F=a(501),A=a(490),T=a(491),M=a(510),G=a(508),L=a(541),z=a(502),V=a(116),R=a(269),U=function(e){Object(l.a)(a,e);var t=Object(i.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e))._initialValues={Name:"",Description:"",File:null,Id:0,IsHidden:!1},n.onSubmit=function(){var e=Object(k.a)(O.a.mark((function e(t,a){var r,o;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r="",o="",!t.File){e.next=7;break}return r=t.File.name,e.next=6,Object(R.a)(t.File);case 6:o=e.sent;case 7:n.props.onSave({Id:t.Id,Description:t.Description||"",Name:t.Name||"",FileAsBase64:o,FileName:r,Key:n.props.dataKey,IsHidden:t.IsHidden}),n.props.toggleModal(),a.setSubmitting(!1);case 10:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),n.state={customSize:!1},n}return Object(o.a)(a,[{key:"render",value:function(){var e=this;return u.a.createElement(V.c,{initialValues:this.initialValues,onSubmit:this.onSubmit,enableReinitialize:!0},(function(t){t.handleSubmit;var a,n=t.setFieldValue,r=(t.setFieldTouched,t.handleChange,t.handleBlur,t.values,t.errors,t.touched,t.isSubmitting,t.submitForm);return u.a.createElement(V.b,null,u.a.createElement(D.a,{isOpen:e.props.modalOpen,toggle:e.props.toggleModal,wrapClassName:"modal-right",backdrop:"static"},u.a.createElement(j.a,{toggle:e.props.toggleModal},0==(null===(a=e.props.category)||void 0===a?void 0:a.Id)?"Add category":"Edit category"),u.a.createElement(F.a,null,u.a.createElement(A.a,null,u.a.createElement(T.a,{for:"Name"},"Name"),u.a.createElement(V.a,{className:"form-control",name:"Name",type:"text",id:"Name",placeholder:"Name",maxLength:20}),u.a.createElement(M.a,{color:"muted"},"Maximum 20 letters")),u.a.createElement(A.a,null,u.a.createElement(T.a,{for:"Description"},"Description"),u.a.createElement(V.a,{className:"form-control",name:"Description",type:"text",id:"Description",placeholder:"Description",maxLength:100}),u.a.createElement(M.a,{color:"muted"},"Maximum 100 letters")),u.a.createElement(A.a,null,u.a.createElement(T.a,{for:"File"},"Image"),u.a.createElement(G.a,null,u.a.createElement(L.a,{type:"file",id:"File",name:"File",onChange:function(e){null!=e&&null!=e.currentTarget&&e.currentTarget.files&&n("File",e.currentTarget.files[0])}})),u.a.createElement(M.a,{color:"muted"},"Maximum 800x800 pixels"))),u.a.createElement(z.a,null,u.a.createElement(d.a,{color:"secondary",outline:!0,onClick:e.props.toggleModal},"Cancel"),u.a.createElement(d.a,{color:"primary",type:"submit",onClick:r},"Save"))))}))}},{key:"initialValues",get:function(){return this.props.category?{Name:this.props.category.Name,Description:this.props.category.Description,Id:this.props.category.Id,File:null,IsHidden:this.props.category.IsHidden}:this._initialValues}}]),a}(u.a.Component),B=a(270),H=a(154),_=a(140),K=function(e){Object(l.a)(a,e);var t=Object(i.a)(a);function a(e){var o;return Object(r.a)(this,a),(o=t.call(this,e)).categoryClient=void 0,o.responseItemToCategory=function(e){return{Name:e.name,Id:e.id,Description:e.description,FilePath:e.imageUrl,Position:e.position,IsHidden:e.isHidden,ProductsPositions:e.ProductsPositions}},o.edit=function(e){var t=Object(n.a)(o.state.categories),a=t.find((function(t){return t.Id==e.Id}));a=Object.assign(a,e),_.a.info("Saving...","Saving category.",3e3,null,null,""),o.categoryClient.Update(a,o.props.dataKey).then((function(e){if(e.data.Error)_.a.error(e.data.Error,"Update category error",3e3,null,null,"");else{_.a.success("Category saved.","Success",3e3,null,null,"");var a=o.responseItemToCategory(e.data.Data),n=t.findIndex((function(e){return e.Id==a.Id}));n>-1&&(t[n]=a),o.setState({categories:t})}}))},o.create=function(e){var t=Object(n.a)(o.state.categories);_.a.info("Saving...","Saving category.",3e3,null,null,""),o.categoryClient.Add(e,o.props.dataKey).then((function(e){if(e.data.Error)_.a.error(e.data.Error,"Create category error",3e3,null,null,"");else{_.a.success("Category saved.","Success",3e3,null,null,"");var a=o.responseItemToCategory(e.data.Data);t.push(a),o.setState({categories:t})}}))},o.delete=function(e){var t=Object(n.a)(o.state.categories);_.a.info("Deleting...","Deleting category.",3e3,null,null,""),o.categoryClient.Delete(e.Id).then((function(a){_.a.success("Category deleted.","Success",3e3,null,null,"");var n=t.findIndex((function(t){return t.Id==e.Id}));n>-1&&(t.splice(n,1),o.setState({categories:t}))}))},o.changeVisible=function(e,t){e.IsHidden=!t;var a={Id:e.Id,Key:o.props.dataKey,Name:e.Name,Description:e.Description,IsHidden:e.IsHidden,FileAsBase64:"",FileName:""};o.onSave(a)},o.onSave=function(e){0==e.Id?o.create(e):o.edit(e)},o.onDelete=function(){o.state.deletingCategory&&(o.delete(o.state.deletingCategory),o.setState({deletingCategory:null}))},o.onDragEnd=function(e){if(e.source&&e.destination){var t=function(e,t,a){var n=Array.from(e),r=n.splice(t,1),o=Object(c.a)(r,1)[0];return n.splice(a,0,o),n}(o.state.categories,e.source.index,e.destination.index);t.forEach((function(e,t){e.Position=t+1})),o.categoryClient.Positions(t.map((function(e){return{id:e.Id,position:e.Position}}))).then((function(e){o.setState({categories:t})}))}},o.categoryClient=new H.a,o.state={categories:[],editedCategory:null,deletingCategory:null,loading:!0},o}return Object(o.a)(a,[{key:"componentDidUpdate",value:function(e){var t=this;this.props.dataKey!=e.dataKey&&this.setState({categories:[],editedCategory:null,deletingCategory:null},(function(){t.componentDidMount()}))}},{key:"componentDidMount",value:function(){var e=this;this.setState({loading:!0}),this.categoryClient.List(this.props.dataKey).then((function(t){if(t.data.Error)_.a.error(t.data.Error,"List categories error",3e3,null,null,"");else{var a=[];t.data.Data.forEach((function(t){a.push(e.responseItemToCategory(t))})),e.setState({categories:a,loading:!1})}}))}},{key:"render",value:function(){var e,t=this;return u.a.createElement(u.a.Fragment,null,this.state.loading&&u.a.createElement("div",{className:"loading"}),u.a.createElement(m.a,null,u.a.createElement(p.a,{xxs:"12"},u.a.createElement("div",{className:"mb-2"},u.a.createElement("div",{className:"text-zero top-right-button-container"},u.a.createElement(d.a,{color:"primary",size:"lg",className:"top-right-button",onClick:function(){return t.setState({editedCategory:{Id:0,Name:"",Description:"",FilePath:"",Position:0,IsHidden:!1,ProductsPositions:[]}})}},u.a.createElement("i",{className:"simple-icon-plus"})," ADD NEW CATEGORY"),"  "),u.a.createElement(f.a,{heading:"Categories",match:this.props.match})),u.a.createElement(p.b,{className:"mb-5"}))),u.a.createElement(m.a,null,u.a.createElement(p.a,{xxs:"12"},u.a.createElement(I.a,{onDragEnd:this.onDragEnd},u.a.createElement(I.c,{droppableId:"categories"},(function(e,a){return u.a.createElement("div",Object.assign({},e.droppableProps,{ref:e.innerRef}),t.orderedCategories.map((function(e,a){return u.a.createElement(S,{onChangeVisible:function(e,a){return t.changeVisible(e,a)},key:"category"+a,category:e,onDelete:function(){return t.setState({deletingCategory:e})},onEdit:function(){return t.setState({editedCategory:e})},onCheckItem:function(){},index:a})})),e.placeholder)}))))),u.a.createElement(U,{dataKey:this.props.dataKey,category:this.state.editedCategory,modalOpen:null!=this.state.editedCategory,toggleModal:function(){t.setState({editedCategory:null})},onSave:function(e){return t.onSave(e)}}),u.a.createElement(B.a,{isOpen:null!=this.state.deletingCategory,body:"Do you really want delete category ".concat(null===(e=this.state.deletingCategory)||void 0===e?void 0:e.Name,"?"),header:"Deleting category",onDelete:function(){return t.onDelete()},toggle:function(){return t.setState({deletingCategory:null})}}))}},{key:"orderedCategories",get:function(){return Object(n.a)(this.state.categories).sort((function(e,t){return e.Position-t.Position}))}}]),a}(u.a.Component);t.default=K},487:function(e,t,a){"use strict";a.r(t),a.d(t,"DefaultDashboard",(function(){return v}));var n=a(121),r=a(3),o=a(2),l=a(7),i=a(8),c=a(0),s=a.n(c),u=a(163),m=a(243),d=a(260),p=a(507),f=a(110),E=a(123),h=s.a.memo((function(e){var t=e.className,a=void 0===t?"mb-4":t,n=e.icon,r=e.title,o=e.value;return s.a.createElement("div",{className:"icon-row-item ".concat(a)},s.a.createElement(d.a,null,s.a.createElement(p.a,{className:"text-center"},s.a.createElement("i",{className:n}),s.a.createElement("p",{className:"card-text font-weight-semibold mb-0"},s.a.createElement(E.a,{id:r})),s.a.createElement("p",{className:"lead text-center"},o," days"))))})),g=a(128),b=a(140),v=function(e){Object(l.a)(a,e);var t=Object(i.a)(a);function a(e){var o;return Object(r.a)(this,a),(o=t.call(this,e)).homeClient=new g.a,o.state={data:[{title:"You can use photo order for",icon:"iconsminds-clock",value:0},{title:"You can use photo hosting for",icon:"iconsminds-clock",value:0}]},o.homeClient.PhotographerDetails().then((function(e){if(e.data.Error)b.a.error(e.data.Error,"Error",3e3,null,null,"");else{var t=Object(n.a)(o.state.data);t[0].value=e.data.Data.AddEditPhotographerPopUpViewModel.EventSubscription,t[1].value=e.data.Data.AddEditPhotographerPopUpViewModel.MobileSubscription,o.setState({data:t})}})),o}return Object(o.a)(a,[{key:"render",value:function(){return s.a.createElement(s.a.Fragment,null,s.a.createElement(m.a,null,s.a.createElement(f.a,{xxs:"12"},s.a.createElement(d.a,{className:"mb-4"},s.a.createElement(p.a,null,s.a.createElement(m.a,null,s.a.createElement(f.a,{sm:"6"},s.a.createElement("img",{className:"img-fluid border-radius",src:"/assets/img/dashboard.jpg"})),s.a.createElement(f.a,{sm:"6"},s.a.createElement("p",{className:"font-weight-bold"},"Welcome to our portal. We hope that you will find here everything you need to manage a modern photo studio."),s.a.createElement("p",null,"Thanks to our service, you can speed up and automate ordering wedding photos. By adding a link to the gallery, your website becomes a fully interactive place where your clients can easily and pleasantly select photos from the ceremony from any device.",s.a.createElement("br",null),"Our new plug-in for the Light room software streamlines the work of any photographer.",s.a.createElement("br",null),"Gain time and customer recognition.",s.a.createElement("br",null),'For more information, please visit the "Photo Hosting" tab'),s.a.createElement("p",null,"If you copy amateur photos, then you can't do without the Photo Order system.",s.a.createElement("br",null),"All your customers can now send photos directly from their phone wherever they are.",s.a.createElement("br",null),"If you have a website, add our link and it will become a fully functioning e-shop within a second.",s.a.createElement("br",null),"Do not wait, be online 24/7 !!!",s.a.createElement("br",null),'For more information visit the "Photo Order" tab'),s.a.createElement("p",null,"We constantly strive to ensure that our products meets all your requirements.",s.a.createElement("br",null),"This is very important to us, so if you have any comments please share with us and we will certainly take them into account in our next update."),s.a.createElement("p",{className:"font-weight-bold"},"Black Point Team"))))))),s.a.createElement(m.a,null,s.a.createElement(f.a,{lg:"6",xl:"6"},s.a.createElement("div",{className:"icon-cards-row"},s.a.createElement("div",{key:"icon_card_0"},s.a.createElement(h,Object.assign({},this.state.data[0],{className:"mb-4"}))))),s.a.createElement(f.a,{lg:"6",xl:"6"},s.a.createElement("div",{className:"icon-cards-row"},s.a.createElement("div",{key:"icon_card_1"},s.a.createElement(h,Object.assign({},this.state.data[1],{className:"mb-4"})))))))}}]),a}(s.a.Component);t.default=Object(u.c)(v)},519:function(e,t,a){"use strict";a.r(t),a.d(t,"OverviewView",(function(){return g}));var n=a(1),r=a(3),o=a(2),l=a(7),i=a(8),c=a(0),s=a.n(c),u=a(243),m=a(260),d=a(507),p=a(124),f=a(110),E=(a(382),a(128)),h=a(113),g=function(e){Object(l.a)(a,e);var t=Object(i.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).homeClient=new E.a,n.state={data:{title:"You can use photo order for",icon:"iconsminds-clock",value:0}},n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.homeClient.PhotographerDetails().then((function(t){t.data.Error?h.b.error(t.data.Error,"Error",3e3,null,null,""):e.setState(Object(n.a)(Object(n.a)({},e.state.data),{},{data:{value:t.data.Data.AddEditPhotographerPopUpViewModel.MobileSubscription}}))}))}},{key:"render",value:function(){return s.a.createElement(s.a.Fragment,null,s.a.createElement(u.a,null,s.a.createElement(f.a,{xxs:"12"},s.a.createElement(p.a,{heading:"Overview",match:this.props.match}),s.a.createElement(f.b,{className:"mb-5"}))),s.a.createElement(u.a,null,s.a.createElement(f.a,{xxs:"12",className:"mb-3"},s.a.createElement(m.a,{className:"mb-4"},s.a.createElement(d.a,null,s.a.createElement(u.a,null,s.a.createElement(f.a,{sm:"6"},s.a.createElement("img",{className:"img-fluid border-radius",src:"/assets/img/photohosting.jpg"})),s.a.createElement(f.a,{sm:"6",className:"d-flex",style:{flexDirection:"column"}},s.a.createElement("h3",{style:{fontWeight:"bold"}},"Photo Hosting - For professional photographers"),s.a.createElement("p",null,"If you want to automate the process of ordering photos from the ceremony, use our system.",s.a.createElement("br",null),"In just a few steps you can create a new photo folder, add product formats and pass the direct link to the customer.",s.a.createElement("br",null),"Ordering is very simple and accessible from all devices.",s.a.createElement("br",null),"When the finished order is delivered to you, our software will find the photos and complete them for you in a few seconds.",s.a.createElement("br",null),"You can use the Light room software, then you can synchronize the whole process with your collections directly.",s.a.createElement("br",null),"If you want, you can send pre-made reminder e-mails to the clients directly from our platform.",s.a.createElement("br",null),s.a.createElement("br",null),s.a.createElement("strong",null,"Upgrade your website now !!!"),s.a.createElement("br",null),s.a.createElement("br",null),"Interested? Contact us !!!"),s.a.createElement(u.a,{style:{flex:"1 1 auto",display:"flex",justifyContent:"center",alignItems:"center"}},s.a.createElement(f.a,{xss:"12"},s.a.createElement("div",{className:"icon-cards-row text-center"},s.a.createElement("div",{key:"icon_card_0"},s.a.createElement("i",{className:"iconsminds-clock"}),s.a.createElement("p",{className:"card-text font-weight-semibold mb-0"},"You can use photo hosting for"),s.a.createElement("p",{className:"lead text-center"},this.state.data.value," days"))))))))))))}}]),a}(s.a.Component);t.default=g},520:function(e,t,a){"use strict";a.r(t),a.d(t,"UpdatesView",(function(){return v}));var n=a(121),r=a(1),o=a(3),l=a(2),i=a(7),c=a(8),s=a(0),u=a.n(s),m=a(243),d=a(260),p=a(507),f=a(124),E=a(110),h=(a(383),a(128)),g=a(113),b=a(268),v=function(e){Object(i.a)(a,e);var t=Object(c.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).homeClient=new h.a,n.state={data:{title:"You can use photo order for",icon:"iconsminds-clock",value:0}},n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.homeClient.PhotographerDetails().then((function(t){t.data.Error?g.b.error(t.data.Error,"Error",3e3,null,null,""):e.setState(Object(r.a)(Object(r.a)({},e.state.data),{},{data:{value:t.data.Data.AddEditPhotographerPopUpViewModel.EventSubscription}}))}))}},{key:"render",value:function(){return u.a.createElement(u.a.Fragment,null,u.a.createElement(m.a,null,u.a.createElement(E.a,{xxs:"12"},u.a.createElement(f.a,{heading:"Plug-ins",match:this.props.match}),u.a.createElement(E.b,{className:"mb-5"}))),u.a.createElement(m.a,null,Object(n.a)(Array(3)).map((function(e,t){return u.a.createElement(E.a,{sm:"4",className:"mb-3 pr-4 pl-4",key:t},u.a.createElement(d.a,{className:"mb-4"},u.a.createElement(b.a,{thumb:"/assets/img/comingsoon.jpg",large:"/assets/img/comingsoon.jpg",className:"card-img-top"}),u.a.createElement(p.a,null,u.a.createElement("p",{className:"font-weight-bold"},"Be patient..."),u.a.createElement("p",{className:"mb-3"},"Soon we will expand your website with additional functionalities.                                "))))}))))}}]),a}(u.a.Component);t.default=v},532:function(e,t,a){"use strict";a.r(t),a.d(t,"DefaultView",(function(){return ne}));var n=a(121),r=a(1),o=a(3),l=a(2),i=a(7),c=a(8),s=a(0),u=a.n(s),m=a(243),d=a(184),p=a(110),f=a(260),E=a(517),h=a(516),g=a(495),b=a(542),v=a(543),y=a(496),N=a(507),C=a(518),x=a(112),P=a(134),I=a(109),S=a.n(I),w=a(30),O=a(378),k=(a(272),a(117)),D=a(113),j=function(e){Object(i.a)(a,e);var t=Object(c.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).eventClient=void 0,n.state={isImage:!0,data:{}},n.onImageError=function(){n.setState({isImage:!1})},n.onCopyDirectLink=function(e){e.preventDefault()},n.onEdit=function(e){e.preventDefault(),console.log("onedit",n.props.event),n.props.onEdit(n.props.event)},n.onDelete=function(e){e.preventDefault(),n.props.onDelete(n.props.event)},n.directLink=function(){var e=n.props.event.NoPassKey;return null==e&&(e=""),"".concat(window.location.origin,"/portal/direct/").concat(e)},n.eventClient=new k.a,n}return Object(l.a)(a,[{key:"render",value:function(){var e=this;return u.a.createElement(p.a,{sm:"6",lg:"4",xl:"3",className:"mb-3 eventListItem",key:this.props.event.Id},u.a.createElement(P.b,{id:"menu_id",collect:function(t){return{data:t.data,event:e.props.event}}},u.a.createElement(x.c,{to:"/photo-hosting/event/".concat(this.props.event.Id),className:"w-40 w-sm-100"},u.a.createElement(f.a,{onClick:function(){}},u.a.createElement("div",{className:"position-relative"},u.a.createElement(E.a,{top:!0,alt:this.props.event.Name,src:this.state.isImage?this.props.event.FileSrc:"https://via.placeholder.com/600?text=No%20image",onError:function(t){return e.onImageError()}}),this.props.event.PassProtected&&u.a.createElement(h.a,{color:"danger",pill:!0,className:"position-absolute badge-top-left"},"PASSWORD"),this.props.event.IsHidden&&u.a.createElement(h.a,{color:"primary",pill:!0,className:S()("position-absolute",{"badge-top-left":!this.props.event.PassProtected,"badge-top-left-2":this.props.event.PassProtected})},"HIDDEN"),u.a.createElement("div",{className:"eventListItem__menu"},u.a.createElement(g.a,null,u.a.createElement(b.a,{size:"xs",color:"primary",onClickCapture:function(e){return e.preventDefault()}},u.a.createElement("i",{className:"simple-icon-menu"})),u.a.createElement(v.a,null,u.a.createElement(O.CopyToClipboard,{text:this.directLink(),onCopy:function(){D.b.success("URL copiedd to clipboard","",3e3,null,null,"")}},u.a.createElement(y.a,{onClick:function(e){e.preventDefault()}},u.a.createElement("i",{className:"simple-icon-link"})," ",u.a.createElement("span",null,"Copy direct link"))),u.a.createElement(y.a,{onClick:function(t){return e.onEdit(t)}},u.a.createElement("i",{className:"simple-icon-docs"})," ",u.a.createElement("span",null,"Settings")),u.a.createElement(y.a,{onClick:function(t){return e.onDelete(t)}},u.a.createElement("i",{className:"simple-icon-trash"})," ",u.a.createElement("span",null,"Delete")))))),u.a.createElement(N.a,null,u.a.createElement(C.a,{className:"mb-4"},this.props.event.Name))))))}}]),a}(u.a.Component),F=Object(w.b)((function(e){return e.authUser}))(j),A=a(166),T=a(124),M=a(531),G=a(535),L=a(500),z=a(501),V=a(490),R=a(491),U=a(510),B=a(508),H=a(541),_=a(352),K=a(509),Y=a(502),Q=a(178),W=(a(172),a(116)),q=a(120),X=a(122),J=function(e){Object(i.a)(a,e);var t=Object(c.a)(a);function a(e){var r;return Object(o.a)(this,a),(r=t.call(this,e)).eventClient=new k.a,r.imageTypes=["13x18","Album A","Album B","Canvas"],r.initialValues={TimeToDelete:365,AdditionalInfo:"",EmailToClient:"",FirstFormat:"",FourthFormat:"",Id:0,IsHidden:!1,LinkForEmail:"",Name:"",NoPassKey:Object(M.a)(),Password:"",SecondFormat:"",ThirdFormat:"",File:null,IsPasswordProtected:!1,NoPricing:!1,FirstFormatPrice:0,SecondFormatPrice:0,ThirdFormatPrice:0,FourthFormatPrice:0},r.removeFormat=function(e){var t=Object(n.a)(r.state.formats);t.splice(e,1),r.setState({formats:t})},r.directLink=function(e){return"https://oistigmes.com/eventshow/".concat(e)},r.resetUUid=function(){r.setState({uuid:Object(M.a)()})},r.addFormat=function(){var e=Object(n.a)(r.state.formats);e.push(""),r.setState({formats:e})},r.onSubmit=function(e,t){D.b.info("Saving data...","",3e3,null,null,""),r.eventClient.AddEvent(e).then((function(e){e.data.Error?D.b.error("Saving error",e.data.Error,3e3,null,null,""):(r.props.onCreate(),r.props.toggleModal()),t.setSubmitting(!1)}))},r.state={formats:r.imageTypes},r}return Object(l.a)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this;return u.a.createElement(W.c,{initialValues:this.initialValues,onSubmit:this.onSubmit,enableReinitialize:!0,validate:function(){}},(function(t){t.handleSubmit;var a=t.setFieldValue,n=(t.setFieldTouched,t.handleChange,t.handleBlur,t.values),r=(t.errors,t.touched,t.isSubmitting),o=t.submitForm;return u.a.createElement(W.b,null,u.a.createElement(G.a,{isOpen:e.props.modalOpen,toggle:e.props.toggleModal,wrapClassName:"modal-right",backdrop:"static"},u.a.createElement(L.a,{toggle:e.props.toggleModal},"Add new Event"),u.a.createElement(z.a,null,u.a.createElement(V.a,null,u.a.createElement(R.a,{for:"name"},"Name"),u.a.createElement(W.a,{className:"form-control",name:"Name",type:"text",id:"Name",placeholder:"Event name",maxLength:30}),u.a.createElement(U.a,{color:"muted"},"Maximum 30 letters")),u.a.createElement(V.a,null,u.a.createElement(R.a,{for:"info"},"Info"),u.a.createElement(W.a,{className:"form-control",name:"AdditionalInfo",type:"textarea",id:"AdditionalInfo",placeholder:"Description"},(function(e){var t=e.field;e.form,e.meta;return u.a.createElement("textarea",{rows:5,placeholder:"Description",className:"form-control",value:t.value,onChange:t.onChange,id:"AdditionalInfo"})}))),u.a.createElement(V.a,{className:"mb-1"},u.a.createElement(R.a,null,"Photo formats")),u.a.createElement(V.a,null,u.a.createElement(R.a,null,"No pricing"),u.a.createElement(Q.a,{loadingIcon:null,className:"custom-switch custom-switch-primary custom-switch-small",checked:n.NoPricing,onChange:function(e){return a("NoPricing",e)}})),u.a.createElement(V.a,{className:"mb-1"},u.a.createElement("div",{className:"row"},u.a.createElement("div",{className:"col-8"},u.a.createElement(W.a,{className:"form-control",name:"FirstFormat",type:"text",id:"FirstFormat",placeholder:"First Format"})),u.a.createElement("div",{className:"col-4"},u.a.createElement(W.a,{className:"form-control",name:"FirstFormatPrice",type:"number",id:"FirstFormatPrice",placeholder:"Price"})))),u.a.createElement(V.a,{className:"mb-1"},u.a.createElement("div",{className:"row"},u.a.createElement("div",{className:"col-8"},u.a.createElement(W.a,{className:"form-control",name:"SecondFormat",type:"text",id:"SecondFormat",placeholder:"Second Format"})),u.a.createElement("div",{className:"col-4"},u.a.createElement(W.a,{className:"form-control",name:"SecondFormatPrice",type:"number",id:"SecondFormatPrice",placeholder:"Price"})))),u.a.createElement(V.a,{className:"mb-1"},u.a.createElement("div",{className:"row"},u.a.createElement("div",{className:"col-8"},u.a.createElement(W.a,{className:"form-control",name:"ThirdFormat",type:"text",id:"ThirdFormat",placeholder:"Third Format"})),u.a.createElement("div",{className:"col-4"},u.a.createElement(W.a,{className:"form-control",name:"ThirdFormatPrice",type:"number",id:"ThirdFormatPrice",placeholder:"Price"})))),u.a.createElement(V.a,null,u.a.createElement("div",{className:"row"},u.a.createElement("div",{className:"col-8"},u.a.createElement(W.a,{className:"form-control",name:"FourthFormat",type:"text",id:"FourthFormat",placeholder:"Fourth Format"})),u.a.createElement("div",{className:"col-4"},u.a.createElement(W.a,{className:"form-control",name:"FourthFormatPrice",type:"number",id:"FourthFormatPrice",placeholder:"Price"})))),u.a.createElement(V.a,null,u.a.createElement(R.a,{for:"eventRemains"},"Event remains for"),u.a.createElement(W.a,{className:"form-control",name:"TimeToDelete",type:"number",id:"TimeToDelete"})),u.a.createElement(V.a,null,u.a.createElement(R.a,null,"Is password protected?"),u.a.createElement(Q.a,{loadingIcon:null,className:"custom-switch custom-switch-primary custom-switch-small",checked:n.IsPasswordProtected,onChange:function(e){return a("IsPasswordProtected",e)}})),n.IsPasswordProtected&&u.a.createElement(V.a,null,u.a.createElement(R.a,{for:"password"},"Password"),u.a.createElement(W.a,{className:"form-control",name:"Password",type:"text",id:"Password",placeholder:"Password"})),u.a.createElement(V.a,null,u.a.createElement(R.a,{for:"file"},"Event cover"),u.a.createElement(B.a,null,u.a.createElement(H.a,{type:"file",id:"File",name:"File",onChange:function(e){null!=e&&null!=e.currentTarget&&e.currentTarget.files&&a("File",e.currentTarget.files[0])}})),u.a.createElement(U.a,{color:"muted"},"Maximum 1920x1280 pixels")),u.a.createElement(V.a,null,u.a.createElement(R.a,null,"Is event hidden?"),u.a.createElement(Q.a,{loadingIcon:null,className:"custom-switch custom-switch-primary custom-switch-small",checked:n.IsHidden,onChange:function(e){return a("IsHidden",e)}})),u.a.createElement(V.a,null,u.a.createElement(R.a,{for:"customerEmail"},"Email to Customer"),u.a.createElement(W.a,{className:"form-control",name:"EmailToClient",type:"email",id:"EmailToClientName",placeholder:"ex. email@gmail.com"})),u.a.createElement(V.a,null,u.a.createElement(R.a,{for:"EmailLinkType"},"Call to action"),u.a.createElement(W.a,{className:"form-control",name:"EmailLinkType",as:"select",id:"EmailLinkType"},u.a.createElement("option",{disabled:!0,hidden:!0,selected:!0},"Choose a type of the link for e-mail"),u.a.createElement("option",{value:1},"Link to galery"),u.a.createElement("option",{value:2},"Direct link to event"),u.a.createElement("option",{value:3},"Add your Personal"))),3==n.EmailLinkType&&u.a.createElement(V.a,null,u.a.createElement(R.a,{for:"LinkForEmail"},"Personal link"),u.a.createElement(W.a,{className:"form-control",name:"LinkForEmail",type:"text",id:"LinkForEmail",placeholder:"Personal link"})),u.a.createElement(V.a,null,u.a.createElement(R.a,{for:"directLink"},"Direct link"),u.a.createElement(B.a,{className:"mb-3"},u.a.createElement(_.a,{disabled:!0,value:e.directLink(n.NoPassKey),type:"text",name:"directLink",id:"directLink"}),u.a.createElement(K.a,{addonType:"append"},u.a.createElement(d.a,{onClick:function(){return a("NoPassKey",Object(M.a)())},outline:!0,color:"secondary"},"RESET"))))),u.a.createElement(Y.a,null,u.a.createElement(d.a,{color:"secondary",outline:!0,onClick:e.props.toggleModal},"Cancel"),u.a.createElement(d.a,{disabled:r,color:"primary",type:"submit",onClick:function(){return o()}},r&&u.a.createElement(q.a,{size:"lg",icon:X.i,spin:!0,style:{color:"#fff"}})," Submit"))))}))}}]),a}(u.a.Component),Z=function(e){Object(i.a)(a,e);var t=Object(c.a)(a);function a(e){var r;return Object(o.a)(this,a),(r=t.call(this,e)).eventClient=new k.a,r.imageTypes=["13x18","Album A","Album B","Canvas"],r._initialValues={TimeToDelete:365,AdditionalInfo:"",EmailToClient:"",FirstFormat:"",FourthFormat:"",Id:0,IsHidden:!1,LinkForEmail:"",Name:"",NoPassKey:Object(M.a)(),Password:"",SecondFormat:"",ThirdFormat:"",File:null,IsPasswordProtected:!1,NoPricing:!1,FirstFormatPrice:0,SecondFormatPrice:0,ThirdFormatPrice:0,FourthFormatPrice:0},r.removeFormat=function(e){var t=Object(n.a)(r.state.formats);t.splice(e,1),r.setState({formats:t})},r.directLink=function(e){return null==e&&(e=""),"".concat(window.location.origin,"/portal/direct/").concat(e)},r.resetUUid=function(){r.setState({uuid:Object(M.a)()})},r.addFormat=function(){var e=Object(n.a)(r.state.formats);e.push(""),r.setState({formats:e})},r.onSubmit=function(e,t){e.Id=r.props.event.Id,e.IsPasswordProtected||(e.Password=void 0),delete e.FaceBookModel,D.b.info("Saving data...","",3e3,null,null,""),r.eventClient.EditEvent(e).then((function(e){e.data.Error?D.b.error("Saving error",e.data.Error,3e3,null,null,""):(r.props.onEdited(),r.props.toggleModal()),t.setSubmitting(!1)}))},r.state={formats:r.imageTypes},r}return Object(l.a)(a,[{key:"render",value:function(){var e=this;return u.a.createElement(W.c,{initialValues:this.initialValues,onSubmit:this.onSubmit,enableReinitialize:!0,validate:function(){}},(function(t){t.handleSubmit;var a=t.setFieldValue,n=(t.setFieldTouched,t.handleChange,t.handleBlur,t.values),r=(t.errors,t.touched,t.isSubmitting),o=t.submitForm;return u.a.createElement(W.b,null,u.a.createElement(G.a,{isOpen:e.props.modalOpen,toggle:e.props.toggleModal,wrapClassName:"modal-right",backdrop:"static"},u.a.createElement(L.a,{toggle:e.props.toggleModal},"Edit Event"),u.a.createElement(z.a,null,u.a.createElement(V.a,null,u.a.createElement(R.a,{for:"name"},"Name"),u.a.createElement(W.a,{className:"form-control",name:"Name",type:"text",id:"Name",placeholder:"Event name",maxLength:30}),u.a.createElement(U.a,{color:"muted"},"Maximum 30 letters")),u.a.createElement(V.a,null,u.a.createElement(R.a,{for:"info"},"Info"),u.a.createElement(W.a,{className:"form-control",name:"AdditionalInfo",type:"textarea",id:"AdditionalInfo",placeholder:"Description"},(function(e){var t=e.field;e.form,e.meta;return u.a.createElement("textarea",{rows:5,placeholder:"Description",className:"form-control",value:t.value,onChange:t.onChange,id:"AdditionalInfo"})}))),u.a.createElement(V.a,{className:"mb-1"},u.a.createElement(R.a,null,"Photo formats")),u.a.createElement(V.a,null,u.a.createElement(R.a,null,"No pricing"),u.a.createElement(Q.a,{loadingIcon:null,className:"custom-switch custom-switch-primary custom-switch-small",checked:n.NoPricing,onChange:function(e){return a("NoPricing",e)}})),u.a.createElement(V.a,{className:"mb-1"},u.a.createElement("div",{className:"row"},u.a.createElement("div",{className:"col-8"},u.a.createElement(W.a,{className:"form-control",name:"FirstFormat",type:"text",id:"FirstFormat",placeholder:"First Format"})),u.a.createElement("div",{className:"col-4"},u.a.createElement(W.a,{className:"form-control",name:"FirstFormatPrice",type:"number",id:"FirstFormatPrice",placeholder:"Price"})))),u.a.createElement(V.a,{className:"mb-1"},u.a.createElement("div",{className:"row"},u.a.createElement("div",{className:"col-8"},u.a.createElement(W.a,{className:"form-control",name:"SecondFormat",type:"text",id:"SecondFormat",placeholder:"Second Format"})),u.a.createElement("div",{className:"col-4"},u.a.createElement(W.a,{className:"form-control",name:"SecondFormatPrice",type:"number",id:"SecondFormatPrice",placeholder:"Price"})))),u.a.createElement(V.a,{className:"mb-1"},u.a.createElement("div",{className:"row"},u.a.createElement("div",{className:"col-8"},u.a.createElement(W.a,{className:"form-control",name:"ThirdFormat",type:"text",id:"ThirdFormat",placeholder:"Third Format"})),u.a.createElement("div",{className:"col-4"},u.a.createElement(W.a,{className:"form-control",name:"ThirdFormatPrice",type:"number",id:"ThirdFormatPrice",placeholder:"Price"})))),u.a.createElement(V.a,null,u.a.createElement("div",{className:"row"},u.a.createElement("div",{className:"col-8"},u.a.createElement(W.a,{className:"form-control",name:"FourthFormat",type:"text",id:"FourthFormat",placeholder:"Fourth Format"})),u.a.createElement("div",{className:"col-4"},u.a.createElement(W.a,{className:"form-control",name:"FourthFormatPrice",type:"number",id:"FourthFormatPrice",placeholder:"Price"})))),u.a.createElement(V.a,null,u.a.createElement(R.a,{for:"eventRemains"},"Event remains for"),u.a.createElement(W.a,{className:"form-control",name:"TimeToDelete",type:"number",id:"TimeToDelete"})),u.a.createElement(V.a,null,u.a.createElement(R.a,null,"Is password protected?"),u.a.createElement(Q.a,{loadingIcon:null,className:"custom-switch custom-switch-primary custom-switch-small",checked:n.IsPasswordProtected,onChange:function(e){return a("IsPasswordProtected",e)}})),n.IsPasswordProtected&&u.a.createElement(V.a,null,u.a.createElement(R.a,{for:"password"},"Password"),u.a.createElement(W.a,{className:"form-control",name:"Password",type:"text",id:"Password",placeholder:"Password"})),u.a.createElement(V.a,null,u.a.createElement(R.a,{for:"file"},"Event cover"),u.a.createElement(B.a,null,u.a.createElement(H.a,{type:"file",id:"File",name:"File",onChange:function(e){null!=e&&null!=e.currentTarget&&e.currentTarget.files&&a("File",e.currentTarget.files[0])}})),u.a.createElement(U.a,{color:"muted"},"Maximum 1920x1280 pixels")),u.a.createElement(V.a,null,u.a.createElement(R.a,null,"Is event hidden?"),u.a.createElement(Q.a,{loadingIcon:null,className:"custom-switch custom-switch-primary custom-switch-small",checked:n.IsHidden,onChange:function(e){return a("IsHidden",e)}})),u.a.createElement(V.a,null,u.a.createElement(R.a,{for:"customerEmail"},"Email to Customer"),u.a.createElement(W.a,{className:"form-control",name:"EmailToClient",type:"email",id:"EmailToClientName",placeholder:"ex. email@gmail.com"})),u.a.createElement(V.a,null,u.a.createElement(R.a,{for:"EmailLinkType"},"Call to action"),u.a.createElement(W.a,{className:"form-control",name:"EmailLinkType",as:"select",id:"EmailLinkType"},u.a.createElement("option",{disabled:!0,hidden:!0,selected:!0},"Choose a type of the link for e-mail"),u.a.createElement("option",{value:1},"Link to galery"),u.a.createElement("option",{value:2},"Direct link to event"),u.a.createElement("option",{value:3},"Add your Personal"))),3==n.EmailLinkType&&u.a.createElement(V.a,null,u.a.createElement(R.a,{for:"LinkForEmail"},"Personal link"),u.a.createElement(W.a,{className:"form-control",name:"LinkForEmail",type:"text",id:"LinkForEmail",placeholder:"Personal link"})),u.a.createElement(V.a,null,u.a.createElement(R.a,{for:"directLink"},"Direct link"),u.a.createElement(B.a,{className:"mb-3"},u.a.createElement(_.a,{disabled:!0,value:e.directLink(n.NoPassKey),type:"text",name:"directLink",id:"directLink"}),u.a.createElement(K.a,{addonType:"append"},u.a.createElement(d.a,{onClick:function(){return a("NoPassKey",Object(M.a)())},outline:!0,color:"secondary"},"RESET"))))),u.a.createElement(Y.a,null,u.a.createElement(d.a,{color:"secondary",outline:!0,onClick:e.props.toggleModal},"Cancel"),u.a.createElement(d.a,{disabled:r,color:"primary",type:"submit",onClick:function(){return o()}},r&&u.a.createElement(q.a,{size:"lg",icon:X.i,spin:!0,style:{color:"#fff"}})," Submit"))))}))}},{key:"initialValues",get:function(){return this.props.event?Object(r.a)(Object(r.a)({},this.props.event),{},{IsPasswordProtected:!!this.props.event.Password}):this._initialValues}}]),a}(u.a.Component),$=a(133),ee=a(119),te=a(29),ae=a(136),ne=function(e){Object(i.a)(a,e);var t=Object(c.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).pageSizes=[4,8,12,20],n.eventClient=void 0,n.authService=new ae.a,n.populateData=function(){n.setState({loading:!0}),n.eventClient.List(n.authService.getId()).then((function(e){e.data.Error?D.b.error(e.data.Error,"Error",3e3,null,null,""):null!=e.data.Data&&n.setState({currentPage:e.data.Data.Page,totalPage:e.data.Data.PageCount,events:e.data.Data.EventsList||[],response:e.data.Data}),n.setState({loading:!1})}))},n.setModalOpen=function(e,t){"Add"==e?n.setState({modalOpen:t}):n.setState({modalEditOpen:t})},n.deleteEvent=function(e,t){D.b.info("Deleting event...","",3e3,null,null,""),n.eventClient.Delete(e.Id).then((function(e){e.data&&(n.populateData(),D.b.success("","Event deleted",3e3,null,null,""))}))},n.editEvent=function(e){n.eventClient.GetAddEventDialog(e.Id).then((function(t){t.data.Error?D.b.error("Cannot get data","Error",3e3,null,null,""):(console.log("response edit",t.data),n.setState({editedEvent:Object(r.a)(Object(r.a)({},t.data.Data),{},{Id:e.Id})},(function(){n.setState({modalEditOpen:!0})})))}))},n.onContextMenuClick=function(e,t){if("settings"==t.action)n.editEvent(t.event);else if("delete"==t.action){var a=n.state.events.indexOf(t.event);n.deleteEvent(t.event,a)}},n.onContextMenu=function(e,t){return!0},n.state={currentPage:1,totalPage:1,events:[],modalOpen:!1,modalEditOpen:!1,editedEvent:null,response:null,loading:!0},n.eventClient=new k.a,n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.populateData()}},{key:"render",value:function(){var e,t=this;return this.props.user?this.props.match.params.photographerId?u.a.createElement(u.a.Fragment,null,this.state.loading&&u.a.createElement("div",{className:"loading"}),!this.state.loading&&u.a.createElement(u.a.Fragment,null,u.a.createElement(m.a,null,u.a.createElement(p.a,{xxs:"12"},u.a.createElement("div",{className:"mb-2"},u.a.createElement("div",{className:"text-zero top-right-button-container"},u.a.createElement(d.a,{color:"primary",size:"lg",className:"top-right-button",onClick:function(){return t.setModalOpen("Add",!0)}},u.a.createElement("i",{className:"simple-icon-plus"})," ADD NEW EVENT"),"  "),u.a.createElement(T.a,{heading:"Events",match:this.props.match})),u.a.createElement(p.b,{className:"mb-5"}))),u.a.createElement(m.a,{className:"mb-3"},u.a.createElement(p.a,{xxs:"12"},null!=this.parallaxData&&u.a.createElement($.b,{canEdit:this.parallaxData.CanEdit,coverPhoto:this.parallaxData.CoverPhoto,top:this.parallaxData.Top,mode:this.parallaxData.Mode,objectId:this.parallaxData.ObjectId}))),u.a.createElement("div",{className:"disable-text-selection"},u.a.createElement(m.a,null,null===(e=this.events)||void 0===e?void 0:e.map((function(e,a){return u.a.createElement(F,{key:"".concat(e.Id,"-").concat(a),event:e,onDelete:function(e){return t.deleteEvent(e,a)},onEdit:function(e){t.editEvent(e)}})})),u.a.createElement(A.a,{currentPage:this.state.currentPage,totalPage:this.state.totalPage,onChangePage:function(e){}}))),u.a.createElement(P.a,{id:"menu_id",onShow:function(e){return t.onContextMenu(e,e.detail.data)}},u.a.createElement(P.c,{onClick:this.onContextMenuClick,data:{action:"settings"}},u.a.createElement("i",{className:"simple-icon-docs"})," ",u.a.createElement("span",null,"Settings")),u.a.createElement(P.c,{onClick:this.onContextMenuClick,data:{action:"delete"}},u.a.createElement("i",{className:"simple-icon-trash"})," ",u.a.createElement("span",null,"Delete"))),u.a.createElement(J,{modalOpen:this.state.modalOpen,toggleModal:function(){return t.setModalOpen("Add",!t.state.modalOpen)},onCreate:function(){return t.populateData()}}),u.a.createElement(Z,{event:this.state.editedEvent,modalOpen:this.state.modalEditOpen,toggleModal:function(){return t.setModalOpen("Edit",!t.state.modalEditOpen)},onEdited:function(){return t.populateData()}}))):u.a.createElement(ee.a,{to:"/photo-hosting/".concat(this.authService.getId())}):u.a.createElement(ee.a,{to:"/redirect?url=".concat("".concat(te.a,"/Event/List/").concat(this.props.match.params.photographerId))})}},{key:"events",get:function(){var e=Object(n.a)(this.state.events);return e.reverse(),e}},{key:"parallaxData",get:function(){return null==this.state.response?null:{CoverPhoto:this.state.response.CoverPhotoUrl,Top:this.state.response.CoverOffset?this.state.response.CoverOffset:0,ObjectId:Number(this.state.response.PhotographerId),Mode:"photographer",CanEdit:!0}}}]),a}(u.a.Component);t.default=Object(w.b)((function(e){return e.authUser}))(ne)},533:function(e,t,a){"use strict";a.r(t),a.d(t,"SubfoldersView",(function(){return J}));var n=a(121),r=a(1),o=a(3),l=a(2),i=a(7),c=a(8),s=a(0),u=a.n(s),m=a(243),d=a(521),p=a(184),f=a(542),E=a(543),h=a(496),g=a(166),b=a(110),v=a(117),y=a(30),N=a(113),C=a(260),x=a(517),P=a(516),I=a(495),S=a(507),w=a(518),O=a(112),k=a(134),D=(a(272),function(e){Object(i.a)(a,e);var t=Object(c.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).eventClient=void 0,n.state={isImage:!0,data:{}},n.onImageError=function(){n.setState({isImage:!1})},n.onEdit=function(e){e.preventDefault(),n.props.onEdit()},n.onDelete=function(e){e.preventDefault(),n.props.onDelete()},n.eventClient=new v.a,n}return Object(l.a)(a,[{key:"render",value:function(){var e=this;return u.a.createElement(b.a,{sm:"6",lg:"4",xl:"3",className:"mb-3 eventListItem",key:this.props.data.FolderId},u.a.createElement(k.b,{id:"menu_id",collect:function(t){return{data:t.data,folderId:e.props.data.FolderId}}},u.a.createElement(O.c,{to:"/photo-hosting/event/".concat(this.props.eventId,"/").concat(this.props.data.FolderId),className:"w-40 w-sm-100"},u.a.createElement(C.a,{onClick:function(){}},u.a.createElement("div",{className:"position-relative"},u.a.createElement(x.a,{top:!0,alt:this.props.data.Name,src:this.state.isImage?this.props.data.ThumbSrc:"https://via.placeholder.com/600?text=No%20image",onError:function(t){return e.onImageError()}}),this.props.data.Password&&u.a.createElement(P.a,{color:"danger",pill:!0,className:"position-absolute badge-top-left"},"PASSWORD"),u.a.createElement("div",{className:"eventListItem__menu"},u.a.createElement(I.a,null,u.a.createElement(f.a,{size:"xs",color:"primary",onClickCapture:function(e){return e.preventDefault()}},u.a.createElement("i",{className:"simple-icon-menu"})),u.a.createElement(E.a,null,u.a.createElement(h.a,{onClick:function(t){return e.onEdit(t)}},u.a.createElement("i",{className:"simple-icon-docs"})," ",u.a.createElement("span",null,"Settings")),u.a.createElement(h.a,{onClick:function(t){return e.onDelete(t)}},u.a.createElement("i",{className:"simple-icon-trash"})," ",u.a.createElement("span",null,"Delete")))))),u.a.createElement(S.a,null,u.a.createElement(w.a,{className:"mb-4"},this.props.data.Name))))))}}]),a}(u.a.Component)),j=Object(y.b)((function(e){return e.authUser}))(D),F=a(535),A=a(500),T=a(501),M=a(490),G=a(491),L=a(510),z=a(508),V=a(541),R=a(502),U=a(178),B=(a(172),a(116)),H=a(120),_=a(122),K=function(e){Object(i.a)(a,e);var t=Object(c.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).eventClient=new v.a,n.initialValues={Id:0,EventId:0,Name:"",Password:"",FolderCoverPhoto:null,IsPasswordProtected:!1},n.onSubmit=function(e,t){n.eventClient.SaveFolder(e).then((function(e){e.data.Error?N.b.error("Saving error",e.data.Error,3e3,null,null,""):(N.b.success("Data saved","Data saved sucessfully.",3e3,null,null,""),n.props.onCreate(),n.props.toggleModal()),t.setSubmitting(!1)}))},n.initialValues.EventId=n.props.eventId,n.state={},n}return Object(l.a)(a,[{key:"render",value:function(){var e=this;return u.a.createElement(B.c,{initialValues:this.initialValues,onSubmit:this.onSubmit,enableReinitialize:!0,validate:function(){}},(function(t){t.handleSubmit;var a=t.setFieldValue,n=(t.setFieldTouched,t.handleChange,t.handleBlur,t.values),r=(t.errors,t.touched,t.isSubmitting),o=t.submitForm;return u.a.createElement(B.b,null,u.a.createElement(F.a,{isOpen:e.props.modalOpen,toggle:e.props.toggleModal,wrapClassName:"modal-right",backdrop:"static"},u.a.createElement(A.a,{toggle:e.props.toggleModal},"Add new subfolder"),u.a.createElement(T.a,null,u.a.createElement(M.a,null,u.a.createElement(G.a,{for:"name"},"Name"),u.a.createElement(B.a,{className:"form-control",name:"Name",type:"text",id:"Name",placeholder:"Subfolder name",maxLength:30}),u.a.createElement(L.a,{color:"muted"},"Maximum 30 letters")),u.a.createElement(M.a,null,u.a.createElement(G.a,{for:"file"},"Cover"),u.a.createElement(z.a,null,u.a.createElement(V.a,{type:"file",id:"FolderCoverPhoto",name:"FolderCoverPhoto",onChange:function(e){null!=e&&null!=e.currentTarget&&e.currentTarget.files&&a("FolderCoverPhoto",e.currentTarget.files[0])}})),u.a.createElement(L.a,{color:"muted"},"Maximum 1920x1280 pixels")),u.a.createElement(M.a,null,u.a.createElement(G.a,null,"Is password protected?"),u.a.createElement(U.a,{loadingIcon:null,className:"custom-switch custom-switch-primary custom-switch-small",checked:n.IsPasswordProtected,onChange:function(e){a("IsPasswordProtected",e),e||a("Password","")}})),n.IsPasswordProtected&&u.a.createElement(M.a,null,u.a.createElement(G.a,{for:"password"},"Password"),u.a.createElement(B.a,{className:"form-control",name:"Password",type:"text",id:"Password",placeholder:"Password"}))),u.a.createElement(R.a,null,u.a.createElement(p.a,{color:"secondary",outline:!0,onClick:e.props.toggleModal},"Cancel"),u.a.createElement(p.a,{disabled:r,color:"primary",type:"submit",onClick:function(){return o()}},r&&u.a.createElement(H.a,{size:"lg",icon:_.i,spin:!0,style:{color:"#fff"}})," Submit"))))}))}}]),a}(u.a.Component),Y=function(e){Object(i.a)(a,e);var t=Object(c.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).eventClient=new v.a,n._initialValues={Id:0,EventId:0,Name:"",Password:"",FolderCoverPhoto:null,IsPasswordProtected:!1},n.onSubmit=function(e,t){n.eventClient.SaveFolder(e).then((function(e){e.data.Error?N.b.error("Saving error",e.data.Error,3e3,null,null,""):(N.b.success("Data saved","Data saved sucessfully.",3e3,null,null,""),n.props.onEdit(),n.props.toggleModal()),t.setSubmitting(!1)}))},n}return Object(l.a)(a,[{key:"render",value:function(){var e=this;return u.a.createElement(B.c,{initialValues:this.initialValues,onSubmit:this.onSubmit,enableReinitialize:!0,validate:function(){}},(function(t){t.handleSubmit;var a=t.setFieldValue,n=(t.setFieldTouched,t.handleChange,t.handleBlur,t.values),r=(t.errors,t.touched,t.isSubmitting),o=t.submitForm;return u.a.createElement(B.b,null,u.a.createElement(F.a,{isOpen:e.props.modalOpen,toggle:e.props.toggleModal,wrapClassName:"modal-right",backdrop:"static"},u.a.createElement(A.a,{toggle:e.props.toggleModal},"Edit subfolder"),u.a.createElement(T.a,null,u.a.createElement(M.a,null,u.a.createElement(G.a,{for:"name"},"Name"),u.a.createElement(B.a,{className:"form-control",name:"Name",type:"text",id:"Name",placeholder:"Subfolder name",maxLength:30}),u.a.createElement(L.a,{color:"muted"},"Maximum 30 letters")),u.a.createElement(M.a,null,u.a.createElement(G.a,{for:"file"},"Cover"),u.a.createElement(z.a,null,u.a.createElement(V.a,{type:"file",id:"FolderCoverPhoto",name:"FolderCoverPhoto",onChange:function(e){null!=e&&null!=e.currentTarget&&e.currentTarget.files&&a("FolderCoverPhoto",e.currentTarget.files[0])}})),u.a.createElement(L.a,{color:"muted"},"Maximum 1920x1280 pixels")),u.a.createElement(M.a,null,u.a.createElement(G.a,null,"Is password protected?"),u.a.createElement(U.a,{loadingIcon:null,className:"custom-switch custom-switch-primary custom-switch-small",checked:n.IsPasswordProtected,onChange:function(e){a("IsPasswordProtected",e),e||a("Password","")}})),n.IsPasswordProtected&&u.a.createElement(M.a,null,u.a.createElement(G.a,{for:"password"},"Password"),u.a.createElement(B.a,{className:"form-control",name:"Password",type:"text",id:"Password",placeholder:"Password"}))),u.a.createElement(R.a,null,u.a.createElement(p.a,{color:"secondary",outline:!0,onClick:e.props.toggleModal},"Cancel"),u.a.createElement(p.a,{disabled:r,color:"primary",type:"submit",onClick:function(){return o()}},r&&u.a.createElement(H.a,{size:"lg",icon:_.i,spin:!0,style:{color:"#fff"}}),"  Submit"))))}))}},{key:"initialValues",get:function(){return this.props.subfolder?(console.log(this.props.subfolder),{Id:this.props.subfolder.FolderId,EventId:this.props.eventId,Name:this.props.subfolder.Name,Password:this.props.subfolder.Password,FolderCoverPhoto:null,IsPasswordProtected:!!this.props.subfolder.Password}):this._initialValues}}]),a}(u.a.Component),Q=a(133),W=a(29),q=a(119),X=a(136),J=function(e){Object(i.a)(a,e);var t=Object(c.a)(a);function a(e){var l;return Object(o.a)(this,a),(l=t.call(this,e)).eventClient=void 0,l.authService=new X.a,l.populateData=function(){l.setState({loading:!0,nextEvent:0,previouseEvent:0}),l.eventClient.List(l.authService.getId()).then((function(e){1==e.data.Data.EventsList.length&&l.setState(Object(r.a)(Object(r.a)({},l.state),{},{nextEvent:l.props.match.params.eventId,previouseEvent:l.props.match.params.eventId}));var t=e.data.Data.EventsList.findIndex((function(e){return e.Id==l.props.match.params.eventId})),a=(t+1)%e.data.Data.EventsList.length,n=0==t?e.data.Data.EventsList.length-1:t-1;l.setState(Object(r.a)(Object(r.a)({},l.state),{},{nextEvent:e.data.Data.EventsList[a].Id,previouseEvent:e.data.Data.EventsList[n].Id}))})),l.eventClient.EventFoldersList(l.props.match.params.eventId).then((function(e){l.setState({eventData:e.data.Data}),e.data.Error?N.b.error(e.data.Error,"Error",3e3,null,null,""):null!=e.data.Data&&l.setState({currentPage:e.data.Data.Page,totalPage:e.data.Data.PageCount,eventData:e.data.Data,response:e.data.Data}),l.setState({loading:!1})}))},l.setModalOpen=function(e,t){"Add"==t?l.setState({modalOpen:e}):l.setState({modalEditOpen:e})},l.editSubfolder=function(e){var t=l.state.eventData.eventFolderList.Folders.find((function(t){return t.FolderId==e}));t&&l.setState({editedSubfolder:t,modalEditOpen:!0})},l.deleteSubfolder=function(e){Object(r.a)({},l.props.state);var t=l.state.eventData.eventFolderList.Folders.find((function(t){return t.FolderId==e}));if(t){var a=l.state.eventData.eventFolderList.Folders.indexOf(t);a>-1&&l.eventClient.DeleteFolder(l.props.match.params.eventId,e).then((function(e){if(e.data.Data){var t,o=Object(n.a)(null===(t=l.state.eventData)||void 0===t?void 0:t.eventFolderList.Folders);o.splice(a,1),l.setState(Object(r.a)(Object(r.a)({},l.state),{},{eventData:Object(r.a)(Object(r.a)({},l.state.eventData),{},{eventFolderList:Object(r.a)(Object(r.a)({},l.state.eventData.eventFolderList),{},{Folders:o})})})),N.b.success("","Subfolder deleted",3e3,null,null,"")}}))}},l.sendToApplication=function(){N.b.info("","Sending data to application...",3e3,null,null,""),l.eventClient.GenerateEventXML(l.props.match.params.eventId).then((function(e){e.data.Data?N.b.success("","Data sended sucessfully",3e3,null,null,""):N.b.error("",e.data.Error,3e3,null,null,"")}))},l.state={currentPage:1,totalPage:1,eventData:null,modalOpen:!1,modalEditOpen:!1,editedSubfolder:null,droprownMenuShow:!1,response:null,loading:!0,nextEvent:0,previouseEvent:0},l.eventClient=new v.a,l.populateData(),l}return Object(l.a)(a,[{key:"componentDidUpdate",value:function(e){this.props.match.params.eventId!=e.match.params.eventId&&this.populateData()}},{key:"render",value:function(){var e,t=this;return this.props.user?u.a.createElement(u.a.Fragment,null,this.state.loading&&u.a.createElement("div",{className:"loading"}),!this.state.loading&&u.a.createElement(u.a.Fragment,null,u.a.createElement(m.a,null,u.a.createElement(b.a,{xxs:"6"},u.a.createElement("div",{className:"d-flex"},u.a.createElement("h1",null,this.state.eventData?this.state.eventData.eventFolderList.EventName:"Event"))),u.a.createElement(b.a,{xxs:"6"},u.a.createElement("div",{className:"text-zero top-right-button-container"},u.a.createElement(d.a,{isOpen:this.state.droprownMenuShow,toggle:function(){t.setState({droprownMenuShow:!t.state.droprownMenuShow})},size:"lg"},u.a.createElement(p.a,{style:{fontSize:"0.8rem"},color:"primary",size:"lg",className:"top-right-button",onClick:function(){return t.setModalOpen(!0,"Add")}},u.a.createElement("i",{className:"simple-icon-plus"})," ADD NEW SUBFOLDER"),u.a.createElement(f.a,{caret:!0,color:"primary",className:"dropdown-toggle-split btn-lg"}),u.a.createElement(E.a,{right:!0},u.a.createElement(h.a,{onClick:function(){return t.sendToApplication()}},u.a.createElement("i",{className:"simple-icon-cloud-download"})," Send to application"))))),u.a.createElement(b.a,{xxs:"12"},u.a.createElement(b.b,{className:"mb-5"}))),u.a.createElement(m.a,{className:"mb-3"},u.a.createElement(b.a,{xxs:"12"},null!=this.parallaxData&&u.a.createElement(Q.a,{canEdit:this.parallaxData.CanEdit,coverPhoto:this.parallaxData.CoverPhoto,top:this.parallaxData.Top,mode:this.parallaxData.Mode,objectId:this.parallaxData.ObjectId}))),u.a.createElement("div",{className:"disable-text-selection"},u.a.createElement(m.a,null,null===(e=this.state.eventData)||void 0===e?void 0:e.eventFolderList.Folders.map((function(e,a){return u.a.createElement(j,{key:e.FolderId,eventId:t.props.match.params.eventId,data:e,onEdit:function(){return t.editSubfolder(e.FolderId)},onDelete:function(){return t.deleteSubfolder(e.FolderId)}})})),u.a.createElement(g.a,{currentPage:this.state.currentPage,totalPage:this.state.totalPage,onChangePage:function(e){}}))),u.a.createElement(K,{eventId:this.props.match.params.eventId,modalOpen:this.state.modalOpen,toggleModal:function(){return t.setModalOpen(!t.state.modalOpen,"Add")},onCreate:function(){t.populateData()}}),u.a.createElement(Y,{subfolder:this.state.editedSubfolder,eventId:this.props.match.params.eventId,modalOpen:this.state.modalEditOpen,toggleModal:function(){return t.setModalOpen(!t.state.modalEditOpen,"Edit")},onEdit:function(){t.populateData()}}),u.a.createElement(k.a,{id:"menu_id"},u.a.createElement(k.c,{onClick:function(e,a){return t.editSubfolder(a.folderId)},data:{action:"settings"}},u.a.createElement("i",{className:"simple-icon-docs"})," ",u.a.createElement("span",null,"Settings")),u.a.createElement(k.c,{onClick:function(e,a){return t.deleteSubfolder(a.folderId)},data:{action:"delete"}},u.a.createElement("i",{className:"simple-icon-trash"})," ",u.a.createElement("span",null,"Delete"))))):u.a.createElement(q.a,{to:"/redirect?url=".concat("".concat(W.a,"/Event/EventFoldersList?eventId=").concat(this.props.match.params.eventId))})}},{key:"parallaxData",get:function(){return null==this.state.response?null:{CoverPhoto:this.state.response.eventFolderList.CoverPhoto,Top:this.state.response.eventFolderList.CoverOffset?this.state.response.eventFolderList.CoverOffset:0,ObjectId:Number(this.state.response.eventFolderList.EventId),Mode:"event",CanEdit:!0}}}]),a}(u.a.Component);t.default=Object(y.b)((function(e){return e.authUser}))(J)}}]);
//# sourceMappingURL=dashboard-default.73de44bd.chunk.js.map